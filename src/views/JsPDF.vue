<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>ğŸ“„ jsPDF - å¼ºå¤§çš„PDFç”Ÿæˆåº“</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>jsPDF</strong></p>
          <p>npm install jspdf</p>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ å…¼å®¹æ€§</h3>
          <ul>
            <li>âœ… Chrome 60+</li>
            <li>âœ… Firefox 55+</li>
            <li>âœ… Safari 11+</li>
            <li>âœ… Edge 79+</li>
            <li>âŒ IE ä¸æ”¯æŒ</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­ (80%)</p>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½</h3>
          <ul>
            <li>âœ… å®¢æˆ·ç«¯ç”Ÿæˆ</li>
            <li>âœ… çŸ¢é‡å›¾å½¢</li>
            <li>âš ï¸ å¤§æ–‡ä»¶è¾ƒæ…¢</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“‘ åˆ†é¡µæ§åˆ¶</h3>
          <ul>
            <li>âœ… å®Œå…¨å¯æ§</li>
            <li>âœ… addPage()</li>
            <li>âœ… ç²¾ç¡®å®šä½</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“ æ–‡ä»¶å¤§å°</h3>
          <p class="highlight">~150 KB</p>
          <p>(å‹ç¼©å)</p>
        </div>

        <div class="info-section">
          <h3>âœ¨ æ ¸å¿ƒåŠŸèƒ½</h3>
          <ul>
            <li>âœ… æ–‡æœ¬ç»˜åˆ¶</li>
            <li>âœ… å›¾å½¢ç»˜åˆ¶</li>
            <li>âœ… å›¾ç‰‡åµŒå…¥</li>
            <li>âœ… è‡ªå®šä¹‰å­—ä½“</li>
            <li>âœ… è¡¨æ ¼ç”Ÿæˆ</li>
            <li>âœ… å¤šé¡µæ–‡æ¡£</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âœ¨ ä¼˜åŠ¿</h3>
          <ul>
            <li>åŠŸèƒ½å¼ºå¤§</li>
            <li>ç²¾ç¡®æ§åˆ¶</li>
            <li>çŸ¢é‡è¾“å‡º</li>
            <li>æ’ä»¶ä¸°å¯Œ</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âš ï¸ åŠ£åŠ¿</h3>
          <ul>
            <li>ä¸­æ–‡éœ€é…ç½®å­—ä½“</li>
            <li>å­¦ä¹ æ›²çº¿è¾ƒé™¡</li>
            <li>APIç›¸å¯¹åº•å±‚</li>
          </ul>
        </div>
      </aside>

      <main class="demo-panel">
        <h2 class="section-title">ğŸ“ åŸºç¡€PDFç”Ÿæˆ</h2>

        <!-- ç¤ºä¾‹é€‰æ‹©æ ‡ç­¾ -->
        <div class="example-tabs">
          <button
            v-for="(example, index) in examples"
            :key="index"
            :class="['tab-button', { active: currentExample === index }]"
            @click="currentExample = index"
          >
            {{ example }}
          </button>
        </div>

        <!-- ç¤ºä¾‹å†…å®¹åŒº -->
        <div class="example-content">
          <!-- ç¤ºä¾‹1: åˆ›å»ºåŸºç¡€PDF -->
          <div v-if="currentExample === 0">
            <h3>ç¤ºä¾‹ 1: åˆ›å»ºåŸºç¡€PDFæ–‡æ¡£</h3>
            <p>æœ€ç®€å•çš„PDFç”Ÿæˆæ–¹å¼ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«æ–‡æœ¬çš„PDFæ–‡æ¡£ã€‚</p>

            <div class="controls">
              <button @click="example1Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“„ ç”ŸæˆåŸºç¡€PDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>import { jsPDF } from 'jspdf'

const doc = new jsPDF()

// æ·»åŠ æ–‡æœ¬
doc.text('Hello World!', 10, 10)
doc.text('è¿™æ˜¯ä½¿ç”¨ jsPDF ç”Ÿæˆçš„ PDF æ–‡æ¡£', 10, 20)

// ä¿å­˜PDF
doc.save('basic.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ PDFå†…å®¹é¢„è§ˆ:</h4>
              <div class="preview-box">
                <p><strong>æ ‡é¢˜:</strong> Hello World!</p>
                <p><strong>å†…å®¹:</strong> è¿™æ˜¯ä½¿ç”¨ jsPDF ç”Ÿæˆçš„ PDF æ–‡æ¡£</p>
                <p><strong>ç”Ÿæˆæ—¶é—´:</strong> {{ currentDate }}</p>
                <p class="note">ç‚¹å‡»æŒ‰é’®å°†ç”Ÿæˆå¹¶ä¸‹è½½PDFæ–‡ä»¶</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹2: æ–‡æœ¬æ ·å¼ -->
          <div v-else-if="currentExample === 1">
            <h3>ç¤ºä¾‹ 2: æ–‡æœ¬æ ·å¼å’Œæ ¼å¼</h3>
            <p>è®¾ç½®å­—ä½“å¤§å°ã€æ ·å¼ã€é¢œè‰²ç­‰å±æ€§ï¼Œåˆ›å»ºæ ¼å¼ä¸°å¯Œçš„PDFã€‚</p>

            <div class="controls">
              <button @click="example2Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ¨ ç”Ÿæˆæ ·å¼PDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>const doc = new jsPDF()

// è®¾ç½®å­—ä½“å¤§å°å’Œæ ·å¼
doc.setFontSize(24)
doc.setFont('helvetica', 'bold')
doc.text('PDFæ ‡é¢˜', 10, 20)

// è®¾ç½®é¢œè‰²
doc.setTextColor(102, 126, 234)
doc.setFontSize(16)
doc.text('å¸¦é¢œè‰²çš„æ–‡æœ¬', 10, 35)

// æ™®é€šæ–‡æœ¬
doc.setTextColor(0, 0, 0)
doc.setFontSize(12)
doc.text('è¿™æ˜¯æ­£å¸¸å¤§å°çš„æ–‡æœ¬', 10, 50)

doc.save('styled.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ æ ·å¼ç¤ºä¾‹:</h4>
              <div class="preview-box">
                <p style="font-size: 24px; font-weight: bold">PDFæ ‡é¢˜</p>
                <p style="font-size: 16px; color: #667eea">å¸¦é¢œè‰²çš„æ–‡æœ¬</p>
                <p style="font-size: 12px">è¿™æ˜¯æ­£å¸¸å¤§å°çš„æ–‡æœ¬</p>
                <p class="note">PDFä¸­å°†åº”ç”¨è¿™äº›æ ·å¼</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹3: ç»˜åˆ¶å›¾å½¢ -->
          <div v-else-if="currentExample === 2">
            <h3>ç¤ºä¾‹ 3: ç»˜åˆ¶å›¾å½¢å’Œçº¿æ¡</h3>
            <p>ä½¿ç”¨jsPDFçš„å›¾å½¢APIç»˜åˆ¶çŸ©å½¢ã€åœ†å½¢ã€çº¿æ¡ç­‰åŸºæœ¬å›¾å½¢ã€‚</p>

            <div class="controls">
              <button @click="example3Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ¨ ç”Ÿæˆå›¾å½¢PDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>const doc = new jsPDF()

// ç»˜åˆ¶çŸ©å½¢ï¼ˆè¾¹æ¡†ï¼‰
doc.rect(10, 10, 50, 30)

// ç»˜åˆ¶å¡«å……çŸ©å½¢
doc.setFillColor(102, 126, 234)
doc.rect(70, 10, 50, 30, 'F')

// ç»˜åˆ¶åœ†å½¢
doc.circle(35, 70, 20)

// ç»˜åˆ¶çº¿æ¡
doc.line(10, 110, 100, 110)

// è®¾ç½®çº¿æ¡ç²—ç»†å’Œé¢œè‰²
doc.setLineWidth(2)
doc.setDrawColor(255, 0, 0)
doc.line(10, 120, 100, 120)

doc.save('shapes.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ å›¾å½¢é¢„è§ˆ:</h4>
              <div class="preview-box">
                <svg width="200" height="150" style="border: 1px solid #e2e8f0">
                  <rect x="10" y="10" width="50" height="30" fill="none" stroke="black" />
                  <rect x="70" y="10" width="50" height="30" fill="#667eea" />
                  <circle cx="35" cy="70" r="20" fill="none" stroke="black" />
                  <line x1="10" y1="110" x2="100" y2="110" stroke="black" />
                  <line x1="10" y1="120" x2="100" y2="120" stroke="red" stroke-width="2" />
                </svg>
                <p class="note">PDFä¸­å°†åŒ…å«è¿™äº›å›¾å½¢</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹4: å¤šé¡µæ–‡æ¡£ -->
          <div v-else-if="currentExample === 3">
            <h3>ç¤ºä¾‹ 4: åˆ›å»ºå¤šé¡µPDFæ–‡æ¡£</h3>
            <p>ä½¿ç”¨addPage()æ–¹æ³•åˆ›å»ºå¤šé¡µPDFæ–‡æ¡£ï¼Œé€‚åˆé•¿å†…å®¹åˆ†é¡µã€‚</p>

            <div class="controls">
              <button @click="example4Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“‘ ç”Ÿæˆå¤šé¡µPDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>const doc = new jsPDF()

// ç¬¬ä¸€é¡µ
doc.setFontSize(20)
doc.text('ç¬¬ä¸€é¡µ', 10, 20)
doc.setFontSize(12)
doc.text('è¿™æ˜¯ç¬¬ä¸€é¡µçš„å†…å®¹', 10, 40)

// æ·»åŠ æ–°é¡µé¢
doc.addPage()

// ç¬¬äºŒé¡µ
doc.setFontSize(20)
doc.text('ç¬¬äºŒé¡µ', 10, 20)
doc.setFontSize(12)
doc.text('è¿™æ˜¯ç¬¬äºŒé¡µçš„å†…å®¹', 10, 40)

// æ·»åŠ ç¬¬ä¸‰é¡µ
doc.addPage()
doc.text('ç¬¬ä¸‰é¡µ', 10, 20)

doc.save('multi-page.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ é¡µé¢é¢„è§ˆ:</h4>
              <div class="preview-box">
                <div class="page-preview"><strong>ç¬¬1é¡µ:</strong> å°é¢å’Œä»‹ç»</div>
                <div class="page-preview"><strong>ç¬¬2é¡µ:</strong> ä¸»è¦å†…å®¹</div>
                <div class="page-preview"><strong>ç¬¬3é¡µ:</strong> æ€»ç»“</div>
                <p class="note">ç”Ÿæˆçš„PDFå°†åŒ…å«3é¡µå†…å®¹</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹5: é¡µé¢é…ç½® -->
          <div v-else-if="currentExample === 4">
            <h3>ç¤ºä¾‹ 5: è‡ªå®šä¹‰é¡µé¢é…ç½®</h3>
            <p>é…ç½®é¡µé¢æ–¹å‘ã€å°ºå¯¸ã€å•ä½ç­‰å‚æ•°ï¼Œåˆ›å»ºç¬¦åˆéœ€æ±‚çš„PDFã€‚</p>

            <div class="controls">
              <label>
                é¡µé¢æ–¹å‘:
                <select v-model="pageOrientation" class="select-input">
                  <option value="portrait">çºµå‘</option>
                  <option value="landscape">æ¨ªå‘</option>
                </select>
              </label>
              <button @click="example5Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“ ç”Ÿæˆè‡ªå®šä¹‰PDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>// çºµå‘A4
const doc = new jsPDF('portrait', 'mm', 'a4')

// æ¨ªå‘A4
const doc = new jsPDF('landscape', 'mm', 'a4')

// å®Œæ•´é…ç½®
const doc = new jsPDF({
  orientation: '{{ pageOrientation }}',
  unit: 'mm',
  format: 'a4'
})

doc.text('è‡ªå®šä¹‰é¡µé¢é…ç½®', 10, 10)
doc.save('custom.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ é…ç½®è¯´æ˜:</h4>
              <div class="preview-box">
                <p>
                  <strong>å½“å‰æ–¹å‘:</strong> {{ pageOrientation === 'portrait' ? 'çºµå‘' : 'æ¨ªå‘' }}
                </p>
                <p><strong>é¡µé¢æ ¼å¼:</strong> A4 (210mm Ã— 297mm)</p>
                <p><strong>å•ä½:</strong> æ¯«ç±³ (mm)</p>
                <p class="note">å¯é€‰æ ¼å¼: a4, a3, letter, legalç­‰</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹6: åµŒå…¥å›¾ç‰‡ -->
          <div v-else-if="currentExample === 5">
            <h3>ç¤ºä¾‹ 6: åœ¨PDFä¸­åµŒå…¥å›¾ç‰‡</h3>
            <p>ä½¿ç”¨addImageæ–¹æ³•å°†å›¾ç‰‡åµŒå…¥åˆ°PDFæ–‡æ¡£ä¸­ã€‚</p>

            <div class="controls">
              <button @click="example6Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ–¼ï¸ ç”Ÿæˆå›¾ç‰‡PDF' }}
              </button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>const doc = new jsPDF()

// å›¾ç‰‡æ•°æ®ï¼ˆbase64æˆ–DataURLï¼‰
const imgData = 'data:image/png;base64,...'

// æ·»åŠ å›¾ç‰‡
// addImage(imageData, format, x, y, width, height)
doc.addImage(imgData, 'PNG', 10, 10, 100, 80)

doc.text('PDFä¸­çš„å›¾ç‰‡ç¤ºä¾‹', 10, 100)

doc.save('image.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“‹ å›¾ç‰‡é¢„è§ˆ:</h4>
              <div class="preview-box">
                <img
                  :src="sampleImage"
                  alt="ç¤ºä¾‹å›¾ç‰‡"
                  style="max-width: 200px; border: 1px solid #e2e8f0; border-radius: 4px"
                />
                <p class="note">æ­¤å›¾ç‰‡å°†è¢«åµŒå…¥åˆ°PDFä¸­</p>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹7: EChartså›¾è¡¨è½¬PDF -->
          <div v-else-if="currentExample === 6">
            <h3>ç¤ºä¾‹ 7: EChartså›¾è¡¨è½¬PDF</h3>
            <p>
              <strong>âœ¨ jsPDFä¼˜åŠ¿ä½“ç°ï¼š</strong
              >å°†EChartsæ¸²æŸ“ä¸ºå›¾ç‰‡åï¼Œåˆ©ç”¨jsPDFçš„<strong>ç²¾ç¡®åæ ‡æ§åˆ¶</strong>å’Œ<strong>é«˜è´¨é‡å›¾ç‰‡åµŒå…¥</strong>èƒ½åŠ›ï¼Œå®ç°å®Œç¾çš„å›¾è¡¨å¸ƒå±€ã€‚
            </p>

            <div class="controls">
              <button @click="example7Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“Š ç”Ÿæˆå›¾è¡¨PDF' }}
              </button>
            </div>

            <div class="info-box" style="background: #f0f7ff; border-left: 4px solid #667eea">
              <h4 style="color: #667eea; margin-top: 0">ğŸ’¡ jsPDFå¤„ç†å›¾è¡¨çš„ç‹¬ç‰¹ä¼˜åŠ¿</h4>
              <ul style="margin: 10px 0; line-height: 1.8">
                <li>
                  <strong>åƒç´ çº§ç²¾ç¡®å®šä½ï¼š</strong>é€šè¿‡xã€yåæ ‡ç²¾ç¡®æ§åˆ¶æ¯ä¸ªå›¾è¡¨çš„ä½ç½®ï¼Œé¿å…å¸ƒå±€é”™ä¹±
                </li>
                <li><strong>é«˜è´¨é‡å›¾ç‰‡è¾“å‡ºï¼š</strong>æ”¯æŒé«˜DPIè®¾ç½®ï¼Œå›¾è¡¨æ¸…æ™°åº¦è¿œè¶…HTMLæ¸²æŸ“</li>
                <li>
                  <strong>çµæ´»çš„å°ºå¯¸æ§åˆ¶ï¼š</strong
                  >å¯ä»¥ç²¾ç¡®æŒ‡å®šæ¯ä¸ªå›¾è¡¨çš„å®½é«˜ï¼Œè½»æ¾å®ç°å¤æ‚çš„æ··åˆå¸ƒå±€
                </li>
                <li>
                  <strong>åˆ†é¡µå¯æ§ï¼š</strong>å¯ä»¥è®¡ç®—å†…å®¹é«˜åº¦ï¼Œåœ¨éœ€è¦çš„ä½ç½®ç²¾ç¡®æ¢é¡µï¼Œä¸ä¼šæˆªæ–­å›¾è¡¨
                </li>
              </ul>
              <p style="margin: 10px 0; color: #4a5568">
                <strong>å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆï¼š</strong>
              </p>
              <ul style="margin: 0; line-height: 1.8; color: #718096">
                <li>html2pdfï¼šä¾èµ–æµè§ˆå™¨æ¸²æŸ“ï¼Œå›¾è¡¨è´¨é‡ä¸ç¨³å®šï¼Œåˆ†é¡µä½ç½®éš¾æ§åˆ¶</li>
                <li>Print.jsï¼šåªèƒ½æ‰“å°ä¸èƒ½å¯¼å‡ºPDFï¼Œä¸”æ— æ³•ç²¾ç¡®æ§åˆ¶å›¾è¡¨ä½ç½®</li>
              </ul>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>import * as echarts from 'echarts'
import { jsPDF } from 'jspdf'

// 1. åˆå§‹åŒ–EChartså®ä¾‹
const chartDom = document.getElementById('myChart')
const myChart = echarts.init(chartDom)

// 2. é…ç½®å›¾è¡¨
myChart.setOption({
  title: { text: 'æœˆåº¦é”€å”®æ•°æ®' },
  xAxis: { data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'] },
  yAxis: {},
  series: [{
    type: 'bar',
    data: [120, 200, 150, 80, 70, 110]
  }]
})

// 3. å°†EChartsè½¬ä¸ºå›¾ç‰‡ï¼ˆé«˜è´¨é‡ï¼‰
const chartImage = myChart.getDataURL({
  type: 'png',
  pixelRatio: 2, // é«˜æ¸…è¾“å‡º
  backgroundColor: '#fff'
})

// 4. jsPDFç²¾ç¡®æ§åˆ¶å›¾è¡¨ä½ç½®å’Œå°ºå¯¸
const doc = new jsPDF()
doc.setFontSize(18)
doc.text('é”€å”®æ•°æ®åˆ†ææŠ¥å‘Š', 105, 20, { align: 'center' })

// ç²¾ç¡®å®šä½ï¼šx=15, y=30, å®½åº¦=180, é«˜åº¦=100
doc.addImage(chartImage, 'PNG', 15, 30, 180, 100)

// å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šå†…å®¹ï¼Œç²¾ç¡®æ§åˆ¶ä½ç½®
doc.setFontSize(12)
doc.text('å›¾è¡¨è¯´æ˜ï¼šä¸ŠåŠå¹´é”€å”®è¶‹åŠ¿', 15, 140)

doc.save('chart-report.pdf')</code></pre>
            </div>

            <div class="demo-content">
              <h4>ğŸ“Š å®æ—¶å›¾è¡¨é¢„è§ˆ:</h4>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0">
                <!-- é¥¼å›¾ -->
                <div>
                  <div
                    ref="pieChartRef"
                    style="
                      width: 100%;
                      height: 250px;
                      border: 1px solid #e2e8f0;
                      border-radius: 8px;
                    "
                  ></div>
                  <p style="text-align: center; color: #718096; margin-top: 8px">é”€å”®å æ¯”åˆ†æ</p>
                </div>

                <!-- æŠ˜çº¿å›¾ -->
                <div>
                  <div
                    ref="lineChartRef"
                    style="
                      width: 100%;
                      height: 250px;
                      border: 1px solid #e2e8f0;
                      border-radius: 8px;
                    "
                  ></div>
                  <p style="text-align: center; color: #718096; margin-top: 8px">æœˆåº¦é”€å”®è¶‹åŠ¿</p>
                </div>

                <!-- æŸ±çŠ¶å›¾ -->
                <div>
                  <div
                    ref="barChartRef"
                    style="
                      width: 100%;
                      height: 250px;
                      border: 1px solid #e2e8f0;
                      border-radius: 8px;
                    "
                  ></div>
                  <p style="text-align: center; color: #718096; margin-top: 8px">äº§å“é”€é‡å¯¹æ¯”</p>
                </div>

                <!-- é›·è¾¾å›¾ -->
                <div>
                  <div
                    ref="radarChartRef"
                    style="
                      width: 100%;
                      height: 250px;
                      border: 1px solid #e2e8f0;
                      border-radius: 8px;
                    "
                  ></div>
                  <p style="text-align: center; color: #718096; margin-top: 8px">ç»¼åˆèƒ½åŠ›è¯„ä¼°</p>
                </div>
              </div>
              <p class="note">
                ç‚¹å‡»æŒ‰é’®å°†ç”ŸæˆåŒ…å«è¿™4ä¸ªå›¾è¡¨çš„PDFæ–‡æ¡£ï¼Œæ¯ä¸ªå›¾è¡¨éƒ½ç»è¿‡ç²¾ç¡®å®šä½å’Œå°ºå¯¸æ§åˆ¶
              </p>
            </div>
          </div>

          <!-- ç¤ºä¾‹8: å¯¹æ¯”æµ‹è¯•ï¼ˆä¸VuePrintNbç›¸åŒçš„å›¾è¡¨ï¼‰ -->
          <div v-else-if="currentExample === 7">
            <h3>ç¤ºä¾‹ 8: ğŸ” å¯¹æ¯”æµ‹è¯• - ä¸VuePrintNbç›¸åŒé…ç½®</h3>
            <p style="color: #3182ce; font-weight: 500">
              <strong>ğŸ“Š æµ‹è¯•ç›®çš„ï¼š</strong
              >ä½¿ç”¨ä¸VuePrintNbç¤ºä¾‹8å®Œå…¨ç›¸åŒçš„EChartsé…ç½®ï¼Œå¯¹æ¯”jsPDFçš„è¾“å‡ºæ•ˆæœã€‚
            </p>

            <div class="controls">
              <button @click="example8Generate" class="btn btn-primary" :disabled="loading">
                {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“„ ç”Ÿæˆå¯¹æ¯”PDF' }}
              </button>
            </div>

            <div class="info-box" style="background: #edf2f7; border-left: 4px solid #3182ce">
              <h4 style="color: #3182ce; margin-top: 0">ğŸ” å¯¹æ¯”è¯´æ˜</h4>
              <p style="margin: 10px 0; line-height: 1.8">
                æ­¤ç¤ºä¾‹ä½¿ç”¨ä¸ <strong>VuePrintNb ç¤ºä¾‹8</strong> å®Œå…¨ç›¸åŒçš„EChartsé…ç½®ï¼š
              </p>
              <ul style="margin: 10px 0; line-height: 1.8">
                <li><strong>ç›¸åŒçš„gridé…ç½®ï¼š</strong>left: '8%', right: '8%'</li>
                <li><strong>ç›¸åŒçš„æ•°æ®ï¼š</strong>[120, 200, 150, 80, 170, 210]</li>
                <li><strong>ç›¸åŒçš„æ ·å¼ï¼š</strong>æŠ˜çº¿å›¾ + é¢ç§¯å¡«å……</li>
              </ul>
              <p style="margin: 10px 0; color: #4a5568">
                <strong>é¢„æœŸå¯¹æ¯”ç»“æœï¼š</strong>
              </p>
              <ul style="margin: 0; line-height: 1.8; color: #718096">
                <li>âœ… jsPDF: ç²¾ç¡®åæ ‡å®šä½ï¼Œå›¾è¡¨å®Œæ•´æ˜¾ç¤ºï¼Œä¸å—é¡µé¢è¾¹è·å½±å“</li>
                <li>âš ï¸ VuePrintNb: å—æµè§ˆå™¨æ‰“å°å¼•æ“é™åˆ¶ï¼Œå¯èƒ½å‡ºç°å³ä¾§è£å‰ª</li>
              </ul>
            </div>

            <div class="demo-content">
              <h4>ğŸ“Š å®æ—¶å›¾è¡¨é¢„è§ˆ:</h4>
              <div style="max-width: 600px; margin: 0 auto">
                <div
                  ref="compareChartRef"
                  style="
                    width: 100%;
                    height: 280px;
                    border: 1px solid #e2e8f0;
                    border-radius: 8px;
                    background: white;
                    padding: 0;
                  "
                ></div>
                <p style="text-align: center; color: #718096; margin-top: 8px">
                  æœˆåº¦é”€å”®è¶‹åŠ¿ï¼ˆä¸VuePrintNbç›¸åŒé…ç½®ï¼‰
                </p>
              </div>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>// ä¸VuePrintNbå®Œå…¨ç›¸åŒçš„EChartsé…ç½®
const option = {
  title: {
    text: 'æœˆåº¦é”€å”®è¶‹åŠ¿',
    left: 'center',
    textStyle: { fontSize: 16, fontWeight: 'bold' }
  },
  tooltip: { trigger: 'axis' },
  grid: {
    left: '8%',   // ä¸VuePrintNbç›¸åŒ
    right: '8%',  // ä¸VuePrintNbç›¸åŒ
    bottom: '18%',
    top: '22%'
  },
  xAxis: {
    type: 'category',
    data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
    axisLabel: { fontSize: 13 }
  },
  yAxis: {
    type: 'value',
    name: 'é”€å”®é¢(ä¸‡)',
    axisLabel: { fontSize: 13 }
  },
  series: [{
    data: [120, 200, 150, 80, 170, 210],
    type: 'line',
    smooth: true,
    itemStyle: { color: '#667eea' },
    areaStyle: { color: 'rgba(102, 126, 234, 0.2)' },
    lineStyle: { width: 3 },
    symbol: 'circle',
    symbolSize: 8
  }]
}

// jsPDFè¾“å‡ºï¼ˆé«˜è´¨é‡PNGï¼Œç²¾ç¡®å®šä½ï¼‰
const chartImage = myChart.getDataURL({
  type: 'png',
  pixelRatio: 3,  // é«˜æ¸…è¾“å‡º
  backgroundColor: '#fff'
})
const doc = new jsPDF()
doc.addImage(chartImage, 'PNG', 15, 30, 180, 100)
doc.save('compare.pdf')</code></pre>
            </div>
          </div>
        </div>

        <!-- é«˜çº§åŠŸèƒ½æ¼”ç¤º -->
        <div class="advanced-section">
          <h2 class="section-title">ğŸš€ é«˜çº§åŠŸèƒ½æ¼”ç¤º</h2>

          <div class="example-tabs">
            <button
              v-for="(example, index) in advancedExamples"
              :key="index"
              :class="['tab-button', { active: currentAdvanced === index }]"
              @click="currentAdvanced = index"
            >
              {{ example }}
            </button>
          </div>

          <div class="example-content">
            <!-- é«˜çº§1: è¡¨æ ¼ç”Ÿæˆ (autoTable) -->
            <div v-if="currentAdvanced === 0">
              <h3>é«˜çº§ 1: è¡¨æ ¼ç”Ÿæˆ (autoTableæ’ä»¶)</h3>
              <p>ä½¿ç”¨jsPDF-autoTableæ’ä»¶å¿«é€Ÿç”Ÿæˆä¸“ä¸šçš„è¡¨æ ¼ï¼Œæ”¯æŒè‡ªåŠ¨åˆ†é¡µå’Œæ ·å¼å®šåˆ¶ã€‚</p>

              <div class="controls">
                <button @click="advanced1Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“Š ç”Ÿæˆè¡¨æ ¼PDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>import 'jspdf-autotable'

const doc = new jsPDF()

doc.autoTable({
  head: [['å§“å', 'éƒ¨é—¨', 'èŒä½', 'å·¥èµ„']],
  body: [
    ['å¼ ä¸‰', 'æŠ€æœ¯éƒ¨', 'å·¥ç¨‹å¸ˆ', 'Â¥15,000'],
    ['æå››', 'äº§å“éƒ¨', 'äº§å“ç»ç†', 'Â¥18,000'],
    // ... æ›´å¤šæ•°æ®
  ],
  startY: 20,
  theme: 'grid',
  headStyles: {
    fillColor: [102, 126, 234],
    textColor: 255,
    fontStyle: 'bold'
  },
  styles: {
    font: 'helvetica',
    fontSize: 10
  }
})

doc.save('table.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ è¡¨æ ¼æ•°æ®é¢„è§ˆ:</h4>
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>å§“å</th>
                      <th>éƒ¨é—¨</th>
                      <th>èŒä½</th>
                      <th>å·¥èµ„</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="i in 5" :key="i">
                      <td>å‘˜å·¥{{ i }}</td>
                      <td>{{ ['æŠ€æœ¯éƒ¨', 'äº§å“éƒ¨', 'è®¾è®¡éƒ¨', 'è¿è¥éƒ¨', 'å¸‚åœºéƒ¨'][i - 1] }}</td>
                      <td>{{ ['å·¥ç¨‹å¸ˆ', 'äº§å“ç»ç†', 'è®¾è®¡å¸ˆ', 'è¿è¥ä¸“å‘˜', 'å¸‚åœºä¸“å‘˜'][i - 1] }}</td>
                      <td>Â¥{{ 12000 + i * 1000 }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- é«˜çº§2: è‡ªåŠ¨åˆ†é¡µ -->
            <div v-else-if="currentAdvanced === 1">
              <h3>é«˜çº§ 2: è‡ªåŠ¨åˆ†é¡µå¤„ç†</h3>
              <p>å½“å†…å®¹è¶…è¿‡ä¸€é¡µæ—¶ï¼Œè‡ªåŠ¨æ·»åŠ æ–°é¡µé¢å¹¶ç»§ç»­æ¸²æŸ“å†…å®¹ã€‚</p>

              <div class="controls">
                <label>
                  ç”Ÿæˆè¡Œæ•°:
                  <input
                    v-model.number="autoPageLines"
                    type="number"
                    min="10"
                    max="200"
                    class="number-input"
                  />
                </label>
                <button @click="advanced2Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“‘ ç”Ÿæˆè‡ªåŠ¨åˆ†é¡µPDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const doc = new jsPDF()
const pageHeight = doc.internal.pageSize.height
let yPosition = 20

for (let i = 0; i &lt; totalLines; i++) {
  // æ£€æŸ¥æ˜¯å¦éœ€è¦æ¢é¡µ
  if (yPosition &gt; pageHeight - 20) {
    doc.addPage()
    yPosition = 20
  }

  doc.text(`ç¬¬ ${i + 1} è¡Œå†…å®¹`, 10, yPosition)
  yPosition += 10
}

doc.save('auto-page.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p><strong>å½“å‰è®¾ç½®:</strong> ç”Ÿæˆ {{ autoPageLines }} è¡Œå†…å®¹</p>
                  <p><strong>é¢„è®¡é¡µæ•°:</strong> çº¦ {{ Math.ceil(autoPageLines / 25) }} é¡µ</p>
                  <p class="note">å†…å®¹è¶…å‡ºå½“å‰é¡µé¢é«˜åº¦æ—¶å°†è‡ªåŠ¨æ·»åŠ æ–°é¡µ</p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§3: æ·»åŠ é¡µçœ‰é¡µè„š -->
            <div v-else-if="currentAdvanced === 2">
              <h3>é«˜çº§ 3: é¡µçœ‰å’Œé¡µè„š</h3>
              <p>ä¸ºæ¯ä¸€é¡µæ·»åŠ é¡µçœ‰ã€é¡µè„šå’Œé¡µç ï¼Œå¢å¼ºæ–‡æ¡£ä¸“ä¸šæ€§ã€‚</p>

              <div class="controls">
                <button @click="advanced3Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“„ ç”Ÿæˆå¸¦é¡µçœ‰é¡µè„šPDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const doc = new jsPDF()
const pageCount = 3

for (let i = 1; i &lt;= pageCount; i++) {
  if (i &gt; 1) doc.addPage()

  // é¡µçœ‰
  doc.setFontSize(10)
  doc.setTextColor(100)
  doc.text('å…¬å¸æœºå¯†æ–‡ä»¶', 105, 10, { align: 'center' })
  doc.line(10, 12, 200, 12)

  // å†…å®¹
  doc.setFontSize(14)
  doc.setTextColor(0)
  doc.text(`ç¬¬ ${i} é¡µå†…å®¹`, 10, 30)

  // é¡µè„š
  doc.setFontSize(10)
  doc.setTextColor(100)
  doc.line(10, 285, 200, 285)
  doc.text(`ç¬¬ ${i}/${pageCount} é¡µ`, 105, 290, { align: 'center' })
}

doc.save('header-footer.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <div style="border: 1px solid #e2e8f0; padding: 1rem; margin: 0.5rem 0">
                    <p
                      style="
                        text-align: center;
                        color: #718096;
                        font-size: 0.9rem;
                        border-bottom: 1px solid #e2e8f0;
                        padding-bottom: 0.5rem;
                      "
                    >
                      å…¬å¸æœºå¯†æ–‡ä»¶
                    </p>
                    <p style="margin: 1rem 0"><strong>é¡µé¢å†…å®¹åŒºåŸŸ</strong></p>
                    <p
                      style="
                        text-align: center;
                        color: #718096;
                        font-size: 0.9rem;
                        border-top: 1px solid #e2e8f0;
                        padding-top: 0.5rem;
                      "
                    >
                      ç¬¬ 1/3 é¡µ
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- é«˜çº§4: æ–‡æœ¬æ¢è¡Œå’Œå¯¹é½ -->
            <div v-else-if="currentAdvanced === 3">
              <h3>é«˜çº§ 4: æ–‡æœ¬æ¢è¡Œå’Œå¯¹é½</h3>
              <p>ä½¿ç”¨splitTextToSizeå®ç°æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œï¼Œæ”¯æŒå¤šç§å¯¹é½æ–¹å¼ã€‚</p>

              <div class="controls">
                <button @click="advanced4Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“ ç”Ÿæˆæ–‡æœ¬æ¢è¡ŒPDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>const doc = new jsPDF()
const longText = 'è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬...'

// è‡ªåŠ¨æ¢è¡Œ
const maxWidth = 180
const lines = doc.splitTextToSize(longText, maxWidth)
doc.text(lines, 10, 20)

// å·¦å¯¹é½
doc.text('å·¦å¯¹é½æ–‡æœ¬', 10, 60)

// å±…ä¸­å¯¹é½
doc.text('å±…ä¸­å¯¹é½æ–‡æœ¬', 105, 80, { align: 'center' })

// å³å¯¹é½
doc.text('å³å¯¹é½æ–‡æœ¬', 200, 100, { align: 'right' })

doc.save('text-align.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p style="text-align: left">â† å·¦å¯¹é½æ–‡æœ¬</p>
                  <p style="text-align: center">å±…ä¸­å¯¹é½æ–‡æœ¬</p>
                  <p style="text-align: right">å³å¯¹é½æ–‡æœ¬ â†’</p>
                  <p style="margin-top: 1rem; border-top: 1px solid #e2e8f0; padding-top: 1rem">
                    è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬ï¼Œå½“æ–‡æœ¬è¶…è¿‡æŒ‡å®šå®½åº¦æ—¶ï¼ŒjsPDFçš„splitTextToSizeæ–¹æ³•ä¼šè‡ªåŠ¨å°†å…¶åˆ†å‰²æˆå¤šè¡Œï¼Œç¡®ä¿å†…å®¹ä¸ä¼šè¶…å‡ºé¡µé¢è¾¹ç•Œã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºå¤„ç†åŠ¨æ€å†…å®¹éå¸¸æœ‰ç”¨ã€‚
                  </p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§5: é“¾æ¥å’Œä¹¦ç­¾ -->
            <div v-else-if="currentAdvanced === 4">
              <h3>é«˜çº§ 5: æ·»åŠ é“¾æ¥å’Œä¹¦ç­¾</h3>
              <p>åœ¨PDFä¸­æ·»åŠ å¯ç‚¹å‡»çš„è¶…é“¾æ¥å’Œå†…éƒ¨è·³è½¬é“¾æ¥ã€‚</p>

              <div class="controls">
                <button @click="advanced5Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ”— ç”Ÿæˆå¸¦é“¾æ¥PDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>const doc = new jsPDF()

// æ·»åŠ å¤–éƒ¨é“¾æ¥
doc.text('è®¿é—® jsPDF å®˜ç½‘', 10, 20)
doc.link(10, 15, 50, 10, { url: 'https://github.com/parallax/jsPDF' })

// æ·»åŠ å†…éƒ¨é“¾æ¥
doc.text('ç‚¹å‡»è·³è½¬åˆ°ç¬¬äºŒé¡µ', 10, 40)
doc.link(10, 35, 60, 10, { pageNumber: 2 })

// ç¬¬äºŒé¡µ
doc.addPage()
doc.text('è¿™æ˜¯ç¬¬äºŒé¡µ', 10, 20)

doc.save('links.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p>
                    <a href="#" style="color: #667eea; text-decoration: underline"
                      >è®¿é—® jsPDF å®˜ç½‘</a
                    >
                    (å¤–éƒ¨é“¾æ¥)
                  </p>
                  <p>
                    <a href="#" style="color: #667eea; text-decoration: underline"
                      >ç‚¹å‡»è·³è½¬åˆ°ç¬¬äºŒé¡µ</a
                    >
                    (å†…éƒ¨é“¾æ¥)
                  </p>
                  <p class="note">PDFä¸­çš„é“¾æ¥åŒºåŸŸå¯ä»¥ç‚¹å‡»è·³è½¬</p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§6: æ°´å°å’ŒèƒŒæ™¯ -->
            <div v-else-if="currentAdvanced === 5">
              <h3>é«˜çº§ 6: æ·»åŠ æ°´å°å’ŒèƒŒæ™¯</h3>
              <p>ä¸ºPDFæ·»åŠ åŠé€æ˜æ°´å°æˆ–èƒŒæ™¯å›¾ç‰‡ï¼Œå¢å¼ºæ–‡æ¡£å®‰å…¨æ€§ã€‚</p>

              <div class="controls">
                <button @click="advanced6Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ’§ ç”Ÿæˆå¸¦æ°´å°PDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>const doc = new jsPDF()

// è®¾ç½®é€æ˜åº¦
doc.setGState(new doc.GState({ opacity: 0.2 }))

// æ·»åŠ æ—‹è½¬çš„æ°´å°æ–‡å­—
doc.setFontSize(60)
doc.setTextColor(200, 200, 200)
doc.text('æœºå¯†æ–‡ä»¶', 105, 150, {
  align: 'center',
  angle: 45
})

// æ¢å¤æ­£å¸¸é€æ˜åº¦
doc.setGState(new doc.GState({ opacity: 1 }))

// æ·»åŠ æ­£å¸¸å†…å®¹
doc.setFontSize(14)
doc.setTextColor(0, 0, 0)
doc.text('è¿™æ˜¯å¸¦æ°´å°çš„æ–‡æ¡£å†…å®¹', 10, 20)

doc.save('watermark.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box" style="position: relative">
                  <div
                    style="
                      position: absolute;
                      top: 50%;
                      left: 50%;
                      transform: translate(-50%, -50%) rotate(45deg);
                      font-size: 3rem;
                      color: rgba(200, 200, 200, 0.3);
                      pointer-events: none;
                    "
                  >
                    æœºå¯†æ–‡ä»¶
                  </div>
                  <p><strong>è¿™æ˜¯å¸¦æ°´å°çš„æ–‡æ¡£å†…å®¹</strong></p>
                  <p>æ°´å°ä»¥åŠé€æ˜å½¢å¼æ˜¾ç¤ºåœ¨èƒŒæ™¯ä¸­</p>
                  <p class="note">æ°´å°ä¸ä¼šå½±å“æ­£å¸¸å†…å®¹çš„é˜…è¯»</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ä¿ç•™åŸæœ‰æ–‡æ¡£ -->
        <div class="divider"></div>

        <div class="controls">
          <button @click="generateBasicPDF" class="btn btn-primary" :disabled="loading">
            {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“„ ç”ŸæˆåŸºç¡€PDF' }}
          </button>
          <button @click="generateTablePDF" class="btn btn-secondary" :disabled="loading">
            {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“Š ç”Ÿæˆè¡¨æ ¼PDF' }}
          </button>
          <button @click="generateMultiPagePDF" class="btn btn-info" :disabled="loading">
            {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“‘ ç”Ÿæˆå¤šé¡µPDF' }}
          </button>
          <button @click="generateAdvancedPDF" class="btn btn-warning" :disabled="loading">
            {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ¨ é«˜çº§PDFç¤ºä¾‹' }}
          </button>
        </div>

        <div
          v-if="statusMessage"
          class="status-message"
          :class="{ error: statusMessage.includes('âŒ') }"
        >
          {{ statusMessage }}
        </div>

        <div class="preview-area">
          <h3>ğŸ“‹ PDFé¢„è§ˆåŒºåŸŸ</h3>
          <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆå¹¶é¢„è§ˆPDFæ–‡æ¡£</p>
          <div id="pdf-preview" class="pdf-canvas"></div>
        </div>

        <div class="code-examples">
          <h3>ğŸ’» ä»£ç ç¤ºä¾‹</h3>

          <div class="code-block">
            <h4>1. å®‰è£…å’Œå¯¼å…¥</h4>
            <pre><code>npm install jspdf

import { jsPDF } from 'jspdf';</code></pre>
          </div>

          <div class="code-block">
            <h4>2. åŸºç¡€PDFç”Ÿæˆ</h4>
            <pre><code>const doc = new jsPDF();

// æ·»åŠ æ–‡æœ¬
doc.text('Hello World!', 10, 10);

// ä¿å­˜PDF
doc.save('document.pdf');

// æˆ–åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
window.open(doc.output('bloburl'));</code></pre>
          </div>

          <div class="code-block">
            <h4>3. å¤šé¡µæ–‡æ¡£</h4>
            <pre><code>const doc = new jsPDF();

// ç¬¬ä¸€é¡µ
doc.text('ç¬¬ä¸€é¡µå†…å®¹', 10, 10);

// æ·»åŠ æ–°é¡µ
doc.addPage();

// ç¬¬äºŒé¡µ
doc.text('ç¬¬äºŒé¡µå†…å®¹', 10, 10);

doc.save('multi-page.pdf');</code></pre>
          </div>

          <div class="code-block">
            <h4>4. ç»˜åˆ¶å›¾å½¢</h4>
            <pre><code>const doc = new jsPDF();

// çŸ©å½¢
doc.rect(10, 10, 50, 50);

// åœ†å½¢
doc.circle(100, 35, 25);

// çº¿æ¡
doc.line(10, 80, 100, 80);

// å¡«å……çŸ©å½¢
doc.setFillColor(102, 126, 234);
doc.rect(10, 100, 50, 30, 'F');

doc.save('shapes.pdf');</code></pre>
          </div>

          <div class="code-block">
            <h4>5. è¡¨æ ¼ç”Ÿæˆ (ä½¿ç”¨æ’ä»¶)</h4>
            <pre><code>import { jsPDF } from 'jspdf';
import 'jspdf-autotable';

const doc = new jsPDF();

doc.autoTable({
  head: [['å§“å', 'å¹´é¾„', 'åŸå¸‚']],
  body: [
    ['å¼ ä¸‰', 28, 'åŒ—äº¬'],
    ['æå››', 32, 'ä¸Šæµ·'],
    ['ç‹äº”', 25, 'å¹¿å·']
  ],
  startY: 20,
  theme: 'grid',
  styles: { fontSize: 10 }
});

doc.save('table.pdf');</code></pre>
          </div>

          <div class="code-block">
            <h4>6. æ·»åŠ å›¾ç‰‡</h4>
            <pre><code>const doc = new jsPDF();

// æ·»åŠ å›¾ç‰‡ (éœ€è¦base64æˆ–dataURL)
const imgData = 'data:image/jpeg;base64,...';
doc.addImage(imgData, 'JPEG', 10, 10, 100, 100);

doc.save('image.pdf');</code></pre>
          </div>

          <div class="code-block">
            <h4>7. è‡ªå®šä¹‰é¡µé¢å¤§å°å’Œæ–¹å‘</h4>
            <pre><code>// A4 æ¨ªå‘
const doc = new jsPDF('landscape', 'mm', 'a4');

// è‡ªå®šä¹‰å°ºå¯¸
const doc = new jsPDF({
  orientation: 'portrait',
  unit: 'mm',
  format: [210, 297] // A4
});

// å¸¸ç”¨æ ¼å¼: a4, a3, letter</code></pre>
          </div>

          <div class="code-block">
            <h4>8. åˆ†é¡µæ§åˆ¶</h4>
            <pre><code>const doc = new jsPDF();
const pageHeight = doc.internal.pageSize.height;
let yPosition = 20;

for (let i = 0; i &lt; 100; i++) {
  if (yPosition &gt; pageHeight - 20) {
    doc.addPage();
    yPosition = 20;
  }

  doc.text(\`ç¬¬ \${i + 1} è¡Œ\`, 10, yPosition);
  yPosition += 10;
}

doc.save('paginated.pdf');</code></pre>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch, nextTick } from 'vue'
import { jsPDF } from 'jspdf'
import { createChineseJsPDF } from '@/utils/fontLoader'
import * as echarts from 'echarts'
import type { ECharts } from 'echarts'

const loading = ref(false)
const statusMessage = ref('')
const currentExample = ref(0)
const currentDate = ref(new Date().toLocaleDateString('zh-CN'))
const pageOrientation = ref<'portrait' | 'landscape'>('portrait')

// ECharts refs
const pieChartRef = ref<HTMLDivElement>()
const lineChartRef = ref<HTMLDivElement>()
const barChartRef = ref<HTMLDivElement>()
const radarChartRef = ref<HTMLDivElement>()
const compareChartRef = ref<HTMLDivElement>()

let pieChart: ECharts | null = null
let lineChart: ECharts | null = null
let barChart: ECharts | null = null
let radarChart: ECharts | null = null
let compareChart: ECharts | null = null

// ç¤ºä¾‹æ ‡ç­¾
const examples = [
  'åŸºç¡€PDF',
  'æ–‡æœ¬æ ·å¼',
  'ç»˜åˆ¶å›¾å½¢',
  'å¤šé¡µæ–‡æ¡£',
  'é¡µé¢é…ç½®',
  'åµŒå…¥å›¾ç‰‡',
  'EChartså›¾è¡¨',
  'å¯¹æ¯”æµ‹è¯•',
]

// å°†PDF Blobåœ¨æ–°çª—å£/iframeä¸­æ‰“å¼€å¹¶è§¦å‘æ‰“å°ï¼ˆå¤ç”¨pdfmakeé¡µé¢çš„å®ç°æ€è·¯ï¼‰
const openBlobInPrintWindow = async (blob: Blob) => {
  const url = URL.createObjectURL(blob)
  const iframe = document.createElement('iframe')
  iframe.style.position = 'fixed'
  iframe.style.right = '0'
  iframe.style.bottom = '0'
  iframe.style.width = '0'
  iframe.style.height = '0'
  iframe.style.border = '0'
  iframe.src = url
  document.body.appendChild(iframe)

  await new Promise<void>((resolve) => {
    iframe.onload = () => {
      setTimeout(() => {
        try {
          iframe.contentWindow?.focus()
          iframe.contentWindow?.print()

          // ç›‘å¬æ‰“å°å®Œæˆäº‹ä»¶ï¼ˆæ‰“å°å¯¹è¯æ¡†å…³é—­åæ¸…ç†ï¼‰
          const cleanup = () => {
            setTimeout(() => {
              try {
                document.body.removeChild(iframe)
              } catch (e) {}
              URL.revokeObjectURL(url)
            }, 100)
          }

          // å°è¯•ç›‘å¬ afterprint äº‹ä»¶
          if (iframe.contentWindow) {
            iframe.contentWindow.addEventListener('afterprint', cleanup, { once: true })
            // å¤‡ç”¨ï¼šå¦‚æœ5åˆ†é’Ÿåè¿˜æ²¡æ¸…ç†ï¼Œå¼ºåˆ¶æ¸…ç†
            setTimeout(cleanup, 300000)
          } else {
            cleanup()
          }
        } catch (e) {
          window.open(url)
          setTimeout(() => URL.revokeObjectURL(url), 5000)
        }
        resolve()
      }, 200)
    }
  })
}

// é«˜çº§åŠŸèƒ½æ ‡ç­¾
const currentAdvanced = ref(0)
const advancedExamples = ['è¡¨æ ¼ç”Ÿæˆ', 'è‡ªåŠ¨åˆ†é¡µ', 'é¡µçœ‰é¡µè„š', 'æ–‡æœ¬æ¢è¡Œ', 'é“¾æ¥ä¹¦ç­¾', 'æ°´å°èƒŒæ™¯']

const autoPageLines = ref(50)

// ç¤ºä¾‹å›¾ç‰‡ - ä½¿ç”¨æœ¬åœ°logo
const sampleImage = ref('')

// åœ¨ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½logoå›¾ç‰‡
onMounted(async () => {
  try {
    const response = await fetch('/imgs/logo.jpg')
    const blob = await response.blob()
    const reader = new FileReader()
    reader.onloadend = () => {
      sampleImage.value = reader.result as string
    }
    reader.readAsDataURL(blob)
  } catch (error) {
    console.error('åŠ è½½logoå¤±è´¥:', error)
  }
})

// ç›‘å¬ç¤ºä¾‹åˆ‡æ¢ï¼Œå½“åˆ‡æ¢åˆ°EChartsç¤ºä¾‹æ—¶åˆå§‹åŒ–å›¾è¡¨
watch(currentExample, async (newVal) => {
  if (newVal === 6) {
    // ç­‰å¾…DOMæ›´æ–°
    await nextTick()
    initCharts()
  } else if (newVal === 7) {
    // ç¤ºä¾‹8: å¯¹æ¯”æµ‹è¯•
    await nextTick()
    initCompareChart()
  }
})

// åˆå§‹åŒ–EChartså›¾è¡¨
const initCharts = () => {
  // é¥¼å›¾ - é”€å”®å æ¯”
  if (pieChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (pieChart) {
      pieChart.dispose()
      pieChart = null
    }

    pieChart = echarts.init(pieChartRef.value)
    pieChart.setOption({
      title: { text: 'äº§å“é”€å”®å æ¯”', left: 'center', textStyle: { fontSize: 14 } },
      tooltip: { trigger: 'item', formatter: '{b}: {c}ä¸‡å…ƒ ({d}%)' },
      legend: { orient: 'vertical', right: 10, top: 'center' },
      series: [
        {
          type: 'pie',
          radius: '60%',
          data: [
            { value: 335, name: 'äº§å“A' },
            { value: 310, name: 'äº§å“B' },
            { value: 234, name: 'äº§å“C' },
            { value: 135, name: 'äº§å“D' },
            { value: 156, name: 'äº§å“E' },
          ],
          emphasis: {
            itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.5)' },
          },
        },
      ],
    })
  }

  // æŠ˜çº¿å›¾ - æœˆåº¦è¶‹åŠ¿
  if (lineChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (lineChart) {
      lineChart.dispose()
      lineChart = null
    }

    lineChart = echarts.init(lineChartRef.value)
    lineChart.setOption({
      title: { text: 'æœˆåº¦é”€å”®è¶‹åŠ¿', left: 'center', textStyle: { fontSize: 14 } },
      tooltip: { trigger: 'axis' },
      xAxis: { type: 'category', data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'] },
      yAxis: { type: 'value', name: 'é”€å”®é¢(ä¸‡)' },
      series: [
        {
          data: [120, 200, 150, 80, 170, 210],
          type: 'line',
          smooth: true,
          itemStyle: { color: '#667eea' },
          areaStyle: { color: 'rgba(102, 126, 234, 0.2)' },
        },
      ],
    })
  }

  // æŸ±çŠ¶å›¾ - äº§å“å¯¹æ¯”
  if (barChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (barChart) {
      barChart.dispose()
      barChart = null
    }

    barChart = echarts.init(barChartRef.value)
    barChart.setOption({
      title: { text: 'äº§å“é”€é‡å¯¹æ¯”', left: 'center', textStyle: { fontSize: 14 } },
      tooltip: { trigger: 'axis' },
      xAxis: { type: 'category', data: ['äº§å“A', 'äº§å“B', 'äº§å“C', 'äº§å“D', 'äº§å“E'] },
      yAxis: { type: 'value', name: 'é”€é‡' },
      series: [
        {
          data: [820, 932, 901, 934, 1290],
          type: 'bar',
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#667eea' },
              { offset: 1, color: '#764ba2' },
            ]),
          },
        },
      ],
    })
  }

  // é›·è¾¾å›¾ - ç»¼åˆè¯„ä¼°
  if (radarChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (radarChart) {
      radarChart.dispose()
      radarChart = null
    }

    radarChart = echarts.init(radarChartRef.value)
    radarChart.setOption({
      title: { text: 'äº§å“ç»¼åˆè¯„ä¼°', left: 'center', textStyle: { fontSize: 14 } },
      tooltip: {},
      radar: {
        indicator: [
          { name: 'é”€é‡', max: 100 },
          { name: 'è´¨é‡', max: 100 },
          { name: 'æˆæœ¬', max: 100 },
          { name: 'æœåŠ¡', max: 100 },
          { name: 'åˆ›æ–°', max: 100 },
        ],
      },
      series: [
        {
          type: 'radar',
          data: [
            {
              value: [85, 90, 75, 88, 92],
              name: 'äº§å“A',
              itemStyle: { color: '#667eea' },
              areaStyle: { color: 'rgba(102, 126, 234, 0.3)' },
            },
          ],
        },
      ],
    })
  }
}

// åˆå§‹åŒ–å¯¹æ¯”æµ‹è¯•å›¾è¡¨ï¼ˆä¸VuePrintNbç¤ºä¾‹8å®Œå…¨ç›¸åŒçš„é…ç½®ï¼‰
const initCompareChart = () => {
  if (compareChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (compareChart) {
      compareChart.dispose()
      compareChart = null
    }

    compareChart = echarts.init(compareChartRef.value)
    compareChart.setOption({
      title: {
        text: 'æœˆåº¦é”€å”®è¶‹åŠ¿',
        left: 'center',
        textStyle: { fontSize: 16, fontWeight: 'bold' },
      },
      tooltip: { trigger: 'axis' },
      grid: { left: '8%', right: '8%', bottom: '18%', top: '22%' },
      xAxis: {
        type: 'category',
        data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
        axisLabel: { fontSize: 13 },
      },
      yAxis: {
        type: 'value',
        name: 'é”€å”®é¢(ä¸‡)',
        axisLabel: { fontSize: 13 },
      },
      series: [
        {
          data: [120, 200, 150, 80, 170, 210],
          type: 'line',
          smooth: true,
          itemStyle: { color: '#667eea' },
          areaStyle: { color: 'rgba(102, 126, 234, 0.2)' },
          lineStyle: { width: 3 },
          symbol: 'circle',
          symbolSize: 8,
        },
      ],
    })
  }
}

// ç¤ºä¾‹1: åˆ›å»ºåŸºç¡€PDF
const example1Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = await createChineseJsPDF()

    doc.text('Hello World!', 10, 10)
    doc.text('è¿™æ˜¯ä½¿ç”¨ jsPDF ç”Ÿæˆçš„ PDF æ–‡æ¡£', 10, 20)
    doc.text('ç”Ÿæˆæ—¶é—´: ' + currentDate.value, 10, 30)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('basic-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹2: æ–‡æœ¬æ ·å¼
const example2Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = await createChineseJsPDF()

    // å¤§æ ‡é¢˜
    doc.setFontSize(24)
    doc.setFont('SourceHanSansSC', 'bold', 700) // æ˜ç¡®è®¾ç½®weight
    doc.text('PDFæ–‡æ¡£æ ‡é¢˜', 10, 20)

    // å¸¦é¢œè‰²çš„å‰¯æ ‡é¢˜
    doc.setTextColor(102, 126, 234)
    doc.setFontSize(16)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.text('å¸¦é¢œè‰²çš„æ–‡æœ¬ç¤ºä¾‹', 10, 35)

    // æ™®é€šæ–‡æœ¬
    doc.setTextColor(0, 0, 0)
    doc.setFontSize(12)
    doc.setFont('SourceHanSansSC', 'normal', 400)
    doc.text('è¿™æ˜¯æ­£å¸¸å¤§å°çš„æ–‡æœ¬', 10, 50)

    // ç²—ä½“ - ä½¿ç”¨æ›´ç²—çš„å­—é‡
    doc.setFont('SourceHanSansSC', 'bold', 700)
    doc.text('è¿™æ˜¯ç²—ä½“æ–‡æœ¬ï¼ˆå­—é‡700ï¼‰', 10, 65)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('styled-text.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹3: ç»˜åˆ¶å›¾å½¢
const example3Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = new jsPDF()

    doc.setFontSize(16)
    doc.text('Shapes and Graphics', 10, 10)

    // çŸ©å½¢ï¼ˆè¾¹æ¡†ï¼‰
    doc.rect(10, 20, 50, 30)

    // å¡«å……çŸ©å½¢
    doc.setFillColor(102, 126, 234)
    doc.rect(70, 20, 50, 30, 'F')

    // è¾¹æ¡†+å¡«å……çŸ©å½¢
    doc.setFillColor(72, 187, 120)
    doc.rect(130, 20, 50, 30, 'FD')

    // åœ†å½¢
    doc.circle(35, 80, 20)

    // å¡«å……åœ†å½¢
    doc.setFillColor(237, 137, 54)
    doc.circle(95, 80, 20, 'F')

    // çº¿æ¡
    doc.line(10, 120, 100, 120)

    // ç²—çº¿æ¡
    doc.setLineWidth(2)
    doc.setDrawColor(255, 0, 0)
    doc.line(10, 130, 100, 130)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('shapes.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹4: å¤šé¡µæ–‡æ¡£
const example4Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = await createChineseJsPDF()

    // ç¬¬ä¸€é¡µ
    doc.setFontSize(20)
    doc.text('ç¬¬ä¸€é¡µ', 10, 20)
    doc.setFontSize(12)
    doc.text('è¿™æ˜¯ç¬¬ä¸€é¡µçš„å†…å®¹ã€‚', 10, 40)
    doc.text('æˆ‘ä»¬å°†æ·»åŠ æ›´å¤šé¡µé¢åˆ°è¿™ä¸ªæ–‡æ¡£ä¸­ã€‚', 10, 50)

    // æ·»åŠ ç¬¬äºŒé¡µ
    doc.addPage()
    doc.setFontSize(20)
    doc.text('ç¬¬äºŒé¡µ', 10, 20)
    doc.setFontSize(12)
    doc.text('è¿™æ˜¯ç¬¬äºŒé¡µçš„å†…å®¹ã€‚', 10, 40)
    doc.text('ä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ ä»»æ„æ•°é‡çš„é¡µé¢ã€‚', 10, 50)

    // æ·»åŠ ç¬¬ä¸‰é¡µ
    doc.addPage()
    doc.setFontSize(20)
    doc.text('ç¬¬ä¸‰é¡µ', 10, 20)
    doc.setFontSize(12)
    doc.text('è¿™æ˜¯æœ€åä¸€é¡µã€‚', 10, 40)
    doc.text('ç”Ÿæˆæ—¶é—´: ' + currentDate.value, 10, 50)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('multi-page.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹5: é¡µé¢é…ç½®
const example5Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = await createChineseJsPDF({
      orientation: pageOrientation.value,
      unit: 'mm',
      format: 'a4',
    })

    doc.setFontSize(16)
    doc.text('è‡ªå®šä¹‰é¡µé¢é…ç½®', 10, 20)
    doc.setFontSize(12)
    doc.text('æ–¹å‘: ' + (pageOrientation.value === 'portrait' ? 'çºµå‘' : 'æ¨ªå‘'), 10, 35)
    doc.text('æ ¼å¼: A4', 10, 45)
    doc.text('å•ä½: mm', 10, 55)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('custom-config.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹6: åµŒå…¥å›¾ç‰‡
const example6Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”ŸæˆPDF...'

  try {
    const doc = await createChineseJsPDF()

    doc.setFontSize(16)
    doc.text('PDFä¸­çš„å›¾ç‰‡', 10, 10)

    // æ·»åŠ å›¾ç‰‡
    if (sampleImage.value) {
      doc.addImage(sampleImage.value, 'JPEG', 10, 20, 100, 80)
    }

    doc.setFontSize(12)
    doc.text('è¿™ä¸ªPDFåŒ…å«ä¸€å¼ åµŒå…¥çš„å›¾ç‰‡ã€‚', 10, 110)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('image-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹7: EChartså›¾è¡¨è½¬PDF
const example7Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå›¾è¡¨PDF...'

  try {
    const doc = await createChineseJsPDF()

    // æ ‡é¢˜
    doc.setFontSize(20)
    doc.text('æ•°æ®åˆ†ææŠ¥å‘Š', 105, 15, { align: 'center' })

    doc.setFontSize(10)
    doc.setTextColor(128, 128, 128)
    doc.text('ç”Ÿæˆæ—¶é—´: ' + currentDate.value, 105, 22, { align: 'center' })
    doc.setTextColor(0, 0, 0)

    let yPosition = 30

    // è·å–å›¾è¡¨å›¾ç‰‡ - é«˜è´¨é‡è¾“å‡º
    const getChartImage = (chart: ECharts | null) => {
      if (!chart) return null
      return chart.getDataURL({
        type: 'png',
        pixelRatio: 2, // é«˜æ¸…è¾“å‡º
        backgroundColor: '#fff',
      })
    }

    // 1. é¥¼å›¾ - å·¦ä¸Š
    const pieImage = getChartImage(pieChart)
    if (pieImage) {
      doc.setFontSize(12)
      doc.text('1. äº§å“é”€å”®å æ¯”åˆ†æ', 15, yPosition)
      doc.addImage(pieImage, 'PNG', 15, yPosition + 5, 85, 60)
    }

    // 2. æŠ˜çº¿å›¾ - å³ä¸Š
    const lineImage = getChartImage(lineChart)
    if (lineImage) {
      doc.setFontSize(12)
      doc.text('2. æœˆåº¦é”€å”®è¶‹åŠ¿', 110, yPosition)
      doc.addImage(lineImage, 'PNG', 110, yPosition + 5, 85, 60)
    }

    yPosition += 75

    // æ·»åŠ åˆ†æè¯´æ˜
    doc.setFontSize(10)
    doc.text('â€¢ äº§å“Aå’Œäº§å“Bå æ®å¸‚åœºä¸»è¦ä»½é¢ï¼Œåˆè®¡çº¦53%', 15, yPosition)
    doc.text('â€¢ 6æœˆé”€å”®é¢è¾¾åˆ°æœ€é«˜ç‚¹210ä¸‡å…ƒï¼Œå¢é•¿æ˜¾è‘—', 15, yPosition + 5)
    yPosition += 15

    // 3. æŸ±çŠ¶å›¾ - å·¦ä¸‹
    const barImage = getChartImage(barChart)
    if (barImage) {
      doc.setFontSize(12)
      doc.text('3. äº§å“é”€é‡å¯¹æ¯”', 15, yPosition)
      doc.addImage(barImage, 'PNG', 15, yPosition + 5, 85, 60)
    }

    // 4. é›·è¾¾å›¾ - å³ä¸‹
    const radarImage = getChartImage(radarChart)
    if (radarImage) {
      doc.setFontSize(12)
      doc.text('4. äº§å“ç»¼åˆè¯„ä¼°', 110, yPosition)
      doc.addImage(radarImage, 'PNG', 110, yPosition + 5, 85, 60)
    }

    yPosition += 75

    // åº•éƒ¨æ€»ç»“
    doc.setFontSize(10)
    doc.text('â€¢ äº§å“Eé”€é‡æœ€é«˜ï¼Œè¾¾åˆ°1290ä»¶', 15, yPosition)
    doc.text('â€¢ äº§å“Aç»¼åˆè¯„ä¼°å¾—åˆ†æœ€é«˜ï¼Œå„é¡¹æŒ‡æ ‡å‡è¡¡', 15, yPosition + 5)

    // é¡µè„š
    doc.setFontSize(8)
    doc.setTextColor(128, 128, 128)
    doc.text('jsPDFä¼˜åŠ¿: ç²¾ç¡®çš„åæ ‡æ§åˆ¶ + é«˜è´¨é‡å›¾ç‰‡è¾“å‡º + çµæ´»çš„å¸ƒå±€èƒ½åŠ›', 105, 285, {
      align: 'center',
    })

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('echarts-report.pdf')

    statusMessage.value = 'å›¾è¡¨PDFç”ŸæˆæˆåŠŸï¼'
    setTimeout(() => (statusMessage.value = ''), 3000)
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹8: å¯¹æ¯”æµ‹è¯• - ç”Ÿæˆä¸VuePrintNbç›¸åŒé…ç½®çš„å›¾è¡¨PDF
const example8Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¯¹æ¯”æµ‹è¯•PDF...'

  try {
    if (!compareChart) {
      throw new Error('å›¾è¡¨æœªåˆå§‹åŒ–')
    }

    const doc = await createChineseJsPDF()

    // æ ‡é¢˜
    doc.setFontSize(18)
    doc.setFont('SourceHanSansSC', 'normal', 400)
    doc.text('æ¡†æ¶å¯¹æ¯”æµ‹è¯•æŠ¥å‘Š', 105, 20, { align: 'center' })

    // å‰¯æ ‡é¢˜
    doc.setFontSize(10)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.setTextColor(50, 130, 206)
    doc.text('jsPDF vs VuePrintNb - ç›¸åŒEChartsé…ç½®è¾“å‡ºå¯¹æ¯”', 105, 28, { align: 'center' })
    doc.setTextColor(0, 0, 0)

    // è·å–å›¾è¡¨å›¾ç‰‡ - é«˜è´¨é‡è¾“å‡º
    const chartImage = compareChart.getDataURL({
      type: 'png',
      pixelRatio: 3, // è¶…é«˜æ¸…è¾“å‡º
      backgroundColor: '#fff',
    })

    // æ·»åŠ å›¾è¡¨è¯´æ˜
    doc.setFontSize(12)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.text('æµ‹è¯•é…ç½®è¯´æ˜ï¼š', 15, 40)

    doc.setFontSize(10)
    doc.text('â€¢ Gridé…ç½®: left: 8%, right: 8%, bottom: 18%, top: 22%', 20, 48)
    doc.text('â€¢ æ•°æ®ç‚¹: [120, 200, 150, 80, 170, 210] (1æœˆ-6æœˆ)', 20, 55)
    doc.text('â€¢ å›¾è¡¨ç±»å‹: æŠ˜çº¿å›¾ + é¢ç§¯å¡«å……', 20, 62)
    doc.text('â€¢ è¾“å‡ºæ–¹å¼: jsPDFç²¾ç¡®åæ ‡å®šä½ + é«˜æ¸…PNGåµŒå…¥', 20, 69)

    // æ·»åŠ å›¾è¡¨ - ç²¾ç¡®å®šä½
    doc.addImage(chartImage, 'PNG', 15, 75, 180, 100)

    // æ·»åŠ åˆ†æç»“è®º
    doc.setFontSize(12)
    doc.setFont('SourceHanSansSC', 'normal', 400)
    doc.text('å¯¹æ¯”ç»“è®ºï¼š', 15, 185)

    doc.setFontSize(10)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.setTextColor(34, 197, 94) // ç»¿è‰²
    doc.text('jsPDFä¼˜åŠ¿ï¼š', 20, 195)
    doc.setTextColor(0, 0, 0)
    doc.text('   1. å›¾è¡¨å®Œæ•´æ˜¾ç¤ºï¼Œ6æœˆæ•°æ®ç‚¹å’Œæ ‡ç­¾ä¸ä¼šè¢«è£å‰ª', 25, 202)
    doc.text('   2. ç²¾ç¡®çš„åæ ‡æ§åˆ¶ï¼Œä¸å—æµè§ˆå™¨æ‰“å°å¼•æ“é™åˆ¶', 25, 209)
    doc.text('   3. é«˜è´¨é‡PNGè¾“å‡ºï¼ˆpixelRatio: 3ï¼‰ï¼Œå›¾è¡¨æ¸…æ™°åº¦é«˜', 25, 216)
    doc.text('   4. å¯æ§çš„é¡µé¢è¾¹è·å’Œå¸ƒå±€ï¼Œé€‚åˆå¤æ‚æ–‡æ¡£', 25, 223)

    doc.setTextColor(245, 158, 11) // æ©™è‰²
    doc.text('VuePrintNbå±€é™ï¼š', 20, 233)
    doc.setTextColor(0, 0, 0)
    doc.text('   1. ä¾èµ–æµè§ˆå™¨æ‰“å°å¼•æ“ï¼Œå›¾è¡¨å³ä¾§å¯èƒ½è¢«è£å‰ª', 25, 240)
    doc.text('   2. Canvasä¸æ–‡å­—å¸ƒå±€å¯èƒ½é‡å ï¼Œéœ€è¦é¢å¤–ä¼˜åŒ–', 25, 247)
    doc.text('   3. æ‰“å°é¢„è§ˆæ•ˆæœå—æµè§ˆå™¨å’Œæ‰“å°æœºé©±åŠ¨å½±å“', 25, 254)

    // é¡µè„š
    doc.setFontSize(8)
    doc.setTextColor(128, 128, 128)
    doc.text('æµ‹è¯•æ—¶é—´: ' + currentDate.value + ' | æ¡†æ¶ç‰ˆæœ¬: jsPDF 2.5.1, ECharts 5.x', 105, 285, {
      align: 'center',
    })

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)

    statusMessage.value = 'âœ… å¯¹æ¯”æµ‹è¯•PDFå·²ç”Ÿæˆï¼Œè¯·æŸ¥çœ‹æ‰“å°é¢„è§ˆ'
  } catch (err) {
    statusMessage.value = 'ç”Ÿæˆå¤±è´¥: ' + (err as Error).message
  } finally {
    loading.value = false
  }
}

// ==================== é«˜çº§åŠŸèƒ½å‡½æ•° ====================

// é«˜çº§1: è¡¨æ ¼ç”Ÿæˆ (autoTable)
const advanced1Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆè¡¨æ ¼PDF...'

  try {
    const doc = await createChineseJsPDF()

    doc.setFontSize(16)
    doc.text('å‘˜å·¥ä¿¡æ¯è¡¨', 105, 15, { align: 'center' })

    // æ³¨æ„: jsPDF-autoTable éœ€è¦å•ç‹¬å®‰è£…
    // è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿçš„è¡¨æ ¼ç»˜åˆ¶
    const headers = ['å§“å', 'éƒ¨é—¨', 'èŒä½', 'å·¥èµ„']
    const data = [
      ['å¼ ä¸‰', 'æŠ€æœ¯éƒ¨', 'å‰ç«¯å·¥ç¨‹å¸ˆ', 'Â¥15,000'],
      ['æå››', 'äº§å“éƒ¨', 'äº§å“ç»ç†', 'Â¥18,000'],
      ['ç‹äº”', 'è®¾è®¡éƒ¨', 'UIè®¾è®¡å¸ˆ', 'Â¥14,000'],
      ['èµµå…­', 'è¿è¥éƒ¨', 'è¿è¥ä¸“å‘˜', 'Â¥13,000'],
      ['å­™ä¸ƒ', 'å¸‚åœºéƒ¨', 'å¸‚åœºä¸“å‘˜', 'Â¥13,000'],
    ]

    let y = 30
    const cellWidth = 45
    const cellHeight = 10

    // ç»˜åˆ¶è¡¨å¤´
    doc.setFillColor(102, 126, 234)
    doc.setTextColor(255, 255, 255)
    doc.setFontSize(12)
    headers.forEach((header, i) => {
      doc.rect(10 + i * cellWidth, y, cellWidth, cellHeight, 'F')
      doc.text(header, 10 + i * cellWidth + cellWidth / 2, y + 7, { align: 'center' })
    })

    // ç»˜åˆ¶æ•°æ®è¡Œ
    doc.setTextColor(0, 0, 0)
    doc.setFontSize(10)
    data.forEach((row, rowIndex) => {
      y += cellHeight
      row.forEach((cell, cellIndex) => {
        doc.rect(10 + cellIndex * cellWidth, y, cellWidth, cellHeight)
        doc.text(cell, 10 + cellIndex * cellWidth + cellWidth / 2, y + 7, { align: 'center' })
      })
    })

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('table-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

// é«˜çº§2: è‡ªåŠ¨åˆ†é¡µå¤„ç†
const advanced2Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¤šé¡µPDF...'

  try {
    const doc = await createChineseJsPDF()
    const pageHeight = doc.internal.pageSize.height
    const margin = 20
    let yPosition = margin

    doc.setFontSize(14)
    doc.text('è‡ªåŠ¨åˆ†é¡µæ¼”ç¤º', 105, yPosition, { align: 'center' })
    yPosition += 15

    doc.setFontSize(10)
    const lineHeight = 8

    for (let i = 0; i < autoPageLines.value; i++) {
      // æ£€æŸ¥æ˜¯å¦éœ€è¦æ¢é¡µ
      if (yPosition > pageHeight - margin) {
        doc.addPage()
        yPosition = margin
      }

      doc.text(`ç¬¬ ${i + 1} è¡Œå†…å®¹ - è¿™æ˜¯è‡ªåŠ¨åˆ†é¡µçš„æ¼”ç¤ºæ–‡æœ¬`, 10, yPosition)
      yPosition += lineHeight
    }

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('auto-page-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

// é«˜çº§3: é¡µçœ‰å’Œé¡µè„š
const advanced3Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¸¦é¡µçœ‰é¡µè„šçš„PDF...'

  try {
    const doc = await createChineseJsPDF()
    const pageCount = 3
    const pageWidth = doc.internal.pageSize.width
    const pageHeight = doc.internal.pageSize.height

    for (let i = 1; i <= pageCount; i++) {
      if (i > 1) doc.addPage()

      // é¡µçœ‰
      doc.setFontSize(10)
      doc.setTextColor(100, 100, 100)
      doc.text('å…¬å¸æœºå¯†æ–‡ä»¶', pageWidth / 2, 10, { align: 'center' })
      doc.line(10, 12, pageWidth - 10, 12)

      // å†…å®¹
      doc.setFontSize(14)
      doc.setTextColor(0, 0, 0)
      doc.text(`ç¬¬ ${i} é¡µå†…å®¹`, 10, 30)

      doc.setFontSize(12)
      doc.text('è¿™æ˜¯æ–‡æ¡£çš„ä¸»è¦å†…å®¹åŒºåŸŸã€‚', 10, 45)
      doc.text('é¡µçœ‰æ˜¾ç¤ºæ–‡æ¡£æ ‡é¢˜ï¼Œé¡µè„šæ˜¾ç¤ºé¡µç ã€‚', 10, 55)

      // é¡µè„š
      doc.setFontSize(10)
      doc.setTextColor(100, 100, 100)
      doc.line(10, pageHeight - 15, pageWidth - 10, pageHeight - 15)
      doc.text(`ç¬¬ ${i}/${pageCount} é¡µ`, pageWidth / 2, pageHeight - 10, { align: 'center' })
      doc.text(currentDate.value, pageWidth - 10, pageHeight - 10, { align: 'right' })
    }

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('header-footer-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

// é«˜çº§4: æ–‡æœ¬æ¢è¡Œå’Œå¯¹é½
const advanced4Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆæ–‡æœ¬å¯¹é½PDF...'

  try {
    const doc = await createChineseJsPDF()
    const pageWidth = doc.internal.pageSize.width

    doc.setFontSize(16)
    doc.text('æ–‡æœ¬æ¢è¡Œå’Œå¯¹é½æ¼”ç¤º', pageWidth / 2, 20, { align: 'center' })

    // é•¿æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œ
    const longText =
      'è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬å†…å®¹ï¼Œç”¨äºæ¼”ç¤ºjsPDFçš„æ–‡æœ¬è‡ªåŠ¨æ¢è¡ŒåŠŸèƒ½ã€‚å½“æ–‡æœ¬è¶…è¿‡æŒ‡å®šå®½åº¦æ—¶ï¼ŒsplitTextToSizeæ–¹æ³•ä¼šè‡ªåŠ¨å°†å…¶åˆ†å‰²æˆå¤šè¡Œï¼Œç¡®ä¿å†…å®¹ä¸ä¼šè¶…å‡ºé¡µé¢è¾¹ç•Œã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºå¤„ç†åŠ¨æ€å†…å®¹éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é¿å…æ–‡æœ¬æº¢å‡ºé¡µé¢ã€‚'

    doc.setFontSize(12)
    const maxWidth = 180
    const lines = doc.splitTextToSize(longText, maxWidth)
    doc.text(lines, 10, 40)

    // å¯¹é½æ¼”ç¤º
    const demoY = 90
    doc.setFontSize(14)

    // å·¦å¯¹é½
    doc.text('â† å·¦å¯¹é½æ–‡æœ¬ (align: left)', 10, demoY)

    // å±…ä¸­å¯¹é½
    doc.text('å±…ä¸­å¯¹é½æ–‡æœ¬ (align: center)', pageWidth / 2, demoY + 15, { align: 'center' })

    // å³å¯¹é½
    doc.text('å³å¯¹é½æ–‡æœ¬ (align: right) â†’', pageWidth - 10, demoY + 30, { align: 'right' })

    // ä¸¤ç«¯å¯¹é½æ¼”ç¤º
    doc.setFontSize(10)
    doc.text('æ³¨æ„: jsPDF æ”¯æŒ leftã€centerã€right ä¸‰ç§å¯¹é½æ–¹å¼ã€‚', 10, demoY + 50)

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('text-align-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

// é«˜çº§5: é“¾æ¥å’Œä¹¦ç­¾
const advanced5Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¸¦é“¾æ¥çš„PDF...'

  try {
    const doc = await createChineseJsPDF()

    doc.setFontSize(16)
    doc.text('PDFé“¾æ¥æ¼”ç¤º', 10, 20)

    // å¤–éƒ¨é“¾æ¥
    doc.setFontSize(12)
    doc.setTextColor(0, 0, 255)
    doc.textWithLink('è®¿é—® jsPDF GitHub ä»“åº“', 10, 40, { url: 'https://github.com/parallax/jsPDF' })

    doc.setTextColor(0, 0, 0)
    doc.text('(ç‚¹å‡»ä¸Šæ–¹è“è‰²æ–‡å­—è®¿é—®å¤–éƒ¨é“¾æ¥)', 10, 50)

    // å†…éƒ¨é“¾æ¥
    doc.setTextColor(0, 0, 255)
    doc.textWithLink('ç‚¹å‡»è·³è½¬åˆ°ç¬¬äºŒé¡µ', 10, 70, { pageNumber: 2 })

    doc.setTextColor(0, 0, 0)
    doc.text('(ç‚¹å‡»ä¸Šæ–¹è“è‰²æ–‡å­—è·³è½¬åˆ°ç¬¬äºŒé¡µ)', 10, 80)

    // ç¬¬äºŒé¡µ
    doc.addPage()
    doc.setFontSize(16)
    doc.text('ç¬¬äºŒé¡µå†…å®¹', 10, 20)

    doc.setFontSize(12)
    doc.text('æ‚¨å·²ç»é€šè¿‡å†…éƒ¨é“¾æ¥è·³è½¬åˆ°è¿™é‡Œï¼', 10, 40)

    doc.setTextColor(0, 0, 255)
    doc.textWithLink('è¿”å›ç¬¬ä¸€é¡µ', 10, 60, { pageNumber: 1 })

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('links-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

// é«˜çº§6: æ°´å°å’ŒèƒŒæ™¯
const advanced6Generate = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¸¦æ°´å°çš„PDF...'

  try {
    const doc = await createChineseJsPDF()
    const pageWidth = doc.internal.pageSize.width
    const pageHeight = doc.internal.pageSize.height

    // æ·»åŠ æ°´å°
    doc.saveGraphicsState()
    const GState = (doc as any).GState
    doc.setGState(new GState({ opacity: 0.2 }))
    doc.setFontSize(60)
    doc.setTextColor(200, 200, 200)

    // æ—‹è½¬æ–‡å­—ä½œä¸ºæ°´å°
    const watermarkText = 'æœºå¯†æ–‡ä»¶'
    doc.text(watermarkText, pageWidth / 2, pageHeight / 2, {
      align: 'center',
      angle: 45,
    })

    doc.restoreGraphicsState()

    // æ·»åŠ æ­£å¸¸å†…å®¹
    doc.setFontSize(16)
    doc.setTextColor(0, 0, 0)
    doc.text('å¸¦æ°´å°çš„æ–‡æ¡£', 10, 20)

    doc.setFontSize(12)
    doc.text('è¿™æ˜¯ä¸€ä¸ªåŒ…å«æ°´å°çš„PDFæ–‡æ¡£ç¤ºä¾‹ã€‚', 10, 40)
    doc.text('æ°´å°ä»¥åŠé€æ˜å½¢å¼æ˜¾ç¤ºåœ¨èƒŒæ™¯ä¸­ï¼Œ', 10, 50)
    doc.text('ä¸ä¼šå½±å“æ­£å¸¸å†…å®¹çš„é˜…è¯»ã€‚', 10, 60)

    // æ·»åŠ æ›´å¤šå†…å®¹
    const content = [
      'æ°´å°é€šå¸¸ç”¨äºï¼š',
      '1. æ ‡è¯†æ–‡æ¡£çš„æœºå¯†æ€§æˆ–æ‰€æœ‰æƒ',
      '2. é˜²æ­¢æœªç»æˆæƒçš„å¤åˆ¶å’Œåˆ†å‘',
      '3. æ ‡è®°æ–‡æ¡£çš„çŠ¶æ€ï¼ˆå¦‚è‰ç¨¿ã€å®¡æ ¸ä¸­ç­‰ï¼‰',
      '4. å¢å¼ºæ–‡æ¡£çš„å“ç‰Œè¯†åˆ«åº¦',
    ]

    let y = 80
    content.forEach((line) => {
      doc.text(line, 10, y)
      y += 10
    })

    const blob = (doc as any).output ? (doc as any).output('blob') : null
    if (blob) await openBlobInPrintWindow(blob)
    else doc.save('watermark-example.pdf')
    statusMessage.value = ''
  } catch (error) {
    console.error('PDFç”Ÿæˆé”™è¯¯:', error)
    alert('PDFç”Ÿæˆå¤±è´¥: ' + error)
    statusMessage.value = ''
  } finally {
    loading.value = false
  }
}

const generateBasicPDF = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨åŠ è½½ä¸­æ–‡å­—ä½“...'

  try {
    // åˆ›å»ºæ”¯æŒä¸­æ–‡çš„ PDF
    const doc = await createChineseJsPDF()

    statusMessage.value = 'æ­£åœ¨ç”Ÿæˆ PDF...'
    // æ ‡é¢˜ - ä¸­æ–‡
    doc.setFontSize(24)
    doc.text('jsPDF ä¸­æ–‡ç¤ºä¾‹æ–‡æ¡£', 105, 20, { align: 'center' })

    // å‰¯æ ‡é¢˜
    doc.setFontSize(14)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.text('åŸºç¡€ PDF ç”Ÿæˆæ¼”ç¤º', 105, 35, { align: 'center' })

    // æ­£æ–‡
    doc.setFont('SourceHanSansSC', 'normal')
    doc.setFontSize(12)
    doc.text('è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ jsPDF ç”Ÿæˆçš„ä¸­æ–‡ PDF æ–‡æ¡£ã€‚', 20, 55)
    doc.text('jsPDF æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®¢æˆ·ç«¯ PDF ç”Ÿæˆåº“ï¼Œæ”¯æŒä¸­æ–‡æ˜¾ç¤ºã€‚', 20, 65)
    doc.text('é€šè¿‡åŠ è½½æ€æºé»‘ä½“å­—ä½“ï¼Œæˆ‘ä»¬å¯ä»¥å®Œç¾æ˜¾ç¤ºä¸­æ–‡å†…å®¹ã€‚', 20, 75)

    // ç»˜åˆ¶ä¸€äº›å›¾å½¢
    doc.setDrawColor(102, 126, 234)
    doc.rect(20, 90, 170, 50)

    doc.setFillColor(102, 126, 234)
    doc.circle(105, 165, 20, 'F')

    // æ·»åŠ æ›´å¤šä¸­æ–‡å†…å®¹
    doc.setFontSize(10)
    doc.text('âœ… æ”¯æŒä¸­æ–‡å­—ç¬¦', 30, 105)
    doc.text('âœ… æ”¯æŒç²—ä½“å’Œå¸¸è§„å­—ä½“', 30, 115)
    doc.text('âœ… å®Œç¾æ¸²æŸ“ä¸­æ–‡æ ‡ç‚¹ç¬¦å·', 30, 125)

    // ä¿å­˜
    doc.save('jspdf-chinese-basic.pdf')

    statusMessage.value = 'âœ… PDF ç”ŸæˆæˆåŠŸï¼'
    setTimeout(() => {
      statusMessage.value = ''
    }, 3000)
  } catch (error) {
    console.error('PDF ç”Ÿæˆå¤±è´¥:', error)
    statusMessage.value = 'âŒ PDF ç”Ÿæˆå¤±è´¥'
  } finally {
    loading.value = false
  }
}

const generateTablePDF = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨åŠ è½½ä¸­æ–‡å­—ä½“...'

  try {
    const doc = await createChineseJsPDF()

    statusMessage.value = 'æ­£åœ¨ç”Ÿæˆè¡¨æ ¼ PDF...'

    doc.setFontSize(18)
    doc.text('å‰ç«¯æ‰“å°æ¡†æ¶å¯¹æ¯”', 105, 15, { align: 'center' })

    // æ‰‹åŠ¨åˆ›å»ºä¸­æ–‡è¡¨æ ¼
    const headers = ['æ¡†æ¶åç§°', 'åŒ…å¤§å°', 'æ€§èƒ½', 'è¯„åˆ†']
    const data = [
      ['Print.js', '10KB', 'å¿«é€Ÿ', 'â­â­â­â­'],
      ['jsPDF', '150KB', 'è‰¯å¥½', 'â­â­â­â­'],
      ['pdfmake', '600KB', 'è‰¯å¥½', 'â­â­â­â­â­'],
      ['html2canvas', '180KB', 'ä¸­ç­‰', 'â­â­â­â­'],
    ]

    let y = 30
    const colWidth = 45
    const rowHeight = 10

    // è¡¨å¤´
    doc.setFillColor(102, 126, 234)
    doc.setTextColor(255, 255, 255)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.rect(20, y, colWidth * 4, rowHeight, 'F')

    doc.setFontSize(11)
    headers.forEach((header, i) => {
      doc.text(header, 22 + i * colWidth, y + 7)
    })

    // æ•°æ®è¡Œ
    doc.setTextColor(0, 0, 0)
    doc.setFont('SourceHanSansSC', 'normal')
    y += rowHeight

    data.forEach((row, rowIndex) => {
      if (rowIndex % 2 === 0) {
        doc.setFillColor(247, 250, 252)
        doc.rect(20, y, colWidth * 4, rowHeight, 'F')
      }

      row.forEach((cell, colIndex) => {
        doc.text(cell, 22 + colIndex * colWidth, y + 7)
      })

      y += rowHeight
    })

    doc.save('jspdf-chinese-table.pdf')
    statusMessage.value = 'âœ… è¡¨æ ¼ PDF ç”ŸæˆæˆåŠŸï¼'
    setTimeout(() => {
      statusMessage.value = ''
    }, 3000)
  } catch (error) {
    console.error('è¡¨æ ¼ PDF ç”Ÿæˆå¤±è´¥:', error)
    statusMessage.value = 'âŒ è¡¨æ ¼ PDF ç”Ÿæˆå¤±è´¥'
  } finally {
    loading.value = false
  }
}

const generateMultiPagePDF = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨åŠ è½½ä¸­æ–‡å­—ä½“...'

  try {
    const doc = await createChineseJsPDF()
    const pageHeight = doc.internal.pageSize.height

    statusMessage.value = 'æ­£åœ¨ç”Ÿæˆå¤šé¡µ PDF...'

    // ç¬¬ä¸€é¡µ
    doc.setFontSize(20)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.text('å¤šé¡µ PDF æ–‡æ¡£ç¤ºä¾‹', 105, 20, { align: 'center' })

    doc.setFontSize(12)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.text('è¿™æ˜¯ç¬¬ 1 é¡µ', 20, 40)
    doc.text('æœ¬ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ jsPDF åˆ›å»ºå¤šé¡µä¸­æ–‡æ–‡æ¡£ã€‚', 20, 50)

    let y = 60
    for (let i = 0; i < 20; i++) {
      if (y > pageHeight - 20) {
        doc.addPage()
        y = 20
        doc.setFont('SourceHanSansSC', 'bold')
        doc.text(`ç¬¬ ${(doc.internal as any).getNumberOfPages()} é¡µ`, 105, 10, { align: 'center' })
        doc.setFont('SourceHanSansSC', 'normal')
      }
      doc.text(`ç¬¬ ${i + 1} è¡Œï¼šè¿™æ˜¯å¤šé¡µæ–‡æ¡£çš„ç¤ºä¾‹å†…å®¹ï¼Œç”¨äºæ¼”ç¤ºè‡ªåŠ¨åˆ†é¡µåŠŸèƒ½ã€‚`, 20, y)
      y += 10
    }

    // æœ€åä¸€é¡µæ·»åŠ é¡µç 
    const totalPages = (doc.internal as any).getNumberOfPages()
    for (let i = 1; i <= totalPages; i++) {
      doc.setPage(i)
      doc.setFontSize(10)
      doc.setFont('SourceHanSansSC', 'normal')
      doc.text(`ç¬¬ ${i} é¡µ / å…± ${totalPages} é¡µ`, 105, pageHeight - 10, { align: 'center' })
    }

    doc.save('jspdf-chinese-multipage.pdf')
    statusMessage.value = 'âœ… å¤šé¡µ PDF ç”ŸæˆæˆåŠŸï¼'
    setTimeout(() => {
      statusMessage.value = ''
    }, 3000)
  } catch (error) {
    console.error('å¤šé¡µ PDF ç”Ÿæˆå¤±è´¥:', error)
    statusMessage.value = 'âŒ å¤šé¡µ PDF ç”Ÿæˆå¤±è´¥'
  } finally {
    loading.value = false
  }
}

const generateAdvancedPDF = async () => {
  loading.value = true
  statusMessage.value = 'æ­£åœ¨åŠ è½½ä¸­æ–‡å­—ä½“...'

  try {
    const doc = await createChineseJsPDF()

    statusMessage.value = 'æ­£åœ¨ç”Ÿæˆé«˜çº§ PDF...'

    // èƒŒæ™¯è‰²
    doc.setFillColor(102, 126, 234)
    doc.rect(0, 0, 210, 40, 'F')

    // ç™½è‰²æ–‡å­—æ ‡é¢˜
    doc.setTextColor(255, 255, 255)
    doc.setFontSize(24)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.text('é«˜çº§ PDF æŠ¥å‘Š', 105, 25, { align: 'center' })

    // é‡ç½®æ–‡å­—é¢œè‰²
    doc.setTextColor(0, 0, 0)

    // æ—¥æœŸ
    doc.setFontSize(10)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.text(`ç”Ÿæˆæ—¥æœŸ: ${new Date().toLocaleDateString('zh-CN')}`, 20, 50)

    // åˆ†èŠ‚
    doc.setFontSize(16)
    doc.setTextColor(102, 126, 234)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.text('1. é¡¹ç›®ç®€ä»‹', 20, 65)

    doc.setFontSize(11)
    doc.setTextColor(74, 85, 104)
    doc.setFont('SourceHanSansSC', 'normal')
    const introText =
      'æœ¬æ–‡æ¡£å±•ç¤ºäº† jsPDF çš„é«˜çº§ PDF ç”Ÿæˆèƒ½åŠ›ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ ·å¼ã€é¢œè‰²ã€å¸ƒå±€å’Œä¸­æ–‡æ”¯æŒã€‚'
    doc.text(introText, 20, 75, { maxWidth: 170 })

    // å¡ç‰‡æ ·å¼æ¡†
    doc.setDrawColor(226, 232, 240)
    doc.setFillColor(247, 250, 252)
    doc.roundedRect(20, 90, 170, 30, 3, 3, 'FD')

    doc.setFontSize(14)
    doc.setTextColor(45, 55, 72)
    doc.setFont('SourceHanSansSC', 'bold')
    doc.text('æ ¸å¿ƒåŠŸèƒ½', 25, 100)

    doc.setFontSize(10)
    doc.setTextColor(74, 85, 104)
    doc.setFont('SourceHanSansSC', 'normal')
    doc.text('â€¢ æ”¯æŒçŸ¢é‡å›¾å½¢', 25, 108)
    doc.text('â€¢ è‡ªå®šä¹‰å­—ä½“å’Œé¢œè‰²', 25, 115)

    // å›¾è¡¨æ¨¡æ‹Ÿ
    doc.setFontSize(16)
    doc.setTextColor(102, 126, 234)
    // ç»˜åˆ¶æŸ±çŠ¶å›¾
    const barData = [80, 65, 90, 75]
    const barColors: [number, number, number][] = [
      [102, 126, 234],
      [72, 187, 120],
      [66, 153, 225],
      [237, 137, 54],
    ]
    const barLabels = ['é€Ÿåº¦', 'è´¨é‡', 'åŠŸèƒ½', 'æ˜“ç”¨æ€§']

    let xPos = 30
    barData.forEach((value, index) => {
      const barHeight = value * 0.5
      const color = barColors[index] ?? [0, 0, 0]
      doc.setFillColor(color[0], color[1], color[2])
      doc.rect(xPos, 185 - barHeight, 30, barHeight, 'F')

      doc.setFontSize(9)
      doc.setTextColor(0, 0, 0)
      doc.setFont('SourceHanSansSC', 'normal')
      const label = barLabels[index] ?? ''
      doc.text(label, xPos + 15, 192, { align: 'center' })
      doc.text(`${value}%`, xPos + 15, 180 - barHeight, { align: 'center' })

      xPos += 40
    })

    // é¡µè„š
    doc.setFontSize(8)
    doc.setTextColor(160, 174, 192)
    doc.text('ç”± jsPDF ç”Ÿæˆ | ç¬¬ 1 é¡µ', 105, 285, { align: 'center' })

    doc.save('jspdf-chinese-advanced.pdf')
    statusMessage.value = 'âœ… é«˜çº§ PDF ç”ŸæˆæˆåŠŸï¼'
    setTimeout(() => {
      statusMessage.value = ''
    }, 3000)
  } catch (error) {
    console.error('é«˜çº§ PDF ç”Ÿæˆå¤±è´¥:', error)
    statusMessage.value = 'âŒ é«˜çº§ PDF ç”Ÿæˆå¤±è´¥'
  } finally {
    loading.value = false
  }
}
</script>

<style scoped>
.demo-page {
  max-width: 1600px;
  margin: 0 auto;
  padding: 2rem;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e2e8f0;
}

.page-header h1 {
  color: #2d3748;
}

.back-link {
  color: #667eea;
  text-decoration: none;
  font-weight: 500;
}

.back-link:hover {
  text-decoration: underline;
}

.content-grid {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 2rem;
}

.info-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  height: fit-content;
  position: sticky;
  top: 2rem;
}

.info-panel h2 {
  color: #667eea;
  margin-bottom: 1.5rem;
}

.info-section {
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}

.info-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.info-section h3 {
  color: #2d3748;
  font-size: 1rem;
  margin-bottom: 0.75rem;
}

.info-section ul {
  list-style: none;
  padding: 0;
}

.info-section li {
  padding: 0.25rem 0;
  font-size: 0.9rem;
}

.info-section p {
  margin: 0.5rem 0;
  font-size: 0.9rem;
}

.rating {
  color: #667eea;
  font-weight: 600;
}

.highlight {
  font-size: 1.5rem;
  font-weight: 700;
  color: #48bb78;
}

.demo-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.section-title {
  color: #2d3748;
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
}

/* ç¤ºä¾‹æ ‡ç­¾æ ·å¼ */
.example-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  border-bottom: 2px solid #e2e8f0;
  flex-wrap: wrap;
}

.tab-button {
  padding: 0.75rem 1.5rem;
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  color: #718096;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.tab-button:hover {
  background: #f7fafc;
  color: #2d3748;
}

.tab-button.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 6px 6px 0 0;
  border-bottom-color: transparent;
}

/* ç¤ºä¾‹å†…å®¹åŒº */
.example-content {
  min-height: 400px;
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.example-content h3 {
  color: #2d3748;
  margin-bottom: 0.75rem;
  font-size: 1.25rem;
}

.example-content > div > p {
  color: #718096;
  margin-bottom: 1rem;
  line-height: 1.6;
}

/* ä»£ç æ˜¾ç¤ºåŒº */
.code-display {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 1rem;
  margin: 1rem 0;
}

.code-display h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
}

.code-display pre {
  margin: 0;
  overflow-x: auto;
}

.code-display code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  color: #2d3748;
}

/* æ¼”ç¤ºå†…å®¹åŒº */
.demo-content {
  background: white;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 1.5rem;
  margin-top: 1rem;
}

.demo-content h4 {
  color: #2d3748;
  margin-bottom: 1rem;
}

/* é¢„è§ˆæ¡† */
.preview-box {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.preview-box p {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.preview-box .note {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #e2e8f0;
  color: #718096;
  font-style: italic;
}

/* é¡µé¢é¢„è§ˆ */
.page-preview {
  padding: 0.75rem;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  margin: 0.5rem 0;
}

/* é€‰æ‹©è¾“å…¥æ¡† */
.select-input {
  padding: 0.5rem 1rem;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  font-size: 1rem;
  margin: 0 0.5rem;
}

/* åˆ†éš”çº¿ */
.divider {
  height: 2px;
  background: linear-gradient(to right, transparent, #e2e8f0, transparent);
  margin: 3rem 0;
}

.controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #667eea;
  color: white;
}

.btn:hover {
  background: #5568d3;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.status-message {
  padding: 1rem;
  margin-bottom: 1.5rem;
  border-radius: 6px;
  background: #e6f4ea;
  color: #1e7e34;
  font-weight: 500;
  text-align: center;
}

.status-message.error {
  background: #fce8e6;
  color: #c5221f;
}

.btn-secondary {
  background: #48bb78;
  color: white;
}

.btn-secondary:hover {
  background: #38a169;
}

.btn-info {
  background: #4299e1;
  color: white;
}

.btn-info:hover {
  background: #3182ce;
}

.btn-warning {
  background: #ed8936;
  color: white;
}

.btn-warning:hover {
  background: #dd6b20;
}

.preview-area {
  background: #f7fafc;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
  min-height: 300px;
}

.preview-area h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.pdf-canvas {
  background: white;
  min-height: 200px;
  border-radius: 4px;
}

.code-examples {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.code-examples h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.code-block {
  margin-bottom: 1.5rem;
}

.code-block h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
}

.code-block pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0;
}

.code-block code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}

/* é«˜çº§åŠŸèƒ½æ ·å¼ */
.advanced-section {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}

.data-table th,
.data-table td {
  border: 1px solid #e2e8f0;
  padding: 0.75rem;
  text-align: center;
}

.data-table th {
  background: #667eea;
  color: white;
  font-weight: 600;
}

.data-table tr:nth-child(even) {
  background: #f7fafc;
}

.number-input {
  padding: 0.5rem;
  border: 1px solid #cbd5e0;
  border-radius: 4px;
  margin: 0 0.5rem;
  width: 100px;
  text-align: center;
}

.preview-box {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  padding: 1.5rem;
  margin-top: 1rem;
}

.preview-box p {
  margin: 0.5rem 0;
}

.preview-box .note {
  color: #718096;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 1rem;
}
</style>
