<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>âš¡ Print.js - è½»é‡çº§æ‰“å°åº“</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>print-js</strong></p>
          <p>npm install print-js</p>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ å…¼å®¹æ€§</h3>
          <ul>
            <li>âœ… Chrome 49+</li>
            <li>âœ… Firefox 52+</li>
            <li>âœ… Safari 10+</li>
            <li>âœ… Edge 14+</li>
            <li>âš ï¸ IE 11 (éƒ¨åˆ†æ”¯æŒ)</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­ (85%)</p>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½</h3>
          <ul>
            <li>âœ… è½»é‡çº§åº“</li>
            <li>âœ… å¿«é€Ÿåˆå§‹åŒ–</li>
            <li>âš ï¸ ä¾èµ–iframe</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“‘ åˆ†é¡µæ§åˆ¶</h3>
          <ul>
            <li>âœ… CSSåˆ†é¡µ</li>
            <li>âš ï¸ ä¾èµ–æµè§ˆå™¨</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“ æ–‡ä»¶å¤§å°</h3>
          <p class="highlight">~10 KB</p>
          <p>(gzipped)</p>
        </div>

        <div class="info-section">
          <h3>âœ¨ æ”¯æŒç±»å‹</h3>
          <ul>
            <li>âœ… PDF æ–‡ä»¶</li>
            <li>âœ… HTML å…ƒç´ </li>
            <li>âœ… å›¾ç‰‡ (PNG/JPG)</li>
            <li>âœ… JSON æ•°æ®</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âœ¨ ä¼˜åŠ¿</h3>
          <ul>
            <li>ç®€å•æ˜“ç”¨</li>
            <li>æ”¯æŒå¤šç§ç±»å‹</li>
            <li>é…ç½®çµæ´»</li>
            <li>è½»é‡çº§</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âš ï¸ åŠ£åŠ¿</h3>
          <ul>
            <li>åŠŸèƒ½ç›¸å¯¹ç®€å•</li>
            <li>å¤æ‚å¸ƒå±€æ”¯æŒæœ‰é™</li>
            <li>ä¾èµ–iframe</li>
          </ul>
        </div>
      </aside>

      <main class="demo-panel">
        <h2 class="section-title">ğŸ“ åŸºç¡€åŠŸèƒ½æ¼”ç¤º</h2>

        <!-- ç¤ºä¾‹é€‰æ‹©æ ‡ç­¾ -->
        <div class="example-tabs">
          <button
            v-for="(example, index) in examples"
            :key="index"
            :class="['tab-button', { active: currentExample === index }]"
            @click="currentExample = index"
          >
            {{ example }}
          </button>
        </div>

        <!-- ç¤ºä¾‹å†…å®¹åŒº -->
        <div class="example-content">
          <!-- ç¤ºä¾‹1: åŸºç¡€HTMLæ‰“å° -->
          <div v-if="currentExample === 0">
            <h3>ç¤ºä¾‹ 1: åŸºç¡€ HTML æ‰“å°</h3>
            <p>ä½¿ç”¨ Print.js æ‰“å°é¡µé¢ä¸Šçš„ HTML å…ƒç´ å†…å®¹ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p>

            <div class="controls">
              <button @click="example1Print" class="btn btn-primary">ğŸ–¨ï¸ æ‰“å°HTMLå†…å®¹</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>import printJS from 'print-js';

printJS({
  printable: 'content-id',
  type: 'html',
  header: 'æ‰“å°æ ‡é¢˜'
});</code></pre>
            </div>

            <div class="demo-content" id="example1-content">
              <h2>Print.js æ¼”ç¤ºæ–‡æ¡£</h2>
              <p><strong>æ—¥æœŸ:</strong> {{ currentDate }}</p>
              <p>Print.js æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript åº“ï¼Œç”¨äºç®€åŒ–ç½‘é¡µæ‰“å°æ“ä½œã€‚</p>
              <ul>
                <li>æ”¯æŒæ‰“å° HTML å…ƒç´ </li>
                <li>æ”¯æŒæ‰“å° PDF æ–‡ä»¶</li>
                <li>æ”¯æŒæ‰“å°å›¾ç‰‡</li>
                <li>æ”¯æŒæ‰“å° JSON æ•°æ®</li>
              </ul>
            </div>
          </div>

          <!-- ç¤ºä¾‹2: å¸¦è‡ªå®šä¹‰æ ·å¼çš„æ‰“å° -->
          <div v-else-if="currentExample === 1">
            <h3>ç¤ºä¾‹ 2: è‡ªå®šä¹‰æ ·å¼æ‰“å°</h3>
            <p>é€šè¿‡ style å‚æ•°æ³¨å…¥è‡ªå®šä¹‰ CSS æ ·å¼ï¼Œæ§åˆ¶æ‰“å°è¾“å‡ºçš„å¤–è§‚ã€‚</p>

            <div class="controls">
              <button @click="example2Print" class="btn btn-primary">ğŸ¨ æ‰“å°(è‡ªå®šä¹‰æ ·å¼)</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>printJS({
  printable: 'content-id',
  type: 'html',
  header: 'è‡ªå®šä¹‰æ ·å¼æ‰“å°',
  style: \`
    h2 { color: #667eea; }
    .highlight { background: yellow; }
    .bordered { border: 2px solid #667eea; }
  \`,
  scanStyles: false
});</code></pre>
            </div>

            <div class="demo-content" id="example2-content">
              <h2>è‡ªå®šä¹‰æ ·å¼æ¼”ç¤º</h2>
              <p class="highlight">è¿™æ˜¯ä¸€æ®µ<strong>é«˜äº®</strong>æ–‡æœ¬</p>
              <div
                class="bordered"
                style="border: 2px solid #667eea; padding: 1rem; border-radius: 8px"
              >
                <p>è¿™æ˜¯ä¸€ä¸ªå¸¦è¾¹æ¡†çš„å†…å®¹åŒºåŸŸã€‚</p>
                <ul>
                  <li>Print.js æ”¯æŒè‡ªå®šä¹‰æ ·å¼</li>
                  <li>å¯ä»¥é€šè¿‡ style å‚æ•°æ³¨å…¥ CSS</li>
                  <li>ä¹Ÿå¯ä»¥é€šè¿‡ css å‚æ•°å¼•å…¥å¤–éƒ¨æ ·å¼è¡¨</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- ç¤ºä¾‹3: æ‰“å°å›¾ç‰‡ -->
          <div v-else-if="currentExample === 2">
            <h3>ç¤ºä¾‹ 3: æ‰“å°å›¾ç‰‡</h3>
            <p>Print.js æ”¯æŒç›´æ¥æ‰“å°å›¾ç‰‡æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯å•å¼ æˆ–å¤šå¼ å›¾ç‰‡ã€‚</p>

            <div class="controls">
              <button @click="example3Print" class="btn btn-primary">ğŸ–¼ï¸ æ‰“å°å›¾ç‰‡</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>// å•å¼ å›¾ç‰‡
printJS('image-url.jpg', 'image');

// æˆ–é…ç½®æ–¹å¼
printJS({
  printable: imageUrl,
  type: 'image',
  header: 'å›¾ç‰‡æ‰“å°',
  imageStyle: 'width:100%; margin: auto;'
});</code></pre>
            </div>

            <div class="demo-content" id="example3-image">
              <img
                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23764ba2;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23grad)' width='600' height='400'/%3E%3Ctext x='50%25' y='40%25' font-family='Arial' font-size='32' fill='white' text-anchor='middle'%3EPrint.js%3C/text%3E%3Ctext x='50%25' y='55%25' font-family='Arial' font-size='24' fill='white' text-anchor='middle'%3Eå›¾ç‰‡æ‰“å°æ¼”ç¤º%3C/text%3E%3C/svg%3E"
                alt="Print.js æ¼”ç¤ºå›¾ç‰‡"
                style="width: 100%; max-width: 600px; border-radius: 8px"
              />
            </div>
          </div>

          <!-- ç¤ºä¾‹4: JSONè¡¨æ ¼æ‰“å° -->
          <div v-else-if="currentExample === 3">
            <h3>ç¤ºä¾‹ 4: JSON æ•°æ®æ‰“å°ä¸ºè¡¨æ ¼</h3>
            <p>Print.js å¯ä»¥å°† JSON æ•°ç»„æ•°æ®ç›´æ¥æ‰“å°ä¸ºæ ¼å¼åŒ–çš„è¡¨æ ¼ã€‚</p>

            <div class="controls">
              <button @click="example4Print" class="btn btn-primary">ğŸ“Š æ‰“å°JSONè¡¨æ ¼</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>const data = [
  { å§“å: 'å¼ ä¸‰', å¹´é¾„: 25, åŸå¸‚: 'åŒ—äº¬' },
  { å§“å: 'æå››', å¹´é¾„: 30, åŸå¸‚: 'ä¸Šæµ·' }
];

printJS({
  printable: data,
  type: 'json',
  properties: ['å§“å', 'å¹´é¾„', 'åŸå¸‚'],
  header: 'ç”¨æˆ·åˆ—è¡¨',
  gridHeaderStyle: 'color: white; background: #667eea;',
  gridStyle: 'border: 1px solid #e2e8f0;'
});</code></pre>
            </div>

            <div class="demo-content">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>æ¡†æ¶åç§°</th>
                    <th>ç±»å‹</th>
                    <th>å¤§å°</th>
                    <th>è¯„åˆ†</th>
                    <th>æ¨èåœºæ™¯</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="item in jsonData" :key="item.æ¡†æ¶">
                    <td>{{ item.æ¡†æ¶ }}</td>
                    <td>{{ item.ç±»å‹ }}</td>
                    <td>{{ item.å¤§å° }}</td>
                    <td>{{ item.è¯„åˆ† }}</td>
                    <td>{{ item.åœºæ™¯ }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- ç¤ºä¾‹5: æ‰“å°å‰åå›è°ƒ -->
          <div v-else-if="currentExample === 4">
            <h3>ç¤ºä¾‹ 5: æ‰“å°å›è°ƒå‡½æ•°</h3>
            <p>ä½¿ç”¨ onPrintDialogClose å’Œ onError å›è°ƒæ¥å¤„ç†æ‰“å°äº‹ä»¶ã€‚</p>

            <div class="controls">
              <button @click="example5Print" class="btn btn-primary">ğŸ”” æ‰“å°(å¸¦å›è°ƒ)</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>printJS({
  printable: 'content-id',
  type: 'html',
  onPrintDialogClose: () => {
    console.log('æ‰“å°å¯¹è¯æ¡†å·²å…³é—­');
    alert('æ‰“å°å®Œæˆæˆ–å·²å–æ¶ˆ');
  },
  onError: (error) => {
    console.error('æ‰“å°é”™è¯¯:', error);
    alert('æ‰“å°å‡ºé”™: ' + error);
  }
});</code></pre>
            </div>

            <div class="demo-content" id="example5-content">
              <div v-if="printStatus" :class="['status-box', printStatus.type]">
                <p>
                  <strong>{{ printStatus.message }}</strong>
                </p>
                <p>
                  <small>æ—¶é—´: {{ printStatus.time }}</small>
                </p>
              </div>
              <h3>å›è°ƒæ¼”ç¤ºå†…å®¹</h3>
              <p>ç‚¹å‡»æ‰“å°æŒ‰é’®åï¼Œå…³é—­æ‰“å°å¯¹è¯æ¡†ä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚</p>
              <ul>
                <li>onPrintDialogClose: æ‰“å°å¯¹è¯æ¡†å…³é—­æ—¶è§¦å‘</li>
                <li>onError: æ‰“å°å‡ºé”™æ—¶è§¦å‘</li>
              </ul>
            </div>
          </div>

          <!-- ç¤ºä¾‹6: æ‰“å°é¡µçœ‰é¡µè„š -->
          <div v-else-if="currentExample === 5">
            <h3>ç¤ºä¾‹ 6: é¡µçœ‰å’Œé…ç½®é€‰é¡¹</h3>
            <p>ä½¿ç”¨ header å’Œ headerStyle å‚æ•°è‡ªå®šä¹‰æ‰“å°é¡µçœ‰ã€‚</p>

            <div class="controls">
              <button @click="example6Print" class="btn btn-primary">ğŸ“„ æ‰“å°(å¸¦é¡µçœ‰)</button>
            </div>

            <div class="code-display">
              <h4>ä»£ç ç¤ºä¾‹:</h4>
              <pre><code>printJS({
  printable: 'content-id',
  type: 'html',
  header: 'å…¬å¸å†…éƒ¨æ–‡ä»¶ - æœºå¯†',
  headerStyle: \`
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    color: #667eea;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
  \`,
  maxWidth: 800
});</code></pre>
            </div>

            <div class="demo-content" id="example6-content">
              <h2>å†…éƒ¨æŠ¥å‘Š</h2>
              <p><strong>æŠ¥å‘Šç¼–å·:</strong> RPT-2024-001</p>
              <p><strong>æ—¥æœŸ:</strong> {{ currentDate }}</p>

              <h3>ä¸€ã€æ¦‚è¿°</h3>
              <p>æœ¬æŠ¥å‘Šå±•ç¤ºäº† Print.js çš„é¡µçœ‰é…ç½®åŠŸèƒ½ã€‚æ‰“å°æ—¶å°†åœ¨é¡¶éƒ¨æ˜¾ç¤ºè‡ªå®šä¹‰çš„é¡µçœ‰å†…å®¹ã€‚</p>

              <h3>äºŒã€å…³é”®æ•°æ®</h3>
              <ul>
                <li>æ‰“å°åº“: Print.js</li>
                <li>ç‰ˆæœ¬: 1.6.0</li>
                <li>åŠŸèƒ½: é¡µçœ‰é…ç½®</li>
                <li>å…¼å®¹æ€§: ä¼˜ç§€</li>
              </ul>
            </div>
          </div>

          <!-- ç¤ºä¾‹7: EChartså›¾è¡¨ -->
          <div v-else-if="currentExample === 6">
            <h3>ç¤ºä¾‹ 7: EChartså›¾è¡¨æ‰“å°</h3>
            <p><strong>âœ¨ Print.jsä¼˜åŠ¿ï¼š</strong>è½»é‡çº§ï¼ˆ10KBï¼‰+ é›¶é…ç½®ï¼Œç›´æ¥æ‰“å°ã€‚</p>

            <div class="controls">
              <button @click="example7Print" class="btn btn-primary">ğŸ“Š æ‰“å°å›¾è¡¨</button>
            </div>

            <div class="demo-content" id="example7-content">
              <h2 style="text-align: center">æ•°æ®çœ‹æ¿</h2>
              <div
                ref="printjsChartRef"
                style="height: 250px; border: 1px solid #e2e8f0; margin: 20px 0"
              ></div>
              <p style="text-align: center; color: #718096">æœˆåº¦é”€å”®è¶‹åŠ¿</p>
            </div>
          </div>
        </div>

        <!-- é«˜çº§åŠŸèƒ½æ¼”ç¤º -->
        <div class="advanced-section">
          <h2 class="section-title">ğŸš€ é«˜çº§åŠŸèƒ½æ¼”ç¤º</h2>

          <div class="example-tabs">
            <button
              v-for="(example, index) in advancedExamples"
              :key="index"
              :class="['tab-button', { active: currentAdvanced === index }]"
              @click="currentAdvanced = index"
            >
              {{ example }}
            </button>
          </div>

          <div class="example-content">
            <!-- é«˜çº§1: PDFæ–‡ä»¶æ‰“å° -->
            <div v-if="currentAdvanced === 0">
              <h3>é«˜çº§ 1: PDF æ–‡ä»¶æ‰“å°</h3>
              <p>Print.js æ”¯æŒé€šè¿‡ URL ç›´æ¥æ‰“å° PDF æ–‡ä»¶ï¼ˆéœ€è¦æµè§ˆå™¨æ”¯æŒï¼‰ã€‚</p>

              <div class="controls">
                <button @click="advanced1Print" class="btn btn-primary">ğŸ“„ æ‰“å°PDF (æ¼”ç¤º)</button>
                <p class="note">æ³¨æ„: æ­¤åŠŸèƒ½ä¾èµ–æµè§ˆå™¨çš„PDFæ”¯æŒï¼ŒæŸäº›æµè§ˆå™¨å¯èƒ½éœ€è¦é¢å¤–é…ç½®ã€‚</p>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>// æ‰“å°PDFæ–‡ä»¶ï¼ˆé€šè¿‡URLï¼‰
printJS('path/to/document.pdf');

// æˆ–ä½¿ç”¨é…ç½®å¯¹è±¡
printJS({
  printable: 'https://example.com/document.pdf',
  type: 'pdf',
  showModal: true,  // æ˜¾ç¤ºåŠ è½½æç¤º
  modalMessage: 'æ­£åœ¨åŠ è½½PDF...'
});

// æ‰“å°PDFçš„ç‰¹å®šé¡µé¢
printJS({
  printable: 'document.pdf',
  type: 'pdf',
  onLoadingStart: () => console.log('å¼€å§‹åŠ è½½'),
  onLoadingEnd: () => console.log('åŠ è½½å®Œæˆ')
});</code></pre>
              </div>

              <div class="demo-content">
                <div class="info-box">
                  <h4>ğŸ“‹ PDFæ‰“å°è¯´æ˜</h4>
                  <ul>
                    <li>æ”¯æŒæœ¬åœ°å’Œè¿œç¨‹PDFæ–‡ä»¶</li>
                    <li>éœ€è¦æµè§ˆå™¨åŸç”Ÿæ”¯æŒPDFæŸ¥çœ‹</li>
                    <li>å¯ä»¥æ˜¾ç¤ºåŠ è½½è¿›åº¦æç¤º</li>
                    <li>æŸäº›æµè§ˆå™¨å¯èƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¡®è®¤</li>
                    <li>è·¨åŸŸPDFéœ€è¦é…ç½®CORS</li>
                  </ul>
                  <p><strong>å…¼å®¹æ€§:</strong> Chrome, Firefox, Safari (éœ€å¯ç”¨PDFæŸ¥çœ‹å™¨)</p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§2: å¤šå›¾ç‰‡æ‰“å° -->
            <div v-else-if="currentAdvanced === 1">
              <h3>é«˜çº§ 2: æ‰¹é‡å›¾ç‰‡æ‰“å°</h3>
              <p>åŒæ—¶æ‰“å°å¤šå¼ å›¾ç‰‡ï¼ŒPrint.js ä¼šè‡ªåŠ¨æ’ç‰ˆæ¯å¼ å›¾ç‰‡ç‹¬ç«‹ä¸€é¡µã€‚</p>

              <div class="controls">
                <button @click="advanced2Print" class="btn btn-primary">ğŸ–¼ï¸ æ‰“å°å¤šå¼ å›¾ç‰‡</button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>// æ‰“å°å¤šå¼ å›¾ç‰‡
const images = [
  'image1.jpg',
  'image2.png',
  'image3.gif'
];

printJS({
  printable: images,
  type: 'image',
  header: 'å›¾ç‰‡é›†åˆ',
  imageStyle: 'width:50%; margin: 20px auto; display: block;'
});</code></pre>
              </div>

              <div class="demo-content">
                <div class="image-grid">
                  <img
                    v-for="(img, index) in multiImages"
                    :key="index"
                    :src="img"
                    alt="æ¼”ç¤ºå›¾ç‰‡"
                    class="grid-image"
                  />
                </div>
              </div>
            </div>

            <!-- é«˜çº§3: å¤æ‚JSONè¡¨æ ¼ -->
            <div v-else-if="currentAdvanced === 2">
              <h3>é«˜çº§ 3: å¤æ‚ JSON è¡¨æ ¼æ‰“å°</h3>
              <p>æ‰“å°å¸¦æœ‰è‡ªå®šä¹‰åˆ—åã€æ ·å¼å’Œæ’åºçš„ JSON æ•°æ®è¡¨æ ¼ã€‚</p>

              <div class="controls">
                <button @click="advanced3Print" class="btn btn-primary">ğŸ“Š æ‰“å°å¤æ‚è¡¨æ ¼</button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>printJS({
  printable: complexData,
  type: 'json',
  properties: [
    { field: 'id', displayName: 'ç¼–å·' },
    { field: 'name', displayName: 'å§“å' },
    { field: 'department', displayName: 'éƒ¨é—¨' },
    { field: 'salary', displayName: 'è–ªèµ„' },
    { field: 'status', displayName: 'çŠ¶æ€' }
  ],
  header: 'å‘˜å·¥ä¿¡æ¯è¡¨',
  gridHeaderStyle: 'color: white; background: #667eea; font-weight: bold;',
  gridStyle: 'border: 1px solid #e2e8f0;',
  repeatTableHeader: true  // æ¯é¡µé‡å¤è¡¨å¤´
});</code></pre>
              </div>

              <div class="demo-content">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>ç¼–å·</th>
                      <th>å§“å</th>
                      <th>éƒ¨é—¨</th>
                      <th>è–ªèµ„</th>
                      <th>çŠ¶æ€</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="item in complexJsonData" :key="item.id">
                      <td>{{ item.id }}</td>
                      <td>{{ item.name }}</td>
                      <td>{{ item.department }}</td>
                      <td>{{ item.salary }}</td>
                      <td>
                        <span
                          :class="['status-badge', item.status === 'åœ¨èŒ' ? 'active' : 'inactive']"
                        >
                          {{ item.status }}
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- é«˜çº§4: è‡ªå®šä¹‰é¡µè¾¹è·å’Œé¡µé¢è®¾ç½® -->
            <div v-else-if="currentAdvanced === 3">
              <h3>é«˜çº§ 4: è‡ªå®šä¹‰é¡µé¢è®¾ç½®</h3>
              <p>é€šè¿‡ CSS æ³¨å…¥æ§åˆ¶é¡µè¾¹è·ã€çº¸å¼ å¤§å°ç­‰æ‰“å°å‚æ•°ã€‚</p>

              <div class="controls">
                <label>
                  é¡µè¾¹è·:
                  <input v-model.number="pageMargin" type="range" min="5" max="50" step="5" />
                  <span class="value-display">{{ pageMargin }}mm</span>
                </label>
                <button @click="advanced4Print" class="btn btn-primary">ğŸ–¨ï¸ è‡ªå®šä¹‰é¡µé¢æ‰“å°</button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>printJS({
  printable: 'content-id',
  type: 'html',
  style: \`
    @page {
      size: A4;
      margin: {{ pageMargin }}mm;
    }
    @media print {
      body { font-size: 12pt; }
      h1 { font-size: 18pt; }
    }
  \`
});</code></pre>
              </div>

              <div class="demo-content" id="advanced4-content">
                <h2>è‡ªå®šä¹‰é¡µé¢è®¾ç½®æ¼”ç¤º</h2>
                <p>
                  å½“å‰é¡µè¾¹è·: <strong>{{ pageMargin }}mm</strong>
                </p>
                <p>æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•é€šè¿‡CSSçš„@pageè§„åˆ™æ§åˆ¶æ‰“å°é¡µé¢çš„å„é¡¹å‚æ•°ã€‚</p>
                <ul>
                  <li>é¡µè¾¹è· (margin): {{ pageMargin }}mm</li>
                  <li>çº¸å¼ å¤§å° (size): A4</li>
                  <li>å­—ä½“å¤§å° (font-size): 12pt</li>
                  <li>æ ‡é¢˜å¤§å° (h1): 18pt</li>
                </ul>
              </div>
            </div>

            <!-- é«˜çº§5: æ‰“å°æ ·å¼éš”ç¦» -->
            <div v-else-if="currentAdvanced === 4">
              <h3>é«˜çº§ 5: æ ·å¼éš”ç¦»æ‰“å°</h3>
              <p>ä½¿ç”¨ scanStyles: false å®Œå…¨æ§åˆ¶æ‰“å°æ ·å¼ï¼Œé¿å…é¡µé¢æ ·å¼å¹²æ‰°ã€‚</p>

              <div class="controls">
                <button @click="advanced5PrintWithStyles" class="btn btn-primary">
                  ğŸ¨ å¸¦é¡µé¢æ ·å¼
                </button>
                <button @click="advanced5PrintWithoutStyles" class="btn btn-secondary">
                  ğŸ¯ éš”ç¦»æ ·å¼
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>// ä¸æ‰«æé¡µé¢æ ·å¼ï¼Œå®Œå…¨è‡ªå®šä¹‰
printJS({
  printable: 'content-id',
  type: 'html',
  scanStyles: false,  // å…³é”®: ä¸ç»§æ‰¿é¡µé¢æ ·å¼
  style: \`
    /* å®Œå…¨è‡ªå®šä¹‰çš„æ‰“å°æ ·å¼ */
    body {
      font-family: Arial, sans-serif;
      font-size: 12pt;
      line-height: 1.6;
      color: #000;
    }
    h2 {
      color: #667eea;
      font-size: 16pt;
    }
    .custom-box {
      border: 2px solid #667eea;
      padding: 15px;
      background: #f7fafc;
    }
  \`
});</code></pre>
              </div>

              <div class="demo-content" id="advanced5-content">
                <h2>æ ·å¼éš”ç¦»æ¼”ç¤º</h2>
                <p>è¿™ä¸ªå†…å®¹åŒºåŸŸåœ¨é¡µé¢ä¸Šæœ‰ç‰¹å®šæ ·å¼ï¼ˆè¾¹æ¡†ã€èƒŒæ™¯è‰²ç­‰ï¼‰ã€‚</p>
                <div
                  class="custom-box"
                  style="
                    border: 2px solid #667eea;
                    padding: 15px;
                    background: #f7fafc;
                    margin: 1rem 0;
                  "
                >
                  <h3>è‡ªå®šä¹‰æ ·å¼æ¡†</h3>
                  <p>ä½¿ç”¨ scanStyles: false æ—¶ï¼Œæ‰“å°å°†ä¸ä¼šç»§æ‰¿é¡µé¢ä¸Šçš„è¿™äº›æ ·å¼ã€‚</p>
                  <ul>
                    <li>é¡µé¢æ ·å¼: æ¸å˜èƒŒæ™¯ã€åœ†è§’</li>
                    <li>æ‰“å°æ ·å¼: çº¯è‰²ã€ç›´è§’ï¼ˆè‡ªå®šä¹‰ï¼‰</li>
                  </ul>
                </div>
                <p><strong>å¯¹æ¯”:</strong> å¸¦æ ·å¼æ‰“å°ä¼šä¿ç•™é¡µé¢æ•ˆæœï¼Œéš”ç¦»æ‰“å°åˆ™ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼ã€‚</p>
              </div>
            </div>

            <!-- é«˜çº§6: é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ -->
            <div v-else-if="currentAdvanced === 5">
              <h3>é«˜çº§ 6: é”™è¯¯å¤„ç†å’ŒåŠ è½½æç¤º</h3>
              <p>å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶ã€‚</p>

              <div class="controls">
                <button @click="advanced6Print" class="btn btn-primary">ğŸ”„ æ‰“å°(å¸¦åŠ è½½æç¤º)</button>
                <button @click="advanced6PrintError" class="btn btn-warning">âš ï¸ æ¨¡æ‹Ÿé”™è¯¯</button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre><code>printJS({
  printable: 'content-id',
  type: 'html',
  showModal: true,
  modalMessage: 'æ­£åœ¨å‡†å¤‡æ‰“å°å†…å®¹ï¼Œè¯·ç¨å€™...',
  onLoadingStart: () => {
    console.log('å¼€å§‹åŠ è½½');
    // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
  },
  onLoadingEnd: () => {
    console.log('åŠ è½½å®Œæˆ');
    // éšè—åŠ è½½åŠ¨ç”»
  },
  onPrintDialogClose: () => {
    console.log('æ‰“å°å¯¹è¯æ¡†å·²å…³é—­');
  },
  onError: (error) => {
    console.error('æ‰“å°é”™è¯¯:', error);
    alert('æ‰“å°å¤±è´¥: ' + error.message);
  }
});</code></pre>
              </div>

              <div class="demo-content" id="advanced6-content">
                <div v-if="loadingStatus" :class="['status-box', loadingStatus.type]">
                  <p>
                    <strong>{{ loadingStatus.message }}</strong>
                  </p>
                  <p v-if="loadingStatus.detail">
                    <small>{{ loadingStatus.detail }}</small>
                  </p>
                </div>

                <h3>é”™è¯¯å¤„ç†æ¼”ç¤º</h3>
                <p>å®Œå–„çš„é”™è¯¯å¤„ç†å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼š</p>
                <ul>
                  <li>âœ… æ˜¾ç¤ºåŠ è½½æç¤ºï¼ˆshowModalï¼‰</li>
                  <li>âœ… onLoadingStart - åŠ è½½å¼€å§‹å›è°ƒ</li>
                  <li>âœ… onLoadingEnd - åŠ è½½å®Œæˆå›è°ƒ</li>
                  <li>âœ… onPrintDialogClose - å¯¹è¯æ¡†å…³é—­å›è°ƒ</li>
                  <li>âœ… onError - é”™è¯¯æ•è·å›è°ƒ</li>
                </ul>
                <p><strong>å»ºè®®:</strong> ç”Ÿäº§ç¯å¢ƒåº”è¯¥å§‹ç»ˆå¤„ç†onErrorï¼Œæä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤ºã€‚</p>
              </div>
            </div>
          </div>
        </div>

        <!-- å®Œæ•´çš„æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹ä¿ç•™åœ¨åé¢ -->
        <div class="divider"></div>

        <div id="print-html-content" class="print-content" style="display: none">
          <div class="document">
            <h1>Print.js ç¤ºä¾‹æ–‡æ¡£</h1>
            <p class="doc-date">æ—¥æœŸ: {{ currentDate }}</p>

            <h2>ä¸€ã€å…³äº Print.js</h2>
            <p>
              Print.js æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript
              åº“ï¼Œç”¨äºç®€åŒ–ç½‘é¡µæ‰“å°æ“ä½œã€‚å®ƒæ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„æ‰“å°ï¼Œ åŒ…æ‹¬ PDFã€HTMLã€å›¾ç‰‡å’Œ JSON
              æ•°æ®ã€‚
            </p>

            <h2>äºŒã€æ ¸å¿ƒç‰¹æ€§</h2>
            <ul>
              <li>æ”¯æŒæ‰“å° PDF æ–‡ä»¶ï¼ˆé€šè¿‡ URLï¼‰</li>
              <li>æ”¯æŒæ‰“å° HTML å…ƒç´ </li>
              <li>æ”¯æŒæ‰“å°å›¾ç‰‡ï¼ˆPNGã€JPG ç­‰ï¼‰</li>
              <li>æ”¯æŒæ‰“å° JSON æ•°æ®ä¸ºè¡¨æ ¼</li>
              <li>å¯è‡ªå®šä¹‰æ‰“å°æ ·å¼</li>
              <li>æ”¯æŒæ‰“å°å‰å›è°ƒå’Œæ‰“å°åå›è°ƒ</li>
            </ul>

            <h2>ä¸‰ã€ä½¿ç”¨åœºæ™¯</h2>
            <div class="grid-2">
              <div class="card">
                <h3>ğŸ“„ æ–‡æ¡£æ‰“å°</h3>
                <p>é€‚åˆæ‰“å°ç®€å•çš„HTMLæ–‡æ¡£ã€æŠ¥å‘Šã€è®¢å•ç­‰</p>
              </div>
              <div class="card">
                <h3>ğŸ“Š æ•°æ®æ‰“å°</h3>
                <p>å¯ä»¥å°†JSONæ•°æ®ç›´æ¥æ‰“å°ä¸ºè¡¨æ ¼</p>
              </div>
              <div class="card">
                <h3>ğŸ–¼ï¸ å›¾ç‰‡æ‰“å°</h3>
                <p>æ”¯æŒç›´æ¥æ‰“å°å›¾ç‰‡æ–‡ä»¶</p>
              </div>
              <div class="card">
                <h3>ğŸ“‹ å¿«é€Ÿæ‰“å°</h3>
                <p>æ— éœ€å¤æ‚é…ç½®å³å¯å®ç°æ‰“å°åŠŸèƒ½</p>
              </div>
            </div>
          </div>
        </div>

        <div class="demo-image" id="print-image" style="display: none">
          <img
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23667eea' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='24' fill='white' text-anchor='middle' dominant-baseline='middle'%3EPrint.js æ¼”ç¤ºå›¾ç‰‡%3C/text%3E%3C/svg%3E"
            alt="æ¼”ç¤ºå›¾ç‰‡"
          />
        </div>

        <div class="code-examples">
          <h3>ğŸ’» ä»£ç ç¤ºä¾‹</h3>

          <div class="code-block">
            <h4>1. å®‰è£…</h4>
            <pre><code>npm install print-js
# æˆ–
yarn add print-js</code></pre>
          </div>

          <div class="code-block">
            <h4>2. æ‰“å° HTML å…ƒç´ </h4>
            <pre><code>import printJS from 'print-js';

// åŸºç¡€ç”¨æ³•
printJS({
  printable: 'element-id',
  type: 'html',
  header: 'æ‰“å°æ ‡é¢˜'
});

// å¸¦æ ·å¼
printJS({
  printable: 'element-id',
  type: 'html',
  style: '.custom { color: red; }',
  scanStyles: false
});</code></pre>
          </div>

          <div class="code-block">
            <h4>3. æ‰“å°å›¾ç‰‡</h4>
            <pre><code>// å•å¼ å›¾ç‰‡
printJS('image-url.jpg', 'image');

// å¤šå¼ å›¾ç‰‡
printJS({
  printable: ['img1.jpg', 'img2.jpg'],
  type: 'image',
  header: 'å›¾ç‰‡é›†åˆ'
});</code></pre>
          </div>

          <div class="code-block">
            <h4>4. æ‰“å° JSON æ•°æ®</h4>
            <pre><code>const data = [
  { name: 'å¼ ä¸‰', age: 25, city: 'åŒ—äº¬' },
  { name: 'æå››', age: 30, city: 'ä¸Šæµ·' }
];

printJS({
  printable: data,
  type: 'json',
  properties: ['name', 'age', 'city'],
  header: 'ç”¨æˆ·åˆ—è¡¨',
  gridHeaderStyle: 'color: red; border: 2px solid #3971A5;',
  gridStyle: 'border: 2px solid #3971A5;'
});</code></pre>
          </div>

          <div class="code-block">
            <h4>5. å®Œæ•´é…ç½®é€‰é¡¹</h4>
            <pre><code>printJS({
  printable: 'element-id',      // è¦æ‰“å°çš„å†…å®¹
  type: 'html',                  // pdf, html, image, json
  header: 'é¡µçœ‰æ–‡å­—',             // é¡µçœ‰
  headerStyle: 'font-size: 20px;', // é¡µçœ‰æ ·å¼
  maxWidth: 800,                 // æœ€å¤§å®½åº¦
  css: 'custom.css',             // å¤–éƒ¨CSS
  style: '.class { }',           // å†…è”æ ·å¼
  scanStyles: true,              // æ˜¯å¦æ‰«æç°æœ‰æ ·å¼
  targetStyles: ['*'],           // ç›®æ ‡æ ·å¼
  ignoreElements: [],            // å¿½ç•¥çš„å…ƒç´ 
  onPrintDialogClose: () => {},  // æ‰“å°å¯¹è¯æ¡†å…³é—­å›è°ƒ
  onError: (error) => {}         // é”™è¯¯å›è°ƒ
});</code></pre>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, watch, nextTick } from 'vue'
import printJS from 'print-js'
import * as echarts from 'echarts'
import type { ECharts } from 'echarts'

const currentDate = ref(new Date().toLocaleDateString('zh-CN'))
const currentExample = ref(0)
const printStatus = ref<{ type: string; message: string; time: string } | null>(null)

// ECharts refs
const printjsChartRef = ref<HTMLDivElement>()
let printjsChart: ECharts | null = null

const examples = [
  'åŸºç¡€HTML',
  'è‡ªå®šä¹‰æ ·å¼',
  'æ‰“å°å›¾ç‰‡',
  'JSONè¡¨æ ¼',
  'å›è°ƒå‡½æ•°',
  'é¡µçœ‰é…ç½®',
  'EChartså›¾è¡¨',
]

// é«˜çº§ç¤ºä¾‹æ ‡ç­¾
const advancedExamples = ['PDFæ–‡ä»¶', 'å¤šå›¾ç‰‡', 'å¤æ‚è¡¨æ ¼', 'é¡µé¢è®¾ç½®', 'æ ·å¼éš”ç¦»', 'é”™è¯¯å¤„ç†']

// é«˜çº§åŠŸèƒ½çš„state
const currentAdvanced = ref(0)
const pageMargin = ref(20)
const loadingStatus = ref<{ type: string; message: string; detail?: string } | null>(null)

// å¤šå›¾ç‰‡æ•°æ®
const multiImages = ref([
  "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%2348bb78' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='24' fill='white' text-anchor='middle' dominant-baseline='middle'%3Eå›¾ç‰‡ 1%3C/text%3E%3C/svg%3E",
  "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%234299e1' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='24' fill='white' text-anchor='middle' dominant-baseline='middle'%3Eå›¾ç‰‡ 2%3C/text%3E%3C/svg%3E",
  "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect fill='%23ed8936' width='400' height='300'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='24' fill='white' text-anchor='middle' dominant-baseline='middle'%3Eå›¾ç‰‡ 3%3C/text%3E%3C/svg%3E",
])

// å¤æ‚JSONæ•°æ®
const complexJsonData = ref([
  { id: 'E001', name: 'å¼ ä¸‰', department: 'æŠ€æœ¯éƒ¨', salary: 'Â¥15,000', status: 'åœ¨èŒ' },
  { id: 'E002', name: 'æå››', department: 'äº§å“éƒ¨', salary: 'Â¥12,000', status: 'åœ¨èŒ' },
  { id: 'E003', name: 'ç‹äº”', department: 'è®¾è®¡éƒ¨', salary: 'Â¥13,000', status: 'åœ¨èŒ' },
  { id: 'E004', name: 'èµµå…­', department: 'è¿è¥éƒ¨', salary: 'Â¥11,000', status: 'ç¦»èŒ' },
  { id: 'E005', name: 'å­™ä¸ƒ', department: 'æŠ€æœ¯éƒ¨', salary: 'Â¥16,000', status: 'åœ¨èŒ' },
  { id: 'E006', name: 'å‘¨å…«', department: 'å¸‚åœºéƒ¨', salary: 'Â¥14,000', status: 'åœ¨èŒ' },
])

// JSONæ•°æ®
const jsonData = ref([
  { æ¡†æ¶: 'Print.js', ç±»å‹: 'è½»é‡çº§æ‰“å°', å¤§å°: '10KB', è¯„åˆ†: 'â­â­â­â­', åœºæ™¯: 'å¿«é€Ÿæ‰“å°' },
  { æ¡†æ¶: 'jsPDF', ç±»å‹: 'PDFç”Ÿæˆ', å¤§å°: '150KB', è¯„åˆ†: 'â­â­â­â­', åœºæ™¯: 'PDFæ–‡æ¡£' },
  { æ¡†æ¶: 'pdfmake', ç±»å‹: 'å£°æ˜å¼PDF', å¤§å°: '600KB', è¯„åˆ†: 'â­â­â­â­â­', åœºæ™¯: 'å¤æ‚æ–‡æ¡£' },
  { æ¡†æ¶: 'html2canvas', ç±»å‹: 'HTMLæˆªå›¾', å¤§å°: '180KB', è¯„åˆ†: 'â­â­â­â­', åœºæ™¯: 'é¡µé¢æˆªå›¾' },
  { æ¡†æ¶: 'html2pdf.js', ç±»å‹: 'HTMLè½¬PDF', å¤§å°: '200KB', è¯„åˆ†: 'â­â­â­â­', åœºæ™¯: 'HTMLæ–‡æ¡£' },
])

// ç¤ºä¾‹1: åŸºç¡€HTMLæ‰“å°
const example1Print = () => {
  printJS({
    printable: 'example1-content',
    type: 'html',
    header: 'Print.js åŸºç¡€æ‰“å°ç¤ºä¾‹',
  })
}

// ç¤ºä¾‹2: è‡ªå®šä¹‰æ ·å¼æ‰“å°
const example2Print = () => {
  printJS({
    printable: 'example2-content',
    type: 'html',
    header: 'è‡ªå®šä¹‰æ ·å¼æ‰“å°',
    headerStyle:
      'font-size: 24px; font-weight: bold; text-align: center; color: #667eea; margin-bottom: 20px;',
    style: `
      h2 { color: #667eea; font-size: 20px; }
      .highlight { background: yellow; padding: 2px 5px; }
      .bordered {
        border: 2px solid #667eea;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
      }
      ul { margin-left: 20px; }
      li { margin: 8px 0; }
    `,
    scanStyles: false,
  })
}

// ç¤ºä¾‹3: æ‰“å°å›¾ç‰‡
const example3Print = () => {
  const imgElement = document.querySelector('#example3-image img') as HTMLImageElement
  if (imgElement) {
    printJS({
      printable: imgElement.src,
      type: 'image',
      header: 'Print.js å›¾ç‰‡æ‰“å°',
      imageStyle: 'width: 100%; max-width: 600px; margin: 20px auto; display: block;',
    })
  }
}

// ç¤ºä¾‹4: JSONè¡¨æ ¼æ‰“å°
const example4Print = () => {
  printJS({
    printable: jsonData.value,
    type: 'json',
    properties: ['æ¡†æ¶', 'ç±»å‹', 'å¤§å°', 'è¯„åˆ†', 'åœºæ™¯'],
    header: 'å‰ç«¯æ‰“å°æ¡†æ¶å¯¹æ¯”è¡¨',
    gridHeaderStyle:
      'color: white; background: #667eea; padding: 12px; font-weight: bold; border: 1px solid #667eea;',
    gridStyle: 'border: 1px solid #e2e8f0; padding: 10px; text-align: left;',
  })
}

// ç¤ºä¾‹5: å¸¦å›è°ƒçš„æ‰“å°
const example5Print = () => {
  printJS({
    printable: 'example5-content',
    type: 'html',
    header: 'Print.js å›è°ƒæ¼”ç¤º',
    onPrintDialogClose: () => {
      printStatus.value = {
        type: 'success',
        message: 'âœ… æ‰“å°å¯¹è¯æ¡†å·²å…³é—­ï¼ˆæ‰“å°å®Œæˆæˆ–ç”¨æˆ·å–æ¶ˆï¼‰',
        time: new Date().toLocaleTimeString('zh-CN'),
      }
      // 3ç§’åæ¸…é™¤çŠ¶æ€
      setTimeout(() => {
        printStatus.value = null
      }, 3000)
    },
    onError: (error) => {
      printStatus.value = {
        type: 'error',
        message: 'âŒ æ‰“å°å‡ºé”™: ' + error,
        time: new Date().toLocaleTimeString('zh-CN'),
      }
    },
  })
}

// ç¤ºä¾‹6: é¡µçœ‰é…ç½®æ‰“å°
const example6Print = () => {
  printJS({
    printable: 'example6-content',
    type: 'html',
    header: 'å…¬å¸å†…éƒ¨æ–‡ä»¶ - æœºå¯†',
    headerStyle: `
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      color: #667eea;
      margin-bottom: 20px;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    `,
    maxWidth: 800,
    style: `
      h2 { color: #2d3748; margin-top: 1rem; }
      h3 { color: #4a5568; margin-top: 1rem; }
      ul { margin-left: 20px; }
      li { margin: 5px 0; }
    `,
  })
}

// ç¤ºä¾‹7: EChartså›¾è¡¨æ‰“å°
const example7Print = () => {
  printJS({
    printable: 'example7-content',
    type: 'html',
    targetStyles: ['*'],
  })
}

// ç›‘å¬ç¤ºä¾‹åˆ‡æ¢
watch(currentExample, async (newVal) => {
  if (newVal === 6) {
    await nextTick()
    initPrintjsChart()
  }
})

// åˆå§‹åŒ–Print.jsçš„ECharts
const initPrintjsChart = () => {
  if (printjsChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (printjsChart) {
      printjsChart.dispose()
      printjsChart = null
    }

    printjsChart = echarts.init(printjsChartRef.value)
    printjsChart.setOption({
      title: { text: 'é”€å”®è¶‹åŠ¿', left: 'center', textStyle: { fontSize: 14 } },
      xAxis: { type: 'category', data: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'] },
      yAxis: { type: 'value' },
      series: [
        {
          data: [120, 200, 150, 80, 170, 210],
          type: 'bar',
          itemStyle: { color: '#48bb78' },
        },
      ],
    })
  }
}

// === é«˜çº§ç¤ºä¾‹å‡½æ•° ===

// é«˜çº§1: PDFæ‰“å°ï¼ˆæ¼”ç¤ºç”¨ï¼Œå®é™…éœ€è¦çœŸå®PDFæ–‡ä»¶ï¼‰
const advanced1Print = () => {
  alert(
    'PDFæ‰“å°åŠŸèƒ½æ¼”ç¤º\n\nå®é™…ä½¿ç”¨æ—¶ï¼Œè¯·æä¾›çœŸå®çš„PDFæ–‡ä»¶URLï¼š\n\nprintJS({\n  printable: "document.pdf",\n  type: "pdf",\n  showModal: true\n});\n\næ³¨æ„ï¼šéœ€è¦æµè§ˆå™¨æ”¯æŒPDFæŸ¥çœ‹å™¨',
  )

  // å®é™…ä»£ç ç¤ºä¾‹ï¼ˆéœ€è¦çœŸå®PDFï¼‰:
  // printJS({
  //   printable: '/path/to/document.pdf',
  //   type: 'pdf',
  //   showModal: true,
  //   modalMessage: 'æ­£åœ¨åŠ è½½PDF...'
  // })
}

// é«˜çº§2: å¤šå›¾ç‰‡æ‰“å°
const advanced2Print = () => {
  printJS({
    printable: multiImages.value,
    type: 'image',
    header: 'Print.js å›¾ç‰‡é›†åˆ',
    headerStyle: 'font-size: 24px; font-weight: bold; text-align: center; margin-bottom: 20px;',
    imageStyle:
      'width: 80%; max-width: 500px; margin: 20px auto; display: block; border: 2px solid #e2e8f0; border-radius: 8px; page-break-after: always; page-break-inside: avoid;',
    style: '@media print { img { page-break-after: always; page-break-inside: avoid; } }',
  })
}

// é«˜çº§3: å¤æ‚JSONè¡¨æ ¼æ‰“å°
const advanced3Print = () => {
  printJS({
    printable: complexJsonData.value,
    type: 'json',
    properties: [
      { field: 'id', displayName: 'ç¼–å·' },
      { field: 'name', displayName: 'å§“å' },
      { field: 'department', displayName: 'éƒ¨é—¨' },
      { field: 'salary', displayName: 'è–ªèµ„' },
      { field: 'status', displayName: 'çŠ¶æ€' },
    ],
    header: 'å‘˜å·¥ä¿¡æ¯è¡¨ - 2024å¹´åº¦',
    headerStyle:
      'font-size: 22px; font-weight: bold; text-align: center; color: #667eea; margin-bottom: 20px;',
    gridHeaderStyle:
      'color: white; background: #667eea; padding: 12px; font-weight: bold; border: 1px solid #667eea; text-align: left;',
    gridStyle: 'border: 1px solid #e2e8f0; padding: 10px; text-align: left;',
    repeatTableHeader: true,
  })
}

// é«˜çº§4: è‡ªå®šä¹‰é¡µé¢è®¾ç½®
const advanced4Print = () => {
  printJS({
    printable: 'advanced4-content',
    type: 'html',
    header: 'è‡ªå®šä¹‰é¡µé¢è®¾ç½®',
    headerStyle: 'font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 15px;',
    style: `
      @page {
        size: A4;
        margin: ${pageMargin.value}mm;
      }
      @media print {
        body {
          font-family: Arial, sans-serif;
          font-size: 12pt;
          line-height: 1.6;
        }
        h2 {
          font-size: 18pt;
          color: #2d3748;
          border-bottom: 2px solid #667eea;
          padding-bottom: 5px;
          margin-bottom: 15px;
        }
        p, li {
          margin: 8px 0;
        }
        strong {
          color: #667eea;
        }
      }
    `,
    scanStyles: false,
  })
}

// é«˜çº§5: å¸¦é¡µé¢æ ·å¼æ‰“å°
const advanced5PrintWithStyles = () => {
  printJS({
    printable: 'advanced5-content',
    type: 'html',
    header: 'æ‰“å° - ä¿ç•™é¡µé¢æ ·å¼',
    scanStyles: true, // æ‰«æå¹¶åº”ç”¨é¡µé¢æ ·å¼
    targetStyles: ['*'], // åŒ…å«æ‰€æœ‰æ ·å¼
  })
}

// é«˜çº§5: éš”ç¦»æ ·å¼æ‰“å°
const advanced5PrintWithoutStyles = () => {
  printJS({
    printable: 'advanced5-content',
    type: 'html',
    header: 'æ‰“å° - è‡ªå®šä¹‰æ ·å¼ï¼ˆéš”ç¦»ï¼‰',
    scanStyles: false, // ä¸æ‰«æé¡µé¢æ ·å¼
    style: `
      body {
        font-family: 'Times New Roman', serif;
        font-size: 12pt;
        line-height: 1.8;
        color: #000;
      }
      h2 {
        font-size: 16pt;
        color: #333;
        margin: 15px 0;
      }
      h3 {
        font-size: 14pt;
        color: #666;
        margin: 10px 0;
      }
      p, li {
        margin: 6px 0;
      }
      .custom-box {
        border: 1px solid #999;
        padding: 10px;
        background: #f9f9f9;
        margin: 10px 0;
      }
      strong {
        font-weight: bold;
        color: #000;
      }
    `,
  })
}

// é«˜çº§6: å¸¦åŠ è½½æç¤ºçš„æ‰“å°
const advanced6Print = () => {
  loadingStatus.value = {
    type: 'info',
    message: 'â³ æ­£åœ¨å‡†å¤‡æ‰“å°å†…å®¹...',
    detail: 'è¯·ç­‰å¾…æ‰“å°å¯¹è¯æ¡†',
  }

  printJS({
    printable: 'advanced6-content',
    type: 'html',
    header: 'Print.js é”™è¯¯å¤„ç†æ¼”ç¤º',
    showModal: true,
    modalMessage: 'æ­£åœ¨å‡†å¤‡æ‰“å°å†…å®¹ï¼Œè¯·ç¨å€™...',
    onLoadingStart: () => {
      console.log('[Print.js] å¼€å§‹åŠ è½½')
    },
    onLoadingEnd: () => {
      console.log('[Print.js] åŠ è½½å®Œæˆ')
      loadingStatus.value = {
        type: 'success',
        message: 'âœ… æ‰“å°å†…å®¹åŠ è½½å®Œæˆ',
        detail: 'æ‰“å°å¯¹è¯æ¡†å·²æ‰“å¼€',
      }
      setTimeout(() => {
        loadingStatus.value = null
      }, 3000)
    },
    onPrintDialogClose: () => {
      console.log('[Print.js] æ‰“å°å¯¹è¯æ¡†å·²å…³é—­')
    },
    onError: (error) => {
      console.error('[Print.js] é”™è¯¯:', error)
      loadingStatus.value = {
        type: 'error',
        message: 'âŒ æ‰“å°å‡ºé”™',
        detail: error.toString(),
      }
    },
  })
}

// é«˜çº§6: æ¨¡æ‹Ÿé”™è¯¯
const advanced6PrintError = () => {
  loadingStatus.value = {
    type: 'error',
    message: 'âŒ æ‰“å°é”™è¯¯æ¼”ç¤º',
    detail: 'æ¨¡æ‹Ÿï¼šæ‰¾ä¸åˆ°è¦æ‰“å°çš„å…ƒç´  (element not found)',
  }

  // å°è¯•æ‰“å°ä¸å­˜åœ¨çš„å…ƒç´ ä»¥è§¦å‘é”™è¯¯
  try {
    printJS({
      printable: 'non-existent-element-id-12345',
      type: 'html',
      onError: (error) => {
        console.error('[Print.js] æ•è·åˆ°é”™è¯¯:', error)
        loadingStatus.value = {
          type: 'error',
          message: 'âŒ æ‰“å°å¤±è´¥',
          detail: 'åŸå› : ' + error.toString(),
        }
      },
    })
  } catch (error) {
    loadingStatus.value = {
      type: 'error',
      message: 'âŒ JavaScriptå¼‚å¸¸',
      detail: error instanceof Error ? error.message : String(error),
    }
  }

  // 3ç§’åæ¸…é™¤é”™è¯¯æç¤º
  setTimeout(() => {
    loadingStatus.value = null
  }, 5000)
}

// æ—§çš„å‡½æ•°ä¿ç•™ç”¨äºä»£ç ç¤ºä¾‹åŒº
const printHtml = () => {
  printJS({
    printable: 'print-html-content',
    type: 'html',
    header: 'Print.js æ‰“å°ç¤ºä¾‹',
    headerStyle: 'font-size: 24px; font-weight: bold; text-align: center;',
    style: `
      .document { padding: 20px; }
      h1 { color: #667eea; }
      h2 { color: #2d3748; margin-top: 2rem; }
      .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
      .card { border: 1px solid #e2e8f0; padding: 1rem; border-radius: 8px; }
    `,
    scanStyles: false,
  })
}

const printImage = () => {
  const imgElement = document.querySelector('#print-image img') as HTMLImageElement
  if (imgElement) {
    printJS({
      printable: imgElement.src,
      type: 'image',
      header: 'å›¾ç‰‡æ‰“å°ç¤ºä¾‹',
      imageStyle: 'width: 100%; margin: 20px auto;',
    })
  }
}

const printJson = () => {
  const jsonData = [
    { æ¡†æ¶: 'Print.js', ç±»å‹: 'è½»é‡çº§', å¤§å°: '10KB', è¯„åˆ†: 'â­â­â­â­' },
    { æ¡†æ¶: 'jsPDF', ç±»å‹: 'PDFç”Ÿæˆ', å¤§å°: '150KB', è¯„åˆ†: 'â­â­â­â­' },
    { æ¡†æ¶: 'pdfmake', ç±»å‹: 'PDFç”Ÿæˆ', å¤§å°: '600KB', è¯„åˆ†: 'â­â­â­â­â­' },
    { æ¡†æ¶: 'html2canvas', ç±»å‹: 'HTMLè½¬æ¢', å¤§å°: '180KB', è¯„åˆ†: 'â­â­â­â­' },
  ]

  printJS({
    printable: jsonData,
    type: 'json',
    properties: ['æ¡†æ¶', 'ç±»å‹', 'å¤§å°', 'è¯„åˆ†'],
    header: 'å‰ç«¯æ‰“å°æ¡†æ¶å¯¹æ¯”',
    gridHeaderStyle:
      'color: white; background: #667eea; padding: 10px; font-weight: bold; border: 1px solid #667eea;',
    gridStyle: 'border: 1px solid #e2e8f0; padding: 8px;',
  })
}

const printWithCustomStyle = () => {
  printJS({
    printable: 'print-html-content',
    type: 'html',
    header: 'è‡ªå®šä¹‰æ ·å¼æ‰“å°',
    headerStyle:
      'font-size: 28px; font-weight: bold; text-align: center; color: #667eea; margin-bottom: 20px;',
    style: `
      @page { margin: 2cm; }
      body { font-family: 'Arial', sans-serif; }
      .document {
        padding: 30px;
        border: 2px solid #667eea;
        border-radius: 8px;
      }
      h1 {
        color: #667eea;
        font-size: 24px;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
      }
      h2 {
        color: #2d3748;
        margin-top: 2rem;
        font-size: 18px;
      }
      h3 { color: #667eea; }
      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin: 1rem 0;
      }
      .card {
        border: 2px solid #e2e8f0;
        padding: 1rem;
        border-radius: 8px;
        background: #f7fafc;
      }
      .doc-date {
        color: #718096;
        font-style: italic;
        margin-bottom: 2rem;
      }
    `,
    scanStyles: false,
  })
}
</script>

<style scoped>
.demo-page {
  max-width: 1600px;
  margin: 0 auto;
  padding: 2rem;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e2e8f0;
}

.page-header h1 {
  color: #2d3748;
}

.back-link {
  color: #667eea;
  text-decoration: none;
  font-weight: 500;
}

.back-link:hover {
  text-decoration: underline;
}

.content-grid {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 2rem;
}

.info-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  height: fit-content;
  position: sticky;
  top: 2rem;
}

.info-panel h2 {
  color: #667eea;
  margin-bottom: 1.5rem;
}

.info-section {
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}

.info-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.info-section h3 {
  color: #2d3748;
  font-size: 1rem;
  margin-bottom: 0.75rem;
}

.info-section ul {
  list-style: none;
  padding: 0;
}

.info-section li {
  padding: 0.25rem 0;
  font-size: 0.9rem;
}

.info-section p {
  margin: 0.5rem 0;
  font-size: 0.9rem;
}

.rating {
  color: #667eea;
  font-weight: 600;
}

.highlight {
  font-size: 1.5rem;
  font-weight: 700;
  color: #48bb78;
}

.demo-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.section-title {
  color: #2d3748;
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
}

/* ç¤ºä¾‹æ ‡ç­¾æ ·å¼ */
.example-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  border-bottom: 2px solid #e2e8f0;
  flex-wrap: wrap;
}

.tab-button {
  padding: 0.75rem 1.5rem;
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  color: #718096;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.tab-button:hover {
  background: #f7fafc;
  color: #2d3748;
}

.tab-button.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 6px 6px 0 0;
  border-bottom-color: transparent;
}

/* ç¤ºä¾‹å†…å®¹åŒº */
.example-content {
  min-height: 400px;
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.example-content h3 {
  color: #2d3748;
  margin-bottom: 0.75rem;
  font-size: 1.25rem;
}

.example-content > div > p {
  color: #718096;
  margin-bottom: 1rem;
  line-height: 1.6;
}

/* ä»£ç æ˜¾ç¤ºåŒº */
.code-display {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 1rem;
  margin: 1rem 0;
}

.code-display h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
}

.code-display pre {
  margin: 0;
  overflow-x: auto;
}

.code-display code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  color: #2d3748;
}

/* æ¼”ç¤ºå†…å®¹åŒº */
.demo-content {
  background: white;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 1.5rem;
  margin-top: 1rem;
}

.demo-content h2,
.demo-content h3 {
  color: #2d3748;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.demo-content h2 {
  font-size: 1.5rem;
  border-bottom: 2px solid #e2e8f0;
  padding-bottom: 0.5rem;
}

.demo-content ul {
  margin-left: 1.5rem;
  margin-top: 0.5rem;
}

.demo-content li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

/* æ•°æ®è¡¨æ ¼ */
.data-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.data-table th,
.data-table td {
  padding: 0.75rem;
  border: 1px solid #e2e8f0;
  text-align: left;
}

.data-table th {
  background: #667eea;
  color: white;
  font-weight: 600;
}

.data-table tbody tr:hover {
  background: #f7fafc;
}

/* çŠ¶æ€æç¤ºæ¡† */
.status-box {
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  border-left: 4px solid;
}

.status-box.success {
  background: #f0fdf4;
  border-color: #48bb78;
  color: #22543d;
}

.status-box.error {
  background: #fef2f2;
  border-color: #f56565;
  color: #742a2a;
}

.status-box p {
  margin: 0.25rem 0;
}

.status-box small {
  color: #718096;
}

/* é«˜çº§åŠŸèƒ½åŒº */
.advanced-section {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px dashed #e2e8f0;
}

/* å›¾ç‰‡ç½‘æ ¼ */
.image-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1rem 0;
}

.grid-image {
  width: 100%;
  border-radius: 8px;
  border: 2px solid #e2e8f0;
  transition: transform 0.2s;
}

.grid-image:hover {
  transform: scale(1.05);
  border-color: #667eea;
}

/* çŠ¶æ€å¾½ç«  */
.status-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 500;
}

.status-badge.active {
  background: #c6f6d5;
  color: #22543d;
}

.status-badge.inactive {
  background: #fed7d7;
  color: #742a2a;
}

/* ä¿¡æ¯æ¡† */
.info-box {
  background: #edf2f7;
  border-left: 4px solid #667eea;
  padding: 1.5rem;
  border-radius: 4px;
}

.info-box h4 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.info-box ul {
  margin-left: 1.5rem;
  margin-top: 0.5rem;
}

.info-box li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.info-box p {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #cbd5e0;
}

/* åŠ è½½çŠ¶æ€æ¡† */
.status-box.info {
  background: #ebf8ff;
  border-color: #4299e1;
  color: #2c5282;
}

/* æ§ä»¶è¯´æ˜æ–‡å­— */
.controls .note {
  color: #718096;
  font-size: 0.9rem;
  font-style: italic;
  margin: 0;
  padding: 0.5rem 0;
}

/* å€¼æ˜¾ç¤º */
.controls .value-display {
  display: inline-block;
  min-width: 60px;
  padding: 0.25rem 0.75rem;
  background: #edf2f7;
  border-radius: 4px;
  font-weight: 600;
  color: #667eea;
  margin-left: 1rem;
}

.controls input[type='range'] {
  width: 200px;
  margin: 0 1rem;
  vertical-align: middle;
}

.controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #667eea;
  color: white;
}

.btn-primary:hover {
  background: #5568d3;
}

.btn-secondary {
  background: #48bb78;
  color: white;
}

.btn-secondary:hover {
  background: #38a169;
}

.btn-info {
  background: #4299e1;
  color: white;
}

.btn-info:hover {
  background: #3182ce;
}

.btn-warning {
  background: #ed8936;
  color: white;
}

.btn-warning:hover {
  background: #dd6b20;
}

.print-content {
  background: #f7fafc;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.document {
  background: white;
  padding: 2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.document h1 {
  color: #667eea;
  margin-bottom: 0.5rem;
}

.doc-date {
  color: #718096;
  font-style: italic;
  margin-bottom: 2rem;
}

.document h2 {
  color: #2d3748;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.document p {
  line-height: 1.8;
  color: #4a5568;
  margin-bottom: 1rem;
}

.document ul {
  line-height: 1.8;
  color: #4a5568;
  margin-left: 1.5rem;
  margin-bottom: 1rem;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin: 1rem 0;
}

.card {
  border: 1px solid #e2e8f0;
  padding: 1rem;
  border-radius: 8px;
  background: #f7fafc;
}

.card h3 {
  color: #667eea;
  margin-bottom: 0.5rem;
}

.card p {
  color: #718096;
  font-size: 0.9rem;
  margin: 0;
}

.demo-image {
  text-align: center;
  margin-bottom: 2rem;
  padding: 2rem;
  background: #f7fafc;
  border-radius: 8px;
}

.demo-image img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.code-examples {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.code-examples h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.code-block {
  margin-bottom: 1.5rem;
}

.code-block h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
}

.code-block pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0;
}

.code-block code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}
</style>
