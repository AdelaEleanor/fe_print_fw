<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>ğŸ–¼ï¸ html2canvas - HTMLè½¬Canvas</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>html2canvas</strong></p>
          <p>npm install html2canvas</p>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ å…¼å®¹æ€§</h3>
          <ul>
            <li>âœ… Chrome 60+</li>
            <li>âœ… Firefox 55+</li>
            <li>âœ… Safari 11.1+</li>
            <li>âœ… Edge 79+</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­ (80%)</p>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½</h3>
          <ul>
            <li>âš ï¸ éœ€éå†DOM</li>
            <li>âš ï¸ æ¸²æŸ“è¾ƒæ…¢</li>
            <li>âš ï¸ å†…å­˜å ç”¨å¤§</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­ (40%)</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“‘ åˆ†é¡µæ§åˆ¶</h3>
          <ul>
            <li>âš ï¸ æ‰‹åŠ¨è®¡ç®—</li>
            <li>âš ï¸ éœ€è¦é¢å¤–å¤„ç†</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­ (40%)</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“ æ–‡ä»¶å¤§å°</h3>
          <p class="highlight">~180 KB</p>
        </div>

        <div class="info-section">
          <h3>âœ¨ ä¼˜åŠ¿</h3>
          <ul>
            <li>æ‰€è§å³æ‰€å¾—</li>
            <li>æ ·å¼å®Œç¾è¿˜åŸ</li>
            <li>æ”¯æŒå¤æ‚å¸ƒå±€</li>
            <li>å¯ç”Ÿæˆå›¾ç‰‡</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âš ï¸ åŠ£åŠ¿</h3>
          <ul>
            <li>æ€§èƒ½å¼€é”€å¤§</li>
            <li>ç”Ÿæˆå›¾ç‰‡å‹PDF</li>
            <li>æ–‡å­—ä¸å¯é€‰</li>
            <li>æ–‡ä»¶ä½“ç§¯å¤§</li>
            <li>è·¨åŸŸé™åˆ¶</li>
          </ul>
        </div>
      </aside>

      <main class="demo-panel">
        <!-- åŸºç¡€åŠŸèƒ½æ¼”ç¤º -->
        <div class="examples-section">
          <h2 class="section-title">ğŸ“š åŸºç¡€åŠŸèƒ½æ¼”ç¤º</h2>

          <div class="example-tabs">
            <button
              v-for="(example, index) in examples"
              :key="index"
              :class="['tab-button', { active: currentExample === index }]"
              @click="currentExample = index"
            >
              {{ example }}
            </button>
          </div>

          <div class="example-content">
            <!-- ç¤ºä¾‹1: åŸºç¡€æˆªå›¾ -->
            <div v-if="currentExample === 0">
              <h3>ç¤ºä¾‹ 1: åŸºç¡€æˆªå›¾</h3>
              <p>å°†HTMLå…ƒç´ è½¬æ¢ä¸ºCanvasï¼Œç„¶åå¯¼å‡ºä¸ºPNGå›¾ç‰‡ã€‚</p>

              <div class="controls">
                <button @click="example1Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ“¸ åŸºç¡€æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>import html2canvas from 'html2canvas'

const element = document.getElementById('capture-area')
const canvas = await html2canvas(element)

// è½¬ä¸ºå›¾ç‰‡
const imgData = canvas.toDataURL('image/png')

// ä¸‹è½½å›¾ç‰‡
const link = document.createElement('a')
link.href = imgData
link.download = 'screenshot.png'
link.click()</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ æˆªå›¾é¢„è§ˆåŒºåŸŸ:</h4>
                <div id="example1-area" class="capture-preview">
                  <div class="preview-card">
                    <h4>ğŸ¨ ç¤ºä¾‹å†…å®¹</h4>
                    <p>è¿™ä¸ªåŒºåŸŸçš„å†…å®¹å°†è¢«æˆªå›¾</p>
                    <div class="preview-badge">html2canvas</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç¤ºä¾‹2: é«˜æ¸…æˆªå›¾ -->
            <div v-else-if="currentExample === 1">
              <h3>ç¤ºä¾‹ 2: é«˜æ¸…æˆªå›¾ (scale)</h3>
              <p>é€šè¿‡è®¾ç½®scaleå‚æ•°æé«˜æˆªå›¾æ¸…æ™°åº¦ï¼Œé€‚åˆéœ€è¦é«˜åˆ†è¾¨ç‡çš„åœºæ™¯ã€‚</p>

              <div class="controls">
                <label>
                  ç¼©æ”¾å€æ•°:
                  <select v-model="scaleValue" class="select-input">
                    <option :value="1">1x (æ ‡å‡†)</option>
                    <option :value="2">2x (é«˜æ¸…)</option>
                    <option :value="3">3x (è¶…æ¸…)</option>
                    <option :value="4">4x (ææ¸…)</option>
                  </select>
                </label>
                <button @click="example2Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ” é«˜æ¸…æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  scale: 2,  // 2å€æ¸…æ™°åº¦
  backgroundColor: '#ffffff'
})

// scale å€¼è¯´æ˜:
// 1: æ ‡å‡†æ¸…æ™°åº¦ (é»˜è®¤)
// 2: 2å€æ¸…æ™°åº¦ï¼Œé€‚åˆRetinaå±å¹•
// 3-4: è¶…é«˜æ¸…æ™°åº¦ï¼Œæ–‡ä»¶è¾ƒå¤§</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ é«˜æ¸…æˆªå›¾åŒºåŸŸ:</h4>
                <div
                  id="example2-area"
                  class="capture-preview"
                  style="background: linear-gradient(135deg, #667eea, #764ba2)"
                >
                  <div class="preview-card" style="color: white; background: transparent">
                    <h4>ğŸ” é«˜æ¸…æ¼”ç¤º</h4>
                    <p>å½“å‰ç¼©æ”¾: {{ scaleValue }}x</p>
                    <p style="font-size: 0.8rem">æ¸å˜èƒŒæ™¯æµ‹è¯•</p>
                  </div>
                </div>
                <p class="note">scaleè¶Šå¤§ï¼Œå›¾ç‰‡è¶Šæ¸…æ™°ï¼Œä½†æ–‡ä»¶ä¹Ÿè¶Šå¤§</p>
              </div>
            </div>

            <!-- ç¤ºä¾‹3: æˆªå›¾è½¬PDF -->
            <div v-else-if="currentExample === 2">
              <h3>ç¤ºä¾‹ 3: æˆªå›¾è½¬PDF</h3>
              <p>å°†html2canvasæˆªå–çš„å†…å®¹é€šè¿‡jsPDFè½¬æ¢ä¸ºPDFæ–‡ä»¶ã€‚</p>

              <div class="controls">
                <button @click="example3Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“„ æˆªå›¾è½¬PDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>import html2canvas from 'html2canvas'
import { jsPDF } from 'jspdf'

const canvas = await html2canvas(element, { scale: 2 })
const imgData = canvas.toDataURL('image/png')

const pdf = new jsPDF()
const imgWidth = 210 // A4å®½åº¦(mm)
const imgHeight = (canvas.height * imgWidth) / canvas.width

pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight)
pdf.save('screenshot.pdf')</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ PDFæˆªå›¾åŒºåŸŸ:</h4>
                <div id="example3-area" class="capture-preview">
                  <div class="preview-card">
                    <h4>ğŸ“„ PDFå†…å®¹</h4>
                    <p>è¿™ä¸ªåŒºåŸŸå°†è¢«æˆªå›¾å¹¶è½¬ä¸ºPDF</p>
                    <table class="mini-table">
                      <tr>
                        <th>é¡¹ç›®</th>
                        <th>æ•°å€¼</th>
                      </tr>
                      <tr>
                        <td>æ€§èƒ½</td>
                        <td>85%</td>
                      </tr>
                      <tr>
                        <td>è´¨é‡</td>
                        <td>95%</td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç¤ºä¾‹4: è‡ªå®šä¹‰èƒŒæ™¯è‰² -->
            <div v-else-if="currentExample === 3">
              <h3>ç¤ºä¾‹ 4: è‡ªå®šä¹‰èƒŒæ™¯è‰²</h3>
              <p>è®¾ç½®æˆªå›¾çš„èƒŒæ™¯é¢œè‰²ï¼Œé€‚åˆå¤„ç†é€æ˜èƒŒæ™¯çš„å…ƒç´ ã€‚</p>

              <div class="controls">
                <label>
                  èƒŒæ™¯è‰²:
                  <input v-model="bgColor" type="color" class="color-input" />
                </label>
                <button @click="example4Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ¨ è‡ªå®šä¹‰èƒŒæ™¯æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  backgroundColor: '#ffffff',  // ç™½è‰²èƒŒæ™¯
  // backgroundColor: null,    // é€æ˜èƒŒæ™¯
  // backgroundColor: '#f0f0f0' // ç°è‰²èƒŒæ™¯
})</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ èƒŒæ™¯è‰²é¢„è§ˆ:</h4>
                <div
                  id="example4-area"
                  class="capture-preview"
                  :style="{ backgroundColor: bgColor }"
                >
                  <div class="preview-card" style="background: rgba(255, 255, 255, 0.9)">
                    <h4>ğŸ¨ è‡ªå®šä¹‰èƒŒæ™¯</h4>
                    <p>å½“å‰èƒŒæ™¯è‰²: {{ bgColor }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç¤ºä¾‹5: è¿‡æ»¤å…ƒç´  -->
            <div v-else-if="currentExample === 4">
              <h3>ç¤ºä¾‹ 5: è¿‡æ»¤ç‰¹å®šå…ƒç´ </h3>
              <p>ä½¿ç”¨ignoreElementsé€‰é¡¹æ’é™¤ä¸éœ€è¦æˆªå›¾çš„å…ƒç´ ã€‚</p>

              <div class="controls">
                <button @click="example5Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸš« è¿‡æ»¤å…ƒç´ æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  ignoreElements: (el) =&gt; {
    // å¿½ç•¥å¸¦æœ‰ 'no-capture' ç±»çš„å…ƒç´ 
    return el.classList.contains('no-capture')
  }
})</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ è¿‡æ»¤æ¼”ç¤ºåŒºåŸŸ:</h4>
                <div id="example5-area" class="capture-preview">
                  <div class="preview-card">
                    <h4>ğŸ“¸ ä¼šè¢«æˆªå›¾</h4>
                    <p>è¿™æ®µæ–‡å­—ä¼šå‡ºç°åœ¨æˆªå›¾ä¸­</p>
                    <div
                      class="no-capture"
                      style="
                        background: #fed7d7;
                        padding: 0.5rem;
                        border-radius: 4px;
                        margin-top: 0.5rem;
                      "
                    >
                      ğŸš« è¿™æ®µä¸ä¼šè¢«æˆªå›¾ (no-capture)
                    </div>
                    <p style="margin-top: 0.5rem">è¿™æ®µä¹Ÿä¼šè¢«æˆªå›¾</p>
                  </div>
                </div>
                <p class="note">å¸¦æœ‰ no-capture ç±»çš„å…ƒç´ å°†è¢«å¿½ç•¥</p>
              </div>
            </div>

            <!-- ç¤ºä¾‹6: è·å–Blob -->
            <div v-else-if="currentExample === 5">
              <h3>ç¤ºä¾‹ 6: è·å–Blobå¯¹è±¡</h3>
              <p>å°†æˆªå›¾è½¬æ¢ä¸ºBlobå¯¹è±¡ï¼Œé€‚åˆä¸Šä¼ æœåŠ¡å™¨æˆ–è¿›ä¸€æ­¥å¤„ç†ã€‚</p>

              <div class="controls">
                <label>
                  å›¾ç‰‡æ ¼å¼:
                  <select v-model="imageFormat" class="select-input">
                    <option value="image/png">PNG</option>
                    <option value="image/jpeg">JPEG</option>
                    <option value="image/webp">WebP</option>
                  </select>
                </label>
                <button @click="example6Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ’¾ è·å–Blob' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element)

canvas.toBlob((blob) =&gt; {
  // åˆ›å»º URL
  const url = URL.createObjectURL(blob)

  // ä¸‹è½½æ–‡ä»¶
  const a = document.createElement('a')
  a.href = url
  a.download = 'screenshot.png'
  a.click()

  // æˆ–ä¸Šä¼ åˆ°æœåŠ¡å™¨
  const formData = new FormData()
  formData.append('image', blob, 'screenshot.png')
  // fetch('/upload', { method: 'POST', body: formData })
}, 'image/png', 0.9)</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ Blobæ¼”ç¤ºåŒºåŸŸ:</h4>
                <div id="example6-area" class="capture-preview">
                  <div class="preview-card">
                    <h4>ğŸ’¾ Blobæ ¼å¼</h4>
                    <p>å½“å‰æ ¼å¼: {{ imageFormat }}</p>
                    <p style="font-size: 0.8rem; color: #718096">é€‚åˆä¸Šä¼ æˆ–è¿›ä¸€æ­¥å¤„ç†</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- ç¤ºä¾‹7: EChartså›¾è¡¨ -->
            <div v-else-if="currentExample === 6">
              <h3>ç¤ºä¾‹ 7: EChartså›¾è¡¨æˆªå›¾</h3>
              <p class="framework-highlight">
                ğŸ“¸ <strong>html2canvasç‰¹ç‚¹ï¼š</strong>åƒç´ çº§ç²¾å‡†æˆªå›¾ï¼Œå®Œç¾æ•æ‰å¤æ‚CSSæ•ˆæœ<br />
                <span class="advantage">âœ… ä¼˜åŠ¿ï¼š</span
                >æ— éœ€è½¬æ¢ï¼Œç›´æ¥æˆªå–è§†è§‰å¤–è§‚ï¼›æ”¯æŒå¤æ‚CSSï¼ˆæ¸å˜ã€é˜´å½±ã€åŠ¨ç”»ï¼‰ï¼›é«˜è¿˜åŸåº¦<br />
                <span class="disadvantage">âš ï¸ å¯¹æ¯”ï¼š</span>vs jsPDF/pdfmake -
                æ— éœ€å¯¼å‡ºå›¾ç‰‡å³å¯æ‰“å°ï¼›vs html2pdf - æä¾›Canvasä¾¿äºåå¤„ç†
              </p>

              <div class="controls">
                <button @click="example7Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ“¸ æˆªå›¾ä¿å­˜' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>// 1. åˆå§‹åŒ–ECharts
const chart = echarts.init(chartRef.value)
chart.setOption({
  title: { text: 'é”€å”®æ•°æ®' },
  series: [{ type: 'pie', data: [...] }]
})

// 2. æˆªå›¾ECharts
const canvas = await html2canvas(chartRef.value, {
  scale: 2,  // é«˜æ¸…æˆªå›¾
  backgroundColor: '#fff',
  useCORS: true
})

// 3. ä¸‹è½½å›¾ç‰‡
const link = document.createElement('a')
link.download = 'chart.png'
link.href = canvas.toDataURL()
link.click()</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“Š EChartsæ¼”ç¤ºåŒºåŸŸ:</h4>
                <div id="example7-area" style="padding: 20px; background: #fff; border-radius: 8px">
                  <div ref="html2canvasChartRef" style="width: 100%; height: 400px"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- é«˜çº§åŠŸèƒ½æ¼”ç¤º -->
        <div class="advanced-section">
          <h2 class="section-title">ğŸš€ é«˜çº§åŠŸèƒ½æ¼”ç¤º</h2>

          <div class="example-tabs">
            <button
              v-for="(example, index) in advancedExamples"
              :key="index"
              :class="['tab-button', { active: currentAdvanced === index }]"
              @click="currentAdvanced = index"
            >
              {{ example }}
            </button>
          </div>

          <div class="example-content">
            <!-- é«˜çº§1: é•¿é¡µé¢æˆªå›¾ -->
            <div v-if="currentAdvanced === 0">
              <h3>é«˜çº§ 1: é•¿é¡µé¢åˆ†é¡µæˆªå›¾</h3>
              <p>å¤„ç†è¶…é•¿å†…å®¹ï¼Œè‡ªåŠ¨åˆ†é¡µç”Ÿæˆå¤šé¡µPDFã€‚</p>

              <div class="controls">
                <button @click="advanced1Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ ç”Ÿæˆä¸­...' : 'ğŸ“‘ é•¿é¡µé¢åˆ†é¡µPDF' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>async function captureLongPage(element) {
  const canvas = await html2canvas(element, { scale: 2 })
  const pdf = new jsPDF()
  const imgData = canvas.toDataURL('image/png')

  const pageHeight = 295 // A4é«˜åº¦(mm)
  const imgWidth = 210
  const imgHeight = (canvas.height * imgWidth) / canvas.width
  let heightLeft = imgHeight
  let position = 0

  pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)
  heightLeft -= pageHeight

  while (heightLeft &gt; 0) {
    position = heightLeft - imgHeight
    pdf.addPage()
    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)
    heightLeft -= pageHeight
  }

  pdf.save('long-page.pdf')
}</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ é•¿å†…å®¹é¢„è§ˆ:</h4>
                <div id="advanced1-area" class="long-content-preview">
                  <div v-for="i in 5" :key="i" class="preview-section">
                    <h5>ç¬¬ {{ i }} éƒ¨åˆ†</h5>
                    <p>è¿™æ˜¯ç¬¬ {{ i }} éƒ¨åˆ†çš„å†…å®¹ï¼Œç”¨äºæ¼”ç¤ºé•¿é¡µé¢åˆ†é¡µåŠŸèƒ½...</p>
                  </div>
                </div>
                <p class="note">å†…å®¹è¿‡é•¿æ—¶å°†è‡ªåŠ¨åˆ†å‰²æˆå¤šé¡µPDF</p>
              </div>
            </div>

            <!-- é«˜çº§2: è·¨åŸŸå›¾ç‰‡å¤„ç† -->
            <div v-else-if="currentAdvanced === 1">
              <h3>é«˜çº§ 2: è·¨åŸŸå›¾ç‰‡å¤„ç†</h3>
              <p>ä½¿ç”¨useCORSå’ŒallowTainté€‰é¡¹å¤„ç†è·¨åŸŸå›¾ç‰‡ã€‚</p>

              <div class="controls">
                <button @click="advanced2Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸŒ è·¨åŸŸæˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  useCORS: true,      // å…è®¸è·¨åŸŸå›¾ç‰‡
  allowTaint: false,  // ä¸å…è®¸æ±¡æŸ“canvas
  proxy: 'your-proxy-url', // ä»£ç†æœåŠ¡å™¨

  // æˆ–ä½¿ç”¨ onclone é¢„å¤„ç†
  onclone: (clonedDoc) =&gt; {
    // å¯ä»¥åœ¨è¿™é‡Œæ›¿æ¢è·¨åŸŸå›¾ç‰‡
    const images = clonedDoc.querySelectorAll('img')
    images.forEach(img =&gt; {
      img.crossOrigin = 'anonymous'
    })
  }
})</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p><strong>è·¨åŸŸé€‰é¡¹è¯´æ˜:</strong></p>
                  <ul style="text-align: left; margin-left: 1rem">
                    <li><code>useCORS: true</code> - å°è¯•ä½¿ç”¨CORSåŠ è½½å›¾ç‰‡</li>
                    <li><code>allowTaint: true</code> - å…è®¸æ±¡æŸ“canvasï¼ˆä¸èƒ½å¯¼å‡ºï¼‰</li>
                    <li><code>proxy</code> - é€šè¿‡ä»£ç†æœåŠ¡å™¨åŠ è½½å›¾ç‰‡</li>
                  </ul>
                  <p class="note">è·¨åŸŸå›¾ç‰‡éœ€è¦æœåŠ¡å™¨è®¾ç½®æ­£ç¡®çš„CORSå¤´</p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§3: è‡ªå®šä¹‰æ¸²æŸ“åŒºåŸŸ -->
            <div v-else-if="currentAdvanced === 2">
              <h3>é«˜çº§ 3: è‡ªå®šä¹‰æ¸²æŸ“åŒºåŸŸ</h3>
              <p>ä½¿ç”¨x, y, width, heightå‚æ•°è£å‰ªæŒ‡å®šåŒºåŸŸã€‚</p>

              <div class="controls">
                <label>
                  Xåç§»: <input v-model.number="cropX" type="number" class="number-input" min="0" />
                </label>
                <label>
                  Yåç§»: <input v-model.number="cropY" type="number" class="number-input" min="0" />
                </label>
                <button @click="advanced3Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'âœ‚ï¸ è£å‰ªæˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  x: 50,      // èµ·å§‹Xåæ ‡
  y: 50,      // èµ·å§‹Yåæ ‡
  width: 200, // æˆªå–å®½åº¦
  height: 150, // æˆªå–é«˜åº¦
  scrollX: 0,
  scrollY: 0
})</code></pre>
              </div>

              <div class="demo-content">
                <h4>ğŸ“‹ è£å‰ªåŒºåŸŸé¢„è§ˆ:</h4>
                <div id="advanced3-area" class="crop-preview">
                  <div class="crop-grid">
                    <div class="crop-cell" v-for="i in 9" :key="i">{{ i }}</div>
                  </div>
                  <div
                    class="crop-indicator"
                    :style="{ left: cropX + 'px', top: cropY + 'px' }"
                  ></div>
                </div>
                <p class="note">çº¢æ¡†è¡¨ç¤ºå°†è¦æˆªå–çš„åŒºåŸŸ (ä» x:{{ cropX }}, y:{{ cropY }} å¼€å§‹)</p>
              </div>
            </div>

            <!-- é«˜çº§4: æ—¥å¿—å’Œè°ƒè¯• -->
            <div v-else-if="currentAdvanced === 3">
              <h3>é«˜çº§ 4: æ—¥å¿—å’Œè°ƒè¯•</h3>
              <p>å¯ç”¨æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•æˆªå›¾é—®é¢˜ã€‚</p>

              <div class="controls">
                <label> <input v-model="enableLogging" type="checkbox" /> å¯ç”¨æ—¥å¿— </label>
                <button @click="advanced4Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ” è°ƒè¯•æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  logging: true,  // å¯ç”¨æ§åˆ¶å°æ—¥å¿—

  // è‡ªå®šä¹‰æ—¥å¿—å‡½æ•°
  onclone: (clonedDoc, element) =&gt; {
    console.log('å…‹éš†çš„å…ƒç´ :', element)
    console.log('å…‹éš†çš„æ–‡æ¡£:', clonedDoc)
  }
})

// å¸¸è§è°ƒè¯•é—®é¢˜:
// 1. å…ƒç´ æœªæ¸²æŸ“ - æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯è§
// 2. æ ·å¼ä¸¢å¤± - æ£€æŸ¥CSSæ˜¯å¦è¢«æ­£ç¡®åº”ç”¨
// 3. å›¾ç‰‡ç©ºç™½ - æ£€æŸ¥è·¨åŸŸè®¾ç½®</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p><strong>è°ƒè¯•æç¤º:</strong></p>
                  <ul style="text-align: left; margin-left: 1rem">
                    <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—è¾“å‡º</li>
                    <li>logging: true ä¼šè¾“å‡ºè¯¦ç»†çš„æ¸²æŸ“è¿‡ç¨‹</li>
                    <li>onclone å›è°ƒå¯ç”¨äºæ£€æŸ¥å…‹éš†çš„DOM</li>
                  </ul>
                  <p>å½“å‰æ—¥å¿—çŠ¶æ€: {{ enableLogging ? 'âœ… å·²å¯ç”¨' : 'âŒ å·²ç¦ç”¨' }}</p>
                </div>
              </div>
            </div>

            <!-- é«˜çº§5: çª—å£å°ºå¯¸æ§åˆ¶ -->
            <div v-else-if="currentAdvanced === 4">
              <h3>é«˜çº§ 5: çª—å£å°ºå¯¸æ§åˆ¶</h3>
              <p>æ§åˆ¶æˆªå›¾æ—¶çš„è™šæ‹Ÿçª—å£å°ºå¯¸ï¼Œè§£å†³å“åº”å¼å¸ƒå±€é—®é¢˜ã€‚</p>

              <div class="controls">
                <label>
                  çª—å£å®½åº¦:
                  <select v-model.number="windowWidth" class="select-input">
                    <option :value="375">375px (æ‰‹æœº)</option>
                    <option :value="768">768px (å¹³æ¿)</option>
                    <option :value="1024">1024px (ç¬”è®°æœ¬)</option>
                    <option :value="1920">1920px (æ¡Œé¢)</option>
                  </select>
                </label>
                <button @click="advanced5Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'ğŸ“± å“åº”å¼æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  windowWidth: 1920,   // è™šæ‹Ÿçª—å£å®½åº¦
  windowHeight: 1080,  // è™šæ‹Ÿçª—å£é«˜åº¦
  scrollX: 0,
  scrollY: -window.scrollY // è¡¥å¿æ»šåŠ¨ä½ç½®
})</code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p><strong>å½“å‰è®¾ç½®:</strong> {{ windowWidth }}px å®½åº¦</p>
                  <div class="responsive-demo" :style="{ maxWidth: windowWidth + 'px' }">
                    <p>è¿™æ˜¯å“åº”å¼å†…å®¹åŒºåŸŸ</p>
                    <p style="font-size: 0.8rem; color: #718096">å®½åº¦ä¼šæ ¹æ®è®¾ç½®è°ƒæ•´</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- é«˜çº§6: æ€§èƒ½ä¼˜åŒ– -->
            <div v-else-if="currentAdvanced === 5">
              <h3>é«˜çº§ 6: æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
              <p>ä¼˜åŒ–html2canvasçš„æ€§èƒ½ï¼Œå‡å°‘å†…å­˜å ç”¨å’Œæ¸²æŸ“æ—¶é—´ã€‚</p>

              <div class="controls">
                <button @click="advanced6Generate" class="btn btn-primary" :disabled="loading">
                  {{ loading ? 'â³ æˆªå›¾ä¸­...' : 'âš¡ ä¼˜åŒ–æˆªå›¾' }}
                </button>
              </div>

              <div class="code-display">
                <h4>ä»£ç ç¤ºä¾‹:</h4>
                <pre v-pre><code>const canvas = await html2canvas(element, {
  // æ€§èƒ½ä¼˜åŒ–é€‰é¡¹
  scale: 1,           // é™ä½scaleå‡å°‘å†…å­˜
  logging: false,     // å…³é—­æ—¥å¿—æå‡æ€§èƒ½
  imageTimeout: 5000, // å›¾ç‰‡åŠ è½½è¶…æ—¶
  removeContainer: true, // æ¸²æŸ“åç§»é™¤å…‹éš†å®¹å™¨

  // å¿½ç•¥ä¸éœ€è¦çš„å…ƒç´ 
  ignoreElements: (el) =&gt; {
    return el.tagName === 'SCRIPT' ||
           el.tagName === 'NOSCRIPT' ||
           el.classList.contains('no-capture')
  }
})

// ä¼˜åŒ–å»ºè®®:
// 1. å‡å°æˆªå›¾åŒºåŸŸ
// 2. é™ä½scaleå€¼
// 3. ä½¿ç”¨JPEGæ ¼å¼ï¼ˆä½“ç§¯æ›´å°ï¼‰
// 4. è¿‡æ»¤æ— å…³å…ƒç´ </code></pre>
              </div>

              <div class="demo-content">
                <div class="preview-box">
                  <p><strong>æ€§èƒ½ä¼˜åŒ–å»ºè®®:</strong></p>
                  <table class="mini-table">
                    <tr>
                      <th>ä¼˜åŒ–é¡¹</th>
                      <th>æ•ˆæœ</th>
                    </tr>
                    <tr>
                      <td>scale: 1</td>
                      <td>å‡å°‘50%å†…å­˜</td>
                    </tr>
                    <tr>
                      <td>logging: false</td>
                      <td>æå‡10%é€Ÿåº¦</td>
                    </tr>
                    <tr>
                      <td>è¿‡æ»¤å…ƒç´ </td>
                      <td>å‡å°‘æ¸²æŸ“æ—¶é—´</td>
                    </tr>
                    <tr>
                      <td>JPEGæ ¼å¼</td>
                      <td>å‡å°‘70%ä½“ç§¯</td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- åŸæœ‰å¿«æ·æŒ‰é’® -->
        <div class="divider"></div>

        <div class="controls">
          <button @click="captureToImage" class="btn btn-primary">ğŸ“¸ æˆªå›¾è½¬å›¾ç‰‡</button>
          <button @click="captureToPDF" class="btn btn-secondary">ğŸ“„ æˆªå›¾è½¬PDF</button>
          <button @click="captureWithOptions" class="btn btn-info">âš™ï¸ é«˜è´¨é‡æˆªå›¾</button>
        </div>

        <div id="capture-area" class="capture-content">
          <div class="demo-card">
            <div class="card-header">
              <h2>ğŸ¨ html2canvas æ¼”ç¤º</h2>
              <span class="badge">é«˜è´¨é‡</span>
            </div>

            <div class="card-body">
              <p class="intro">
                html2canvas å¯ä»¥å°† HTML å…ƒç´ æ¸²æŸ“ä¸º Canvasï¼Œ å®ç°æ‰€è§å³æ‰€å¾—çš„æˆªå›¾æ•ˆæœã€‚
              </p>

              <div class="feature-grid">
                <div class="feature-item">
                  <div class="icon">âœ…</div>
                  <h4>æ ·å¼è¿˜åŸ</h4>
                  <p>å®Œç¾ä¿ç•™CSSæ ·å¼</p>
                </div>
                <div class="feature-item">
                  <div class="icon">ğŸ¯</div>
                  <h4>ç²¾ç¡®æ¸²æŸ“</h4>
                  <p>å‡†ç¡®æ•è·DOMç»“æ„</p>
                </div>
                <div class="feature-item">
                  <div class="icon">ğŸ–¼ï¸</div>
                  <h4>å›¾ç‰‡å¯¼å‡º</h4>
                  <p>æ”¯æŒPNG/JPEGæ ¼å¼</p>
                </div>
                <div class="feature-item">
                  <div class="icon">ğŸ“Š</div>
                  <h4>å›¾è¡¨æ”¯æŒ</h4>
                  <p>é€‚åˆæˆªå–å¯è§†åŒ–å†…å®¹</p>
                </div>
              </div>

              <div class="chart-demo">
                <h3>ğŸ“ˆ æ•°æ®å›¾è¡¨ç¤ºä¾‹</h3>
                <div class="bar-chart">
                  <div class="bar" style="width: 80%; background: #667eea">
                    <span>æ€§èƒ½ 80%</span>
                  </div>
                  <div class="bar" style="width: 95%; background: #48bb78">
                    <span>è´¨é‡ 95%</span>
                  </div>
                  <div class="bar" style="width: 65%; background: #ed8936">
                    <span>é€Ÿåº¦ 65%</span>
                  </div>
                  <div class="bar" style="width: 90%; background: #4299e1">
                    <span>æ˜“ç”¨æ€§ 90%</span>
                  </div>
                </div>
              </div>

              <div class="gradient-box">
                <h3>ğŸ¨ æ¸å˜å’Œé˜´å½±æµ‹è¯•</h3>
                <p>è¿™ä¸ªåŒºåŸŸæœ‰æ¸å˜èƒŒæ™¯ã€é˜´å½±ã€åœ†è§’ç­‰CSSæ•ˆæœ</p>
              </div>
            </div>
          </div>
        </div>

        <div v-if="capturedImage" class="result-area">
          <h3>ğŸ“¸ æ•è·ç»“æœ</h3>
          <img :src="capturedImage" alt="Captured" class="captured-img" />
        </div>

        <div class="code-examples">
          <h3>ğŸ’» ä»£ç ç¤ºä¾‹</h3>

          <div class="code-block">
            <h4>1. åŸºç¡€ç”¨æ³•</h4>
            <pre><code>import html2canvas from 'html2canvas';

// æˆªå–å…ƒç´ 
const element = document.getElementById('capture');
html2canvas(element).then(canvas => {
  document.body.appendChild(canvas);

  // æˆ–è½¬ä¸ºå›¾ç‰‡
  const img = canvas.toDataURL('image/png');
});</code></pre>
          </div>

          <div class="code-block">
            <h4>2. é…ç½®é€‰é¡¹</h4>
            <pre><code>html2canvas(element, {
  backgroundColor: '#ffffff',
  scale: 2,              // æé«˜æ¸…æ™°åº¦
  useCORS: true,         // å…è®¸è·¨åŸŸå›¾ç‰‡
  logging: false,        // å…³é—­æ—¥å¿—
  width: 800,
  height: 600,
  x: 0,
  y: 0
}).then(canvas => {
  // å¤„ç† canvas
});</code></pre>
          </div>

          <div class="code-block">
            <h4>3. ä¿å­˜ä¸ºå›¾ç‰‡</h4>
            <pre><code>html2canvas(element).then(canvas => {
  // è½¬ä¸º blob
  canvas.toBlob(blob => {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'screenshot.png';
    a.click();
  });
});</code></pre>
          </div>

          <div class="code-block">
            <h4>4. ç»“åˆ jsPDF ç”ŸæˆPDF</h4>
            <pre><code>import html2canvas from 'html2canvas';
import { jsPDF } from 'jspdf';

html2canvas(element).then(canvas => {
  const imgData = canvas.toDataURL('image/png');
  const pdf = new jsPDF();

  const imgWidth = 210; // A4å®½åº¦(mm)
  const imgHeight = (canvas.height * imgWidth) / canvas.width;

  pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
  pdf.save('document.pdf');
});</code></pre>
          </div>

          <div class="code-block">
            <h4>5. å¤„ç†å¤šé¡µ</h4>
            <pre><code>async function captureLongPage(element) {
  const canvas = await html2canvas(element);
  const pdf = new jsPDF();
  const imgData = canvas.toDataURL('image/png');

  const pageHeight = 295; // A4é«˜åº¦(mm)
  const imgWidth = 210;
  const imgHeight = (canvas.height * imgWidth) / canvas.width;
  let heightLeft = imgHeight;
  let position = 0;

  pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
  heightLeft -= pageHeight;

  while (heightLeft > 0) {
    position = heightLeft - imgHeight;
    pdf.addPage();
    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
    heightLeft -= pageHeight;
  }

  pdf.save('long-page.pdf');
}</code></pre>
          </div>

          <div class="code-block">
            <h4>6. è¿‡æ»¤ç‰¹å®šå…ƒç´ </h4>
            <pre><code>html2canvas(element, {
  ignoreElements: (element) => {
    // å¿½ç•¥ç‰¹å®šç±»çš„å…ƒç´ 
    return element.classList.contains('no-capture');
  }
}).then(canvas => {
  // ...
});</code></pre>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, watch, nextTick } from 'vue'
import html2canvas from 'html2canvas'
import { jsPDF } from 'jspdf'
import * as echarts from 'echarts'
import type { ECharts } from 'echarts'

const capturedImage = ref('')
const loading = ref(false)
const currentExample = ref(0)
const scaleValue = ref(2)
const bgColor = ref('#ffffff')
const imageFormat = ref('image/png')

// ECharts refs
const html2canvasChartRef = ref<HTMLDivElement>()
let html2canvasChart: ECharts | null = null

// ç¤ºä¾‹æ ‡ç­¾
const examples = [
  'åŸºç¡€æˆªå›¾',
  'é«˜æ¸…æˆªå›¾',
  'æˆªå›¾è½¬PDF',
  'è‡ªå®šä¹‰èƒŒæ™¯',
  'è¿‡æ»¤å…ƒç´ ',
  'è·å–Blob',
  'EChartså›¾è¡¨',
]

// ==================== åŸºç¡€åŠŸèƒ½ç¤ºä¾‹ ====================

// ç¤ºä¾‹1: åŸºç¡€æˆªå›¾ï¼ˆæ‰“å°é¢„è§ˆï¼‰
const example1Generate = async () => {
  const element = document.getElementById('example1-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    // åˆ›å»ºæ‰“å°çª—å£
    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°æˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹2: é«˜æ¸…æˆªå›¾
const example2Generate = async () => {
  const element = document.getElementById('example2-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      scale: scaleValue.value,
      backgroundColor: null, // ä¿ç•™æ¸å˜
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°é«˜æ¸…æˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹3: æˆªå›¾è½¬PDF
const example3Generate = async () => {
  const element = document.getElementById('example3-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      scale: 2,
      backgroundColor: '#ffffff',
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    const pdf = new jsPDF()

    const imgWidth = 190
    const imgHeight = (canvas.height * imgWidth) / canvas.width

    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight)

    // æ‰“å°è€Œéä¸‹è½½
    const blob = pdf.output('blob')
    const blobUrl = URL.createObjectURL(blob)
    const iframe = document.createElement('iframe')
    iframe.style.display = 'none'
    iframe.src = blobUrl
    document.body.appendChild(iframe)

    iframe.onload = () => {
      setTimeout(() => {
        try {
          iframe.contentWindow?.print()

          const cleanup = () => {
            setTimeout(() => {
              document.body.removeChild(iframe)
              URL.revokeObjectURL(blobUrl)
            }, 500)
          }

          iframe.contentWindow?.addEventListener('afterprint', cleanup, { once: true })
          setTimeout(cleanup, 300000)
        } catch (e) {
          console.error('æ‰“å°å¤±è´¥:', e)
        }
      }, 200)
    }

    capturedImage.value = imgData
  } catch (error) {
    console.error('ç”ŸæˆPDFå¤±è´¥:', error)
    alert('âŒ ç”ŸæˆPDFå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹4: è‡ªå®šä¹‰èƒŒæ™¯è‰²ï¼ˆæ‰“å°é¢„è§ˆï¼‰
const example4Generate = async () => {
  const element = document.getElementById('example4-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      backgroundColor: bgColor.value,
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°è‡ªå®šä¹‰èƒŒæ™¯</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; background: ${bgColor.value}; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹5: è¿‡æ»¤å…ƒç´ 
const example5Generate = async () => {
  const element = document.getElementById('example5-area')
  if (!element) return

  loading.value = true
  try {
    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      ignoreElements: (el) => {
        return el.classList.contains('no-capture')
      },
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const link = document.createElement('a')
    link.href = imgData
    link.download = 'filtered-screenshot.png'
    link.click()
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹6: è·å–Blob
const example6Generate = async () => {
  const element = document.getElementById('example6-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL(imageFormat.value, 0.9)
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°Blobæ ¼å¼</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('ç”Ÿæˆå¤±è´¥:', error)
    alert('âŒ ç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ç¤ºä¾‹7: EChartsæˆªå›¾
const initHtml2canvasChart = () => {
  if (html2canvasChartRef.value) {
    // å¦‚æœå›¾è¡¨å·²å­˜åœ¨ï¼Œå…ˆé”€æ¯
    if (html2canvasChart) {
      html2canvasChart.dispose()
      html2canvasChart = null
    }

    // é‡æ–°åˆå§‹åŒ–å›¾è¡¨
    html2canvasChart = echarts.init(html2canvasChartRef.value)
    html2canvasChart.setOption({
      title: {
        text: 'é”€å”®æ•°æ®åˆ†æ',
        left: 'center',
      },
      tooltip: {
        trigger: 'item',
      },
      legend: {
        orient: 'vertical',
        left: 'left',
      },
      series: [
        {
          name: 'é”€å”®é¢',
          type: 'pie',
          radius: '50%',
          data: [
            { value: 1048, name: 'æ‰‹æœº' },
            { value: 735, name: 'ç”µè„‘' },
            { value: 580, name: 'å¹³æ¿' },
            { value: 484, name: 'æ‰‹è¡¨' },
            { value: 300, name: 'è€³æœº' },
          ],
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)',
            },
          },
        },
      ],
    })
  }
}

const example7Generate = async () => {
  const element = document.getElementById('example7-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…EChartså®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 500))

    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      scale: 2,
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°EChartså›¾è¡¨</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// Watch currentExample to initialize chart
watch(currentExample, async (newVal) => {
  if (newVal === 6) {
    await nextTick()
    initHtml2canvasChart()
  }
})

// ==================== é«˜çº§åŠŸèƒ½ç¤ºä¾‹ ====================

const currentAdvanced = ref(0)
const advancedExamples = ['é•¿é¡µé¢åˆ†é¡µ', 'è·¨åŸŸå›¾ç‰‡', 'è£å‰ªåŒºåŸŸ', 'æ—¥å¿—è°ƒè¯•', 'çª—å£å°ºå¯¸', 'æ€§èƒ½ä¼˜åŒ–']

const cropX = ref(20)
const cropY = ref(20)
const enableLogging = ref(false)
const windowWidth = ref(1024)
const jpegQuality = ref(0.8)

// é«˜çº§1: é•¿é¡µé¢åˆ†é¡µæˆªå›¾
const advanced1Generate = async () => {
  const element = document.getElementById('advanced1-area')
  if (!element) return

  loading.value = true
  try {
    const canvas = await html2canvas(element, {
      scale: 2,
      backgroundColor: '#ffffff',
    })

    const imgData = canvas.toDataURL('image/png')
    const pdf = new jsPDF()

    const pageHeight = 295
    const imgWidth = 190
    const imgHeight = (canvas.height * imgWidth) / canvas.width
    let heightLeft = imgHeight
    let position = 0

    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight)
    heightLeft -= pageHeight

    while (heightLeft > 0) {
      position = heightLeft - imgHeight
      pdf.addPage()
      pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight)
      heightLeft -= pageHeight
    }

    // æ‰“å°PDFè€Œéä¸‹è½½
    const blob = pdf.output('blob')
    const blobUrl = URL.createObjectURL(blob)
    const iframe = document.createElement('iframe')
    iframe.style.display = 'none'
    iframe.src = blobUrl
    document.body.appendChild(iframe)

    iframe.onload = () => {
      setTimeout(() => {
        try {
          iframe.contentWindow?.print()
        } catch (e) {
          console.error('æ‰“å°å¤±è´¥:', e)
        }
      }, 100)
    }

    // æ¸…ç†
    setTimeout(() => {
      try {
        document.body.removeChild(iframe)
        URL.revokeObjectURL(blobUrl)
      } catch (e) {}
    }, 3000)

    capturedImage.value = imgData
  } catch (error) {
    console.error('ç”Ÿæˆå¤±è´¥:', error)
    alert('âŒ ç”Ÿæˆå¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// é«˜çº§2: è·¨åŸŸå›¾ç‰‡å¤„ç†
const advanced2Generate = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      useCORS: true,
      allowTaint: false,
      backgroundColor: '#ffffff',
      scale: 2,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°è·¨åŸŸå›¾ç‰‡</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// é«˜çº§3: è‡ªå®šä¹‰æ¸²æŸ“åŒºåŸŸï¼ˆæ‰“å°é¢„è§ˆï¼‰
const advanced3Generate = async () => {
  const element = document.getElementById('advanced3-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      x: cropX.value,
      y: cropY.value,
      width: 150,
      height: 100,
      backgroundColor: '#ffffff',
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°è£å‰ªæˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// é«˜çº§4: æ—¥å¿—å’Œè°ƒè¯•ï¼ˆæ‰“å°é¢„è§ˆï¼‰
const advanced4Generate = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  loading.value = true
  try {
    console.log('å¼€å§‹è°ƒè¯•æˆªå›¾...')
    // ç­‰å¾…DOMå®Œå…¨æ¸¨æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      logging: enableLogging.value,
      backgroundColor: '#ffffff',
      scale: 2,
      useCORS: true,
      allowTaint: false,
      onclone: (clonedDoc, el) => {
        if (enableLogging.value) {
          console.log('å…‹éš†çš„å…ƒç´ :', el)
          console.log('å…ƒç´ å°ºå¯¸:', el.offsetWidth, 'x', el.offsetHeight)
        }
      },
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°è°ƒè¯•æˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// é«˜çº§5: çª—å£å°ºå¯¸æ§åˆ¶
const advanced5Generate = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  loading.value = true
  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      windowWidth: windowWidth.value,
      windowHeight: 800,
      backgroundColor: '#ffffff',
      scale: 2,
      useCORS: true,
      allowTaint: false,
      logging: false,
    })

    const imgData = canvas.toDataURL('image/png')
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°å“åº”å¼æˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// é«˜çº§6: æ€§èƒ½ä¼˜åŒ–
const advanced6Generate = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  loading.value = true
  const startTime = performance.now()

  try {
    // ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“
    await new Promise((resolve) => setTimeout(resolve, 300))

    const canvas = await html2canvas(element, {
      scale: 1,
      logging: false,
      imageTimeout: 5000,
      removeContainer: true,
      backgroundColor: '#ffffff',
      useCORS: true,
      allowTaint: false,
      ignoreElements: (el) => {
        return (
          el.tagName === 'SCRIPT' ||
          el.tagName === 'NOSCRIPT' ||
          el.classList.contains('no-capture')
        )
      },
    })

    const endTime = performance.now()
    const imgData = canvas.toDataURL('image/jpeg', jpegQuality.value)
    capturedImage.value = imgData

    const printWindow = window.open('', '_blank')
    if (printWindow) {
      printWindow.document.write(`
        <html>
          <head>
            <title>æ‰“å°ä¼˜åŒ–æˆªå›¾</title>
            <style>
              body { margin: 0; padding: 20px; text-align: center; }
              img { max-width: 100%; height: auto; }
            </style>
          </head>
          <body>
            <img src="${imgData}" onload="window.print()" />
          </body>
        </html>
      `)
      printWindow.document.close()
    }

    const fileSize = ((imgData.length * 0.75) / 1024).toFixed(2)
    console.log(
      `ä¼˜åŒ–æˆªå›¾æ‰“å°é¢„è§ˆæˆåŠŸï¼è€—æ—¶: ${(endTime - startTime).toFixed(0)}msï¼Œæ–‡ä»¶å¤§å°: ~${fileSize}KB`,
    )
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
    alert('âŒ æˆªå›¾å¤±è´¥: ' + error)
  } finally {
    loading.value = false
  }
}

// ==================== åŸæœ‰å¿«æ·åŠŸèƒ½ ====================

const captureToImage = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  try {
    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      scale: 2,
    })

    capturedImage.value = canvas.toDataURL('image/png')

    // ä¸‹è½½å›¾ç‰‡
    const a = document.createElement('a')
    a.href = capturedImage.value
    a.download = 'html2canvas-capture.png'
    a.click()
  } catch (error) {
    console.error('æˆªå›¾å¤±è´¥:', error)
  }
}

const captureToPDF = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  try {
    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      scale: 2,
    })

    const imgData = canvas.toDataURL('image/png')
    const pdf = new jsPDF()

    const imgWidth = 210
    const imgHeight = (canvas.height * imgWidth) / canvas.width

    pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight)
    pdf.save('html2canvas-capture.pdf')

    capturedImage.value = imgData
  } catch (error) {
    console.error('ç”ŸæˆPDFå¤±è´¥:', error)
  }
}

const captureWithOptions = async () => {
  const element = document.getElementById('capture-area')
  if (!element) return

  try {
    const canvas = await html2canvas(element, {
      backgroundColor: '#ffffff',
      scale: 3, // æ›´é«˜æ¸…æ™°åº¦
      useCORS: true,
      logging: false,
      windowWidth: element.scrollWidth,
      windowHeight: element.scrollHeight,
    })

    capturedImage.value = canvas.toDataURL('image/jpeg', 0.95)

    // ä¸‹è½½
    const a = document.createElement('a')
    a.href = capturedImage.value
    a.download = 'high-quality-capture.jpg'
    a.click()
  } catch (error) {
    console.error('é«˜è´¨é‡æˆªå›¾å¤±è´¥:', error)
  }
}
</script>

<style scoped>
.demo-page {
  max-width: 1600px;
  margin: 0 auto;
  padding: 2rem;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e2e8f0;
}

.page-header h1 {
  color: #2d3748;
}

.back-link {
  color: #667eea;
  text-decoration: none;
  font-weight: 500;
}

.back-link:hover {
  text-decoration: underline;
}

.content-grid {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 2rem;
}

.info-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  height: fit-content;
  position: sticky;
  top: 2rem;
}

.info-panel h2 {
  color: #667eea;
  margin-bottom: 1.5rem;
}

.info-section {
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}

.info-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.info-section h3 {
  color: #2d3748;
  font-size: 1rem;
  margin-bottom: 0.75rem;
}

.info-section ul {
  list-style: none;
  padding: 0;
}

.info-section li {
  padding: 0.25rem 0;
  font-size: 0.9rem;
}

.info-section p {
  margin: 0.5rem 0;
  font-size: 0.9rem;
}

.rating {
  color: #667eea;
  font-weight: 600;
}

.highlight {
  font-size: 1.5rem;
  font-weight: 700;
  color: #4299e1;
}

.demo-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #667eea;
  color: white;
}

.btn-primary:hover {
  background: #5568d3;
}

.btn-secondary {
  background: #48bb78;
  color: white;
}

.btn-secondary:hover {
  background: #38a169;
}

.btn-info {
  background: #4299e1;
  color: white;
}

.btn-info:hover {
  background: #3182ce;
}

.capture-content {
  background: #f7fafc;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.demo-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.card-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card-header h2 {
  margin: 0;
  font-size: 1.5rem;
}

.badge {
  background: rgba(255, 255, 255, 0.3);
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.85rem;
}

.card-body {
  padding: 2rem;
}

.intro {
  font-size: 1.1rem;
  color: #4a5568;
  line-height: 1.8;
  margin-bottom: 2rem;
}

.feature-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.feature-item {
  text-align: center;
  padding: 1.5rem;
  background: #f7fafc;
  border-radius: 8px;
  transition: transform 0.3s;
}

.feature-item:hover {
  transform: translateY(-4px);
}

.feature-item .icon {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.feature-item h4 {
  color: #2d3748;
  margin: 0.5rem 0;
}

.feature-item p {
  color: #718096;
  font-size: 0.9rem;
  margin: 0;
}

.chart-demo {
  background: #f7fafc;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 2rem;
}

.chart-demo h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.bar-chart {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.bar {
  height: 40px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  padding-left: 1rem;
  color: white;
  font-weight: 600;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: width 0.3s;
}

.gradient-box {
  background: linear-gradient(135deg, #667eea15, #764ba215);
  border: 2px solid #667eea;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.gradient-box h3 {
  color: #667eea;
  margin-bottom: 0.75rem;
}

.gradient-box p {
  color: #4a5568;
  margin: 0;
}

.result-area {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.result-area h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.captured-img {
  max-width: 100%;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.code-examples {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.code-examples h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.code-block {
  margin-bottom: 1.5rem;
}

.code-block h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
}

.code-block pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0;
}

.code-block code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}

/* ç¤ºä¾‹å±•ç¤ºåŒºåŸŸæ ·å¼ */
.examples-section {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.section-title {
  color: #667eea;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #667eea;
}

.example-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.tab-button {
  padding: 0.5rem 1rem;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.9rem;
}

.tab-button:hover {
  background: #f7fafc;
  border-color: #667eea;
}

.tab-button.active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

.example-content {
  background: #f7fafc;
  border-radius: 8px;
  padding: 1.5rem;
}

.example-content h3 {
  color: #2d3748;
  margin-bottom: 0.75rem;
}

.example-content > p {
  color: #4a5568;
  margin-bottom: 1rem;
}

.code-display {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 1rem;
  margin: 1rem 0;
}

.code-display h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.code-display pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0;
  font-size: 0.85rem;
  line-height: 1.5;
}

.demo-content {
  margin-top: 1rem;
}

.demo-content h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.capture-preview {
  background: white;
  border: 2px dashed #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  min-height: 120px;
}

.preview-card {
  background: #f7fafc;
  border-radius: 8px;
  padding: 1rem;
  text-align: center;
}

.preview-card h4 {
  color: #667eea;
  margin-bottom: 0.5rem;
}

.preview-badge {
  display: inline-block;
  background: #667eea;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  margin-top: 0.5rem;
}

.mini-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 0.5rem;
  font-size: 0.9rem;
}

.mini-table th,
.mini-table td {
  border: 1px solid #e2e8f0;
  padding: 0.5rem;
  text-align: center;
}

.mini-table th {
  background: #667eea;
  color: white;
}

.select-input {
  padding: 0.5rem;
  border: 1px solid #cbd5e0;
  border-radius: 4px;
  margin: 0 0.5rem;
}

.color-input {
  padding: 0.25rem;
  border: 1px solid #cbd5e0;
  border-radius: 4px;
  margin: 0 0.5rem;
  width: 60px;
  height: 36px;
  cursor: pointer;
}

.note {
  color: #718096;
  font-size: 0.9rem;
  font-style: italic;
  margin-top: 0.75rem;
}

.divider {
  height: 1px;
  background: linear-gradient(to right, transparent, #e2e8f0, transparent);
  margin: 2rem 0;
}

/* é«˜çº§åŠŸèƒ½æ ·å¼ */
.advanced-section {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.long-content-preview {
  background: white;
  border: 2px dashed #e2e8f0;
  border-radius: 8px;
  padding: 1rem;
  max-height: 200px;
  overflow-y: auto;
}

.preview-section {
  background: #f7fafc;
  border-radius: 4px;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
}

.preview-section h5 {
  color: #667eea;
  margin-bottom: 0.25rem;
}

.preview-box {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 1.5rem;
}

.number-input {
  padding: 0.5rem;
  border: 1px solid #cbd5e0;
  border-radius: 4px;
  margin: 0 0.5rem;
  width: 80px;
  text-align: center;
}

.crop-preview {
  background: white;
  border: 2px dashed #e2e8f0;
  border-radius: 8px;
  padding: 1rem;
  position: relative;
  min-height: 150px;
}

.crop-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
}

.crop-cell {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  padding: 1rem;
  text-align: center;
  border-radius: 4px;
}

.crop-indicator {
  position: absolute;
  width: 150px;
  height: 100px;
  border: 2px solid #e53e3e;
  background: rgba(229, 62, 62, 0.1);
  pointer-events: none;
}

.responsive-demo {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  margin-top: 1rem;
  transition: max-width 0.3s ease;
}

/* æ¡†æ¶ç‰¹ç‚¹è¯´æ˜æ ·å¼ */
.framework-highlight {
  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  color: #1a202c;
  padding: 1.2rem;
  border-radius: 8px;
  margin: 1rem 0;
  line-height: 2;
  border: 2px solid #4facfe;
}

.framework-highlight strong {
  font-weight: 700;
  color: #2d3748;
}

.framework-highlight .advantage {
  color: #22543d;
  font-weight: 700;
  background: rgba(154, 230, 180, 0.3);
  padding: 2px 6px;
  border-radius: 4px;
}

.framework-highlight .disadvantage {
  color: #742a2a;
  font-weight: 700;
  background: rgba(254, 178, 178, 0.3);
  padding: 2px 6px;
  border-radius: 4px;
}
</style>
