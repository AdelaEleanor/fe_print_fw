<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>ğŸŒ æµè§ˆå™¨åŸç”Ÿæ‰“å°</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>æ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹åº“</strong></p>
          <p>çº¯æµè§ˆå™¨åŸç”ŸAPI</p>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ å…¼å®¹æ€§</h3>
          <ul>
            <li>âœ… Chrome 1+</li>
            <li>âœ… Firefox 1+</li>
            <li>âœ… Safari 1+</li>
            <li>âœ… Edge All</li>
            <li>âœ… IE 5+</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­â­ (100%)</p>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½</h3>
          <ul>
            <li>âœ… é›¶åŠ è½½æ—¶é—´</li>
            <li>âœ… æ— å†…å­˜å¼€é”€</li>
            <li>âœ… çŸ¢é‡è¾“å‡º</li>
            <li>âœ… åŸç”Ÿæ¸²æŸ“</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“‘ åˆ†é¡µæ§åˆ¶</h3>
          <ul>
            <li>âœ… page-break-before</li>
            <li>âœ… page-break-after</li>
            <li>âœ… page-break-inside</li>
            <li>âœ… break-before (æ–°)</li>
            <li>âœ… break-after (æ–°)</li>
            <li>âš ï¸ ä¾èµ–æµè§ˆå™¨å®ç°</li>
          </ul>
          <p class="rating">è¯„åˆ†: â­â­â­â­</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“ æ–‡ä»¶å¤§å°</h3>
          <p class="highlight">0 KB</p>
          <p>æ— éœ€å¼•å…¥ä»»ä½•åº“</p>
        </div>

        <div class="info-section">
          <h3>ğŸ“š å­¦ä¹ æ›²çº¿</h3>
          <p class="rating">â­â­â­â­</p>
          <p>éœ€è¦æŒæ¡ CSS æ‰“å°æ ·å¼</p>
        </div>

        <div class="info-section">
          <h3>âœ¨ ä¼˜åŠ¿</h3>
          <ul>
            <li>æ— ä¾èµ–ï¼Œè½»é‡çº§</li>
            <li>æµè§ˆå™¨åŸç”Ÿæ”¯æŒ</li>
            <li>ç”¨æˆ·å¯é¢„è§ˆå’Œé…ç½®</li>
            <li>çŸ¢é‡è¾“å‡ºï¼Œè´¨é‡é«˜</li>
            <li>é€‚åˆç®€å•æ–‡æ¡£</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âš ï¸ åŠ£åŠ¿</h3>
          <ul>
            <li>æ ·å¼è°ƒè¯•å¤æ‚</li>
            <li>è·¨æµè§ˆå™¨å·®å¼‚</li>
            <li>ç”¨æˆ·å¯èƒ½å–æ¶ˆæ‰“å°</li>
            <li>æ— æ³•ç›´æ¥ç”ŸæˆPDF</li>
            <li>åˆ†é¡µæ§åˆ¶æœ‰é™</li>
          </ul>
        </div>
      </aside>

      <main class="demo-panel">
        <div class="controls">
          <button @click="handlePrint" class="btn btn-primary">ğŸ–¨ï¸ æ‰“å°é¢„è§ˆ</button>
          <button @click="handlePrintDirect" class="btn btn-secondary">âš¡ ç›´æ¥æ‰“å°</button>
          <button @click="handlePrintSelected" class="btn btn-info">ğŸ“„ æ‰“å°æŒ‡å®šåŒºåŸŸ</button>
        </div>

        <div id="print-content" class="print-content">
          <div class="document">
            <header class="doc-header">
              <h1>å‰ç«¯æ‰“å°æŠ€æœ¯è°ƒç ”æŠ¥å‘Š</h1>
              <p class="doc-meta">æŠ¥å‘Šæ—¥æœŸ: {{ currentDate }}</p>
            </header>

            <section class="doc-section">
              <h2>ä¸€ã€æ¦‚è¿°</h2>
              <p>æœ¬æŠ¥å‘Šæ—¨åœ¨å…¨é¢è°ƒç ”å’Œå¯¹æ¯”å½“å‰ä¸»æµçš„å‰ç«¯æ‰“å°æŠ€æœ¯æ–¹æ¡ˆï¼Œä¸ºé¡¹ç›®é€‰å‹æä¾›å‚è€ƒä¾æ®ã€‚</p>
              <p>
                éšç€Webåº”ç”¨çš„æ™®åŠï¼Œå‰ç«¯æ‰“å°éœ€æ±‚æ—¥ç›Šå¢é•¿ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šè®¢å•æ‰“å°ã€æŠ¥è¡¨ç”Ÿæˆã€
                åˆåŒæ‰“å°ã€å‘ç¥¨æ‰“å°ç­‰åœºæ™¯ã€‚
              </p>
            </section>

            <section class="doc-section page-break">
              <h2>äºŒã€æµè§ˆå™¨åŸç”Ÿæ‰“å°</h2>
              <h3>2.1 åŸºæœ¬åŸç†</h3>
              <p>
                æµè§ˆå™¨åŸç”Ÿæ‰“å°åŸºäº <code>window.print()</code> API å’Œ CSS
                <code>@media print</code> åª’ä½“æŸ¥è¯¢å®ç°ã€‚
              </p>

              <h3>2.2 æ ¸å¿ƒæŠ€æœ¯</h3>
              <ul>
                <li><strong>window.print()</strong>: è§¦å‘æµè§ˆå™¨æ‰“å°å¯¹è¯æ¡†</li>
                <li><strong>@media print</strong>: å®šä¹‰æ‰“å°ä¸“ç”¨æ ·å¼</li>
                <li><strong>page-break-*</strong>: æ§åˆ¶åˆ†é¡µè¡Œä¸º</li>
              </ul>

              <h3>2.3 ä»£ç ç¤ºä¾‹</h3>
              <pre><code>// JavaScript
window.print();

// CSS
@media print {
  .no-print { display: none; }
  .page-break { page-break-after: always; }
}</code></pre>
            </section>

            <section class="doc-section page-break">
              <h2>ä¸‰ã€æ€§èƒ½æ•°æ®</h2>
              <table class="data-table">
                <thead>
                  <tr>
                    <th>æŒ‡æ ‡</th>
                    <th>æ•°å€¼</th>
                    <th>å¤‡æ³¨</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>åº“ä½“ç§¯</td>
                    <td>0 KB</td>
                    <td>æ— éœ€å¼•å…¥</td>
                  </tr>
                  <tr>
                    <td>åˆå§‹åŒ–æ—¶é—´</td>
                    <td>0 ms</td>
                    <td>åŸç”ŸAPI</td>
                  </tr>
                  <tr>
                    <td>æ¸²æŸ“æ—¶é—´</td>
                    <td>&lt; 100ms</td>
                    <td>å–å†³äºå†…å®¹</td>
                  </tr>
                  <tr>
                    <td>å†…å­˜å ç”¨</td>
                    <td>æœ€å°</td>
                    <td>æµè§ˆå™¨ç®¡ç†</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <section class="doc-section page-break">
              <h2>å››ã€å…¼å®¹æ€§è¯´æ˜</h2>
              <p>
                <code>window.print()</code> æ˜¯æœ€å¤è€ã€æœ€ç¨³å®šçš„Web APIä¹‹ä¸€ï¼Œå‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€‚
              </p>
              <ul>
                <li>âœ… æ¡Œé¢æµè§ˆå™¨ï¼šå…¨éƒ¨æ”¯æŒ</li>
                <li>âœ… ç§»åŠ¨æµè§ˆå™¨ï¼šå¤§éƒ¨åˆ†æ”¯æŒ</li>
                <li>âš ï¸ å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼šéƒ¨åˆ†é™åˆ¶</li>
              </ul>
            </section>

            <section class="doc-section">
              <h2>äº”ã€æœ€ä½³å®è·µ</h2>
              <ol>
                <li>ä½¿ç”¨ <code>@media print</code> éšè—ä¸å¿…è¦å…ƒç´ </li>
                <li>åˆç†ä½¿ç”¨ <code>page-break-*</code> æ§åˆ¶åˆ†é¡µ</li>
                <li>è®¾ç½®åˆé€‚çš„é¡µè¾¹è·å’Œå­—ä½“å¤§å°</li>
                <li>æµ‹è¯•ä¸åŒæµè§ˆå™¨çš„æ‰“å°æ•ˆæœ</li>
                <li>æä¾›æ‰“å°é¢„è§ˆåŠŸèƒ½æå‡ç”¨æˆ·ä½“éªŒ</li>
              </ol>
            </section>

            <footer class="doc-footer no-print">
              <p>æ­¤åŒºåŸŸä¸ä¼šè¢«æ‰“å°ï¼ˆä½¿ç”¨äº† .no-print ç±»ï¼‰</p>
            </footer>
          </div>
        </div>

        <div class="code-examples">
          <h3>ğŸ’» ä»£ç ç¤ºä¾‹</h3>

          <div class="code-block">
            <h4>åŸºç¡€ç”¨æ³•</h4>
            <pre><code>// ç›´æ¥è§¦å‘æ‰“å°
window.print();</code></pre>
          </div>

          <div class="code-block">
            <h4>æ‰“å°æŒ‡å®šåŒºåŸŸ</h4>
            <pre><code>// æ–¹æ³•1: ä½¿ç”¨ CSS éšè—å…¶ä»–å†…å®¹
@media print {
  body > *:not(#print-area) {
    display: none !important;
  }
}

// æ–¹æ³•2: æ‰“å¼€æ–°çª—å£æ‰“å°
const printWindow = window.open('', '_blank');
printWindow.document.write(content);
printWindow.print();</code></pre>
          </div>

          <div class="code-block">
            <h4>åˆ†é¡µæ§åˆ¶</h4>
            <pre><code>/* åœ¨å…ƒç´ åå¼ºåˆ¶åˆ†é¡µ */
.page-break {
  page-break-after: always;
}

/* é¿å…å…ƒç´ è¢«åˆ†é¡µæˆªæ–­ */
.keep-together {
  page-break-inside: avoid;
}

/* æ–°æ ‡å‡† (æ¨è) */
.page-break-new {
  break-after: page;
  break-inside: avoid;
}</code></pre>
          </div>

          <div class="code-block">
            <h4>å®Œæ•´ç¤ºä¾‹ (Vue 3)</h4>
            <pre><code>import { ref } from 'vue';

const handlePrint = () => {
  window.print();
};

const handlePrintArea = () => {
  const printContent = document.getElementById('print-area');
  const originalContent = document.body.innerHTML;

  document.body.innerHTML = printContent.innerHTML;
  window.print();
  document.body.innerHTML = originalContent;

  // é‡æ–°ç»‘å®šVue (ä¸æ¨èï¼Œä»…æ¼”ç¤º)
  // æ¨èä½¿ç”¨ CSS æ–¹å¼
};</code></pre>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const currentDate = ref(new Date().toLocaleDateString('zh-CN'))

const handlePrint = () => {
  window.print()
}

const handlePrintDirect = () => {
  // ç›´æ¥æ‰“å°ï¼Œä¸æ˜¾ç¤ºé¢å¤–UI
  window.print()
}

const handlePrintSelected = () => {
  // æ‰“å°æŒ‡å®šåŒºåŸŸ
  const printContent = document.getElementById('print-content')
  if (!printContent) return

  const printWindow = window.open('', '_blank')
  if (!printWindow) return

  printWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>æ‰“å°å†…å®¹</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .doc-header { text-align: center; margin-bottom: 2rem; }
        .doc-section { margin-bottom: 2rem; }
        .page-break { page-break-after: always; }
        .no-print { display: none; }
        .data-table { width: 100%; border-collapse: collapse; }
        .data-table th, .data-table td { border: 1px solid #ddd; padding: 8px; }
        .data-table th { background: #f5f5f5; }
        code { background: #f5f5f5; padding: 2px 6px; border-radius: 3px; }
        pre { background: #f5f5f5; padding: 1rem; border-radius: 4px; overflow-x: auto; }
      </style>
    </head>
    <body>
      ${printContent.innerHTML}
    </body>
    </html>
  `)
  printWindow.document.close()
  printWindow.focus()
  setTimeout(() => {
    printWindow.print()
    printWindow.close()
  }, 250)
}
</script>

<style scoped>
.demo-page {
  max-width: 1600px;
  margin: 0 auto;
  padding: 2rem;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e2e8f0;
}

.page-header h1 {
  color: #2d3748;
}

.back-link {
  color: #667eea;
  text-decoration: none;
  font-weight: 500;
}

.back-link:hover {
  text-decoration: underline;
}

.content-grid {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 2rem;
}

.info-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  height: fit-content;
  position: sticky;
  top: 2rem;
}

.info-panel h2 {
  color: #667eea;
  margin-bottom: 1.5rem;
}

.info-section {
  margin-bottom: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}

.info-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.info-section h3 {
  color: #2d3748;
  font-size: 1rem;
  margin-bottom: 0.75rem;
}

.info-section ul {
  list-style: none;
  padding: 0;
}

.info-section li {
  padding: 0.25rem 0;
  font-size: 0.9rem;
}

.info-section p {
  margin: 0.5rem 0;
  font-size: 0.9rem;
}

.rating {
  color: #667eea;
  font-weight: 600;
}

.highlight {
  font-size: 1.5rem;
  font-weight: 700;
  color: #48bb78;
}

.demo-panel {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #667eea;
  color: white;
}

.btn-primary:hover {
  background: #5568d3;
}

.btn-secondary {
  background: #48bb78;
  color: white;
}

.btn-secondary:hover {
  background: #38a169;
}

.btn-info {
  background: #4299e1;
  color: white;
}

.btn-info:hover {
  background: #3182ce;
}

.print-content {
  background: #f7fafc;
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 2rem;
  margin-bottom: 2rem;
}

.document {
  background: white;
  padding: 3rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  max-width: 800px;
  margin: 0 auto;
}

.doc-header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 2px solid #e2e8f0;
}

.doc-header h1 {
  color: #2d3748;
  margin-bottom: 0.5rem;
}

.doc-meta {
  color: #718096;
  font-style: italic;
}

.doc-section {
  margin-bottom: 2rem;
}

.doc-section h2 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.doc-section h3 {
  color: #4a5568;
  margin: 1rem 0 0.5rem;
}

.doc-section p {
  line-height: 1.8;
  color: #4a5568;
  margin-bottom: 0.75rem;
}

.doc-section ul,
.doc-section ol {
  line-height: 1.8;
  color: #4a5568;
  margin-left: 1.5rem;
}

.doc-section code {
  background: #edf2f7;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.doc-section pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
}

.doc-section pre code {
  background: transparent;
  padding: 0;
  color: inherit;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.data-table th,
.data-table td {
  padding: 0.75rem;
  border: 1px solid #e2e8f0;
  text-align: left;
}

.data-table th {
  background: #f7fafc;
  font-weight: 600;
  color: #2d3748;
}

.doc-footer {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px solid #e2e8f0;
  text-align: center;
  color: #718096;
}

.code-examples {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
}

.code-examples h3 {
  color: #2d3748;
  margin-bottom: 1rem;
}

.code-block {
  margin-bottom: 1.5rem;
}

.code-block h4 {
  color: #4a5568;
  margin-bottom: 0.5rem;
}

.code-block pre {
  background: #2d3748;
  color: #e2e8f0;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 0;
}

.code-block code {
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.6;
}

/* æ‰“å°æ ·å¼ */
@media print {
  .demo-page {
    padding: 0;
  }

  .page-header,
  .info-panel,
  .controls,
  .code-examples,
  .back-link {
    display: none !important;
  }

  .content-grid {
    grid-template-columns: 1fr;
  }

  .demo-panel {
    border: none;
    padding: 0;
  }

  .print-content {
    background: white;
    border: none;
    padding: 0;
  }

  .document {
    box-shadow: none;
    padding: 0;
  }

  .page-break {
    page-break-after: always;
    break-after: page;
  }

  .no-print {
    display: none !important;
  }

  .doc-section {
    page-break-inside: avoid;
    break-inside: avoid;
  }
}
</style>
