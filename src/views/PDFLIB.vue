<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>ğŸ“š PDF-LIB - ç°ä»£åŒ–PDFæ“ä½œåº“</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>pdf-lib</strong></p>
          <p>npm install pdf-lib</p>
        </div>

        <div class="info-section">
          <h3>ğŸ’¾ æ–‡ä»¶å¤§å°</h3>
          <p><strong>~200KB</strong> (å‹ç¼©å)</p>
          <p>ç°ä»£åŒ–ã€åŠŸèƒ½å…¨é¢</p>
        </div>

        <div class="info-section">
          <h3>ğŸŒ æµè§ˆå™¨æ”¯æŒ</h3>
          <div class="browser-badges">
            <span class="badge badge-success">Chrome âœ“</span>
            <span class="badge badge-success">Firefox âœ“</span>
            <span class="badge badge-success">Safari âœ“</span>
            <span class="badge badge-success">Edge âœ“</span>
            <span class="badge badge-error">IE11 âœ—</span>
          </div>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½è¡¨ç°</h3>
          <p>åˆå§‹åŒ–: <strong>~50ms</strong></p>
          <p>åˆ›å»ºPDF: <strong>~100ms</strong></p>
          <p>ç¼–è¾‘PDF: <strong>~150ms</strong></p>
        </div>

        <div class="info-section">
          <h3>âœ… ä¼˜ç‚¹</h3>
          <ul>
            <li>ç°ä»£ES6+ API</li>
            <li>æ”¯æŒåˆ›å»ºå’Œç¼–è¾‘</li>
            <li>å¯å¡«å†™PDFè¡¨å•</li>
            <li>æ”¯æŒåµŒå…¥å­—ä½“</li>
            <li>æ— å¤–éƒ¨ä¾èµ–</li>
            <li>TypeScriptæ”¯æŒå¥½</li>
            <li>å¯æ“ä½œç°æœ‰PDF</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âŒ ç¼ºç‚¹</h3>
          <ul>
            <li>åŒ…ä½“ç§¯è¾ƒå¤§</li>
            <li>å­¦ä¹ æ›²çº¿é™¡å³­</li>
            <li>æ–‡æ¡£ç›¸å¯¹è¾ƒå°‘</li>
            <li>ä¸æ”¯æŒIE11</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ é€‚ç”¨åœºæ™¯</h3>
          <ul>
            <li>PDFè¡¨å•å¡«å†™</li>
            <li>PDFåˆå¹¶æ‹†åˆ†</li>
            <li>PDFç¼–è¾‘ä¿®æ”¹</li>
            <li>æ·»åŠ æ°´å°ç­¾å</li>
            <li>æ–‡æ¡£åŠ å¯†ä¿æŠ¤</li>
            <li>å¤æ‚PDFæ“ä½œ</li>
          </ul>
        </div>
      </aside>

      <main class="demo-content">
        <div class="section">
          <h2>1. åˆ›å»ºåŸºç¡€PDF</h2>
          <button @click="createBasicPDF" class="btn btn-primary">ğŸ“„ åˆ›å»ºåŸºç¡€PDFæ–‡æ¡£</button>

          <div class="code-block">
            <h4>å®‰è£…</h4>
            <pre><code>npm install pdf-lib</code></pre>
          </div>

          <div class="code-block">
            <h4>åˆ›å»ºPDF</h4>
            <pre><code>import { PDFDocument, rgb } from 'pdf-lib';

const pdfDoc = await PDFDocument.create();
const page = pdfDoc.addPage([600, 400]);

page.drawText('Hello, PDF-LIB!', {
  x: 50,
  y: 350,
  size: 30,
  color: rgb(0, 0.53, 0.71),
});

const pdfBytes = await pdfDoc.save();
download(pdfBytes, 'basic.pdf');</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>2. ä¿®æ”¹ç°æœ‰PDF</h2>
          <button @click="modifyExistingPDF" class="btn btn-success">âœï¸ ç¼–è¾‘PDFæ–‡æ¡£</button>

          <div class="code-block">
            <h4>åŠ è½½å¹¶ä¿®æ”¹PDF</h4>
            <pre><code>// å…ˆåˆ›å»ºä¸€ä¸ªPDFï¼Œç„¶åä¿®æ”¹å®ƒ
const existingPdfBytes = await createSamplePDF();

// åŠ è½½ç°æœ‰PDF
const pdfDoc = await PDFDocument.load(existingPdfBytes);

// Get first page
const pages = pdfDoc.getPages();
const firstPage = pages[0];

// Add text
firstPage.drawText('EDITED', {
  x: 50,
  y: 50,
  size: 20,
  color: rgb(0.95, 0.1, 0.1),
});

const modifiedPdfBytes = await pdfDoc.save();
download(modifiedPdfBytes, 'modified.pdf');</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>3. åˆå¹¶å¤šä¸ªPDF</h2>
          <button @click="mergePDFs" class="btn btn-info">ğŸ”— åˆå¹¶PDFæ–‡æ¡£</button>

          <div class="code-block">
            <h4>PDFåˆå¹¶</h4>
            <pre><code>import { PDFDocument } from 'pdf-lib';

// åˆ›å»ºæ–°æ–‡æ¡£
const mergedPdf = await PDFDocument.create();

// åŠ è½½æºæ–‡æ¡£
const pdf1 = await PDFDocument.load(pdfBytes1);
const pdf2 = await PDFDocument.load(pdfBytes2);

// å¤åˆ¶é¡µé¢
const copiedPages1 = await mergedPdf.copyPages(pdf1, pdf1.getPageIndices());
const copiedPages2 = await mergedPdf.copyPages(pdf2, pdf2.getPageIndices());

// æ·»åŠ åˆ°æ–°æ–‡æ¡£
copiedPages1.forEach((page) =&gt; mergedPdf.addPage(page));
copiedPages2.forEach((page) =&gt; mergedPdf.addPage(page));

const mergedPdfBytes = await mergedPdf.save();
download(mergedPdfBytes, 'merged.pdf');</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>4. åµŒå…¥å›¾ç‰‡</h2>
          <button @click="embedImages" class="btn btn-warning">ğŸ–¼ï¸ åµŒå…¥å›¾ç‰‡åˆ°PDF</button>

          <div class="code-block">
            <h4>å›¾ç‰‡åµŒå…¥</h4>
            <pre><code>import { PDFDocument } from 'pdf-lib';

const pdfDoc = await PDFDocument.create();
const page = pdfDoc.addPage([600, 800]);

// åµŒå…¥PNGå›¾ç‰‡
const pngImageBytes = await fetch('/image.png').then(res =&gt; res.arrayBuffer());
const pngImage = await pdfDoc.embedPng(pngImageBytes);

// åµŒå…¥JPGå›¾ç‰‡
const jpgImageBytes = await fetch('/photo.jpg').then(res =&gt; res.arrayBuffer());
const jpgImage = await pdfDoc.embedJpg(jpgImageBytes);

// ç»˜åˆ¶å›¾ç‰‡
page.drawImage(pngImage, {
  x: 50,
  y: 500,
  width: 200,
  height: 150,
});

page.drawImage(jpgImage, {
  x: 300,
  y: 500,
  width: 200,
  height: 150,
});</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>5. æ·»åŠ æ°´å°</h2>
          <button @click="addWatermark" class="btn btn-secondary">ğŸ’§ æ·»åŠ æ–‡å­—æ°´å°</button>

          <div class="code-block">
            <h4>æ°´å°åŠŸèƒ½</h4>
            <pre><code>import { PDFDocument, rgb, degrees } from 'pdf-lib';

const pdfDoc = await PDFDocument.load(existingPdfBytes);
const pages = pdfDoc.getPages();

// ç»™æ¯ä¸€é¡µæ·»åŠ æ°´å°
pages.forEach((page) =&gt; {
  const { width, height } = page.getSize();

  page.drawText('æœºå¯†æ–‡ä»¶', {
    x: width / 2 - 100,
    y: height / 2,
    size: 80,
    color: rgb(0.95, 0.1, 0.1),
    opacity: 0.2,
    rotate: degrees(-45),
  });
});

const watermarkedPdf = await pdfDoc.save();
download(watermarkedPdf, 'watermarked.pdf');</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>6. PDFè¡¨å•å¡«å†™</h2>
          <button @click="fillForm" class="btn btn-danger">ğŸ“ å¡«å†™PDFè¡¨å•</button>

          <div class="code-block">
            <h4>è¡¨å•æ“ä½œ</h4>
            <pre><code>import { PDFDocument } from 'pdf-lib';

// åŠ è½½åŒ…å«è¡¨å•çš„PDF
const pdfDoc = await PDFDocument.load(formPdfBytes);
const form = pdfDoc.getForm();

// è·å–è¡¨å•å­—æ®µ
const nameField = form.getTextField('name');
const emailField = form.getTextField('email');
const checkBox = form.getCheckBox('agree');

// å¡«å†™è¡¨å•
nameField.setText('å¼ ä¸‰');
emailField.setText('zhang@example.com');
checkBox.check();

// å¯é€‰ï¼šä½¿è¡¨å•ä¸å¯ç¼–è¾‘
form.flatten();

const filledPdfBytes = await pdfDoc.save();
download(filledPdfBytes, 'filled-form.pdf');</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>7. å¤šé¡µå¤æ‚æ–‡æ¡£</h2>
          <button @click="createComplexDoc" class="btn btn-primary">ğŸ“‹ åˆ›å»ºå¤æ‚æ–‡æ¡£</button>

          <div class="code-block">
            <h4>å¤æ‚å¸ƒå±€</h4>
            <pre><code>import { PDFDocument, StandardFonts, rgb } from 'pdf-lib';

const pdfDoc = await PDFDocument.create();
const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman);
const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica);

// ç¬¬ä¸€é¡µ - å°é¢
const coverPage = pdfDoc.addPage([600, 800]);
coverPage.drawText('æŠ€æœ¯æŠ¥å‘Š', {
  x: 200,
  y: 400,
  size: 50,
  font: helveticaFont,
  color: rgb(0, 0.25, 0.5),
});

// ç¬¬äºŒé¡µ - å†…å®¹
const contentPage = pdfDoc.addPage([600, 800]);
contentPage.drawText('ç¬¬ä¸€ç« ï¼šæ¦‚è¿°', {
  x: 50,
  y: 750,
  size: 24,
  font: timesRomanFont,
  color: rgb(0, 0, 0),
});

contentPage.drawText('è¿™æ˜¯æ­£æ–‡å†…å®¹...', {
  x: 50,
  y: 700,
  size: 14,
  font: timesRomanFont,
  color: rgb(0.2, 0.2, 0.2),
  maxWidth: 500,
  lineHeight: 20,
});

const pdfBytes = await pdfDoc.save();
download(pdfBytes, 'complex-doc.pdf');</code></pre>
          </div>
        </div>

        <div class="comparison-section">
          <h2>ğŸ†š ä¸å…¶ä»–åº“å¯¹æ¯”</h2>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>ç‰¹æ€§</th>
                <th>PDF-LIB</th>
                <th>jsPDF</th>
                <th>pdfmake</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>åˆ›å»ºPDF</td>
                <td class="success">âœ“ æ”¯æŒ</td>
                <td class="success">âœ“ æ”¯æŒ</td>
                <td class="success">âœ“ æ”¯æŒ</td>
              </tr>
              <tr>
                <td>ç¼–è¾‘ç°æœ‰PDF</td>
                <td class="success">âœ“ å¼ºå¤§</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
              </tr>
              <tr>
                <td>PDFåˆå¹¶</td>
                <td class="success">âœ“ åŸç”Ÿæ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
              </tr>
              <tr>
                <td>è¡¨å•å¡«å†™</td>
                <td class="success">âœ“ å®Œæ•´æ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
              </tr>
              <tr>
                <td>APIè®¾è®¡</td>
                <td class="success">âœ“ ç°ä»£åŒ–</td>
                <td class="warning">â–³ ä¼ ç»Ÿ</td>
                <td class="success">âœ“ å£°æ˜å¼</td>
              </tr>
              <tr>
                <td>æ–‡ä»¶å¤§å°</td>
                <td class="warning">â–³ ~200KB</td>
                <td class="success">âœ“ ~150KB</td>
                <td class="error">âœ— ~650KB</td>
              </tr>
              <tr>
                <td>TypeScript</td>
                <td class="success">âœ“ åŸç”Ÿ</td>
                <td class="warning">â–³ ç¤¾åŒº</td>
                <td class="success">âœ“ åŸç”Ÿ</td>
              </tr>
              <tr>
                <td>å­¦ä¹ æ›²çº¿</td>
                <td class="warning">â–³ ä¸­ç­‰</td>
                <td class="warning">â–³ ä¸­ç­‰</td>
                <td class="success">âœ“ ç®€å•</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="best-practices">
          <h2>ğŸ’¡ æœ€ä½³å®è·µ</h2>
          <div class="practice-grid">
            <div class="practice-card">
              <h3>ğŸ¯ é€‰æ‹©åˆé€‚åœºæ™¯</h3>
              <p>éœ€è¦ç¼–è¾‘ç°æœ‰PDFæ—¶é¦–é€‰PDF-LIBï¼Œåˆ›å»ºæ–°PDFå¯è€ƒè™‘jsPDFæˆ–pdfmake</p>
            </div>
            <div class="practice-card">
              <h3>âš¡ å¼‚æ­¥å¤„ç†</h3>
              <p>æ‰€æœ‰PDFæ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½¿ç”¨async/awaitç¡®ä¿æ“ä½œå®Œæˆ</p>
            </div>
            <div class="practice-card">
              <h3>ğŸ“¦ æŒ‰éœ€åŠ è½½</h3>
              <p>åŒ…ä½“ç§¯è¾ƒå¤§ï¼Œå»ºè®®åŠ¨æ€å¯¼å…¥æˆ–ä»£ç åˆ†å‰²å‡å°‘åˆå§‹åŠ è½½</p>
            </div>
            <div class="practice-card">
              <h3>ğŸ”’ å®‰å…¨æ€§</h3>
              <p>å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„PDFæ—¶æ³¨æ„å®‰å…¨éªŒè¯ï¼Œé¿å…æ¶æ„æ–‡ä»¶</p>
            </div>
          </div>
        </div>

        <div class="features-highlight">
          <h2>ğŸŒŸ ç‹¬ç‰¹ä¼˜åŠ¿</h2>
          <div class="feature-cards">
            <div class="feature-card">
              <div class="feature-icon">ğŸ”§</div>
              <h3>PDFç¼–è¾‘èƒ½åŠ›</h3>
              <p>å”¯ä¸€èƒ½åŸç”Ÿç¼–è¾‘ç°æœ‰PDFçš„çº¯JSåº“ï¼Œæ”¯æŒé¡µé¢æ“ä½œã€å†…å®¹ä¿®æ”¹ã€è¡¨å•å¡«å†™ç­‰</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">ğŸ”—</div>
              <h3>æ–‡æ¡£åˆå¹¶æ‹†åˆ†</h3>
              <p>è½»æ¾åˆå¹¶å¤šä¸ªPDFæˆ–æå–ç‰¹å®šé¡µé¢ï¼Œé€‚ç”¨äºæ–‡æ¡£ç®¡ç†ç³»ç»Ÿ</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">ğŸ“</div>
              <h3>è¡¨å•æ“ä½œ</h3>
              <p>æ”¯æŒåˆ›å»ºã€å¡«å†™ã€éªŒè¯PDFè¡¨å•ï¼Œé€‚åˆç”µå­ç­¾åå’Œå®¡æ‰¹æµç¨‹</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">ğŸ’¾</div>
              <h3>æ— ä¾èµ–è®¾è®¡</h3>
              <p>çº¯JavaScriptå®ç°ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“ï¼Œæ›´å®‰å…¨å¯æ§</p>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { PDFDocument, rgb, StandardFonts, degrees } from 'pdf-lib'

// è¾…åŠ©å‡½æ•°ï¼šä¸‹è½½PDF
const download = (pdfBytes: Uint8Array, fileName: string) => {
  const blob = new Blob([pdfBytes], { type: 'application/pdf' })
  const url = URL.createObjectURL(blob)
  const link = document.createElement('a')
  link.href = url
  link.download = fileName
  link.click()
  URL.revokeObjectURL(url)
}

const createBasicPDF = async () => {
  const pdfDoc = await PDFDocument.create()
  const page = pdfDoc.addPage([600, 400])

  const { width, height } = page.getSize()

  // Note: PDF-LIB default fonts don't support Chinese
  // Use StandardFonts or embed custom fonts for Chinese

  page.drawText('Hello, PDF-LIB!', {
    x: 50,
    y: height - 50,
    size: 30,
    color: rgb(0, 0.53, 0.71),
  })

  page.drawText('Created with PDF-LIB - Basic Document Example', {
    x: 50,
    y: height - 100,
    size: 16,
    color: rgb(0.2, 0.2, 0.2),
  })

  // Draw a rectangle
  page.drawRectangle({
    x: 50,
    y: height - 250,
    width: 500,
    height: 100,
    borderColor: rgb(0, 0.53, 0.71),
    borderWidth: 2,
  })

  page.drawText('Text inside rectangle box', {
    x: 70,
    y: height - 190,
    size: 14,
    color: rgb(0, 0, 0),
  })

  const pdfBytes = await pdfDoc.save()
  download(pdfBytes, 'basic-pdf-lib.pdf')
}

const modifyExistingPDF = async () => {
  // Create an original PDF first
  const existingPdf = await PDFDocument.create()
  const page = existingPdf.addPage([600, 400])
  page.drawText('Original PDF Document', {
    x: 50,
    y: 350,
    size: 24,
    color: rgb(0, 0, 0),
  })
  const existingPdfBytes = await existingPdf.save()

  // Load and modify
  const pdfDoc = await PDFDocument.load(existingPdfBytes)
  const pages = pdfDoc.getPages()
  const firstPage = pages[0]

  if (firstPage) {
    firstPage.drawText('EDITED', {
      x: 50,
      y: 300,
      size: 20,
      color: rgb(0.95, 0.1, 0.1),
    })

    firstPage.drawText(`Edit time: ${new Date().toLocaleString('en-US')}`, {
      x: 50,
      y: 270,
      size: 12,
      color: rgb(0.5, 0.5, 0.5),
    })
  }

  const modifiedPdfBytes = await pdfDoc.save()
  download(modifiedPdfBytes, 'modified-pdf.pdf')
}

const mergePDFs = async () => {
  // Create two PDFs
  const pdf1 = await PDFDocument.create()
  const page1 = pdf1.addPage([600, 400])
  page1.drawText('First PDF Document', {
    x: 50,
    y: 350,
    size: 24,
    color: rgb(0.2, 0.4, 0.8),
  })
  const pdf1Bytes = await pdf1.save()

  const pdf2 = await PDFDocument.create()
  const page2 = pdf2.addPage([600, 400])
  page2.drawText('Second PDF Document', {
    x: 50,
    y: 350,
    size: 24,
    color: rgb(0.8, 0.2, 0.4),
  })
  const pdf2Bytes = await pdf2.save()

  // åˆå¹¶
  const mergedPdf = await PDFDocument.create()

  const pdfA = await PDFDocument.load(pdf1Bytes)
  const pdfB = await PDFDocument.load(pdf2Bytes)

  const copiedPagesA = await mergedPdf.copyPages(pdfA, pdfA.getPageIndices())
  const copiedPagesB = await mergedPdf.copyPages(pdfB, pdfB.getPageIndices())

  copiedPagesA.forEach((page) => mergedPdf.addPage(page))
  copiedPagesB.forEach((page) => mergedPdf.addPage(page))

  const mergedPdfBytes = await mergedPdf.save()
  download(mergedPdfBytes, 'merged-pdf.pdf')
}

const embedImages = async () => {
  const pdfDoc = await PDFDocument.create()
  const page = pdfDoc.addPage([600, 800])

  // åˆ›å»ºç®€å•çš„PNGæ•°æ®ï¼ˆ1x1é€æ˜åƒç´ ï¼‰
  const pngDataUrl =
    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=='
  const pngBytes = await fetch(pngDataUrl).then((res) => res.arrayBuffer())
  const pngImage = await pdfDoc.embedPng(pngBytes)

  const { width, height } = page.getSize()

  page.drawText('Image Embedding Example', {
    x: 50,
    y: height - 50,
    size: 24,
    color: rgb(0, 0, 0),
  })

  // Draw multiple images with different opacity
  for (let i = 0; i < 3; i++) {
    page.drawImage(pngImage, {
      x: 50 + i * 150,
      y: height - 200,
      width: 100,
      height: 100,
      opacity: 0.3 + i * 0.3,
    })

    page.drawText(`Opacity: ${((0.3 + i * 0.3) * 100).toFixed(0)}%`, {
      x: 50 + i * 150,
      y: height - 220,
      size: 10,
      color: rgb(0, 0, 0),
    })
  }

  const pdfBytes = await pdfDoc.save()
  download(pdfBytes, 'images-embedded.pdf')
}

const addWatermark = async () => {
  // åˆ›å»ºä¸€ä¸ªç¤ºä¾‹PDF
  const pdfDoc = await PDFDocument.create()
  const page1 = pdfDoc.addPage([600, 800])
  const page2 = pdfDoc.addPage([600, 800])

  const font = await pdfDoc.embedFont(StandardFonts.Helvetica)

  // Add content
  page1.drawText('Page 1 Content', { x: 50, y: 750, size: 20, font })
  page2.drawText('Page 2 Content', { x: 50, y: 750, size: 20, font })

  // Add watermark to each page
  const pages = pdfDoc.getPages()
  pages.forEach((page) => {
    const { width, height } = page.getSize()

    page.drawText('CONFIDENTIAL', {
      x: width / 2 - 80,
      y: height / 2,
      size: 80,
      font,
      color: rgb(0.95, 0.1, 0.1),
      opacity: 0.2,
      rotate: degrees(-45),
    })

    page.drawText('CONFIDENTIAL', {
      x: width / 2 - 100,
      y: height / 2 - 60,
      size: 40,
      font,
      color: rgb(0.95, 0.1, 0.1),
      opacity: 0.15,
      rotate: degrees(-45),
    })
  })

  const watermarkedPdf = await pdfDoc.save()
  download(watermarkedPdf, 'watermarked.pdf')
}

const fillForm = async () => {
  // åˆ›å»ºåŒ…å«è¡¨å•çš„PDF
  const pdfDoc = await PDFDocument.create()
  const page = pdfDoc.addPage([600, 800])
  const form = pdfDoc.getForm()

  const { height } = page.getSize()

  // Title
  page.drawText('User Information Form', {
    x: 50,
    y: height - 50,
    size: 24,
    color: rgb(0, 0, 0),
  })

  // Create text fields
  const nameField = form.createTextField('name')
  nameField.setText('John Doe')
  nameField.addToPage(page, { x: 150, y: height - 120, width: 200, height: 25 })

  page.drawText('Name:', { x: 50, y: height - 110, size: 14 })

  const emailField = form.createTextField('email')
  emailField.setText('john@example.com')
  emailField.addToPage(page, { x: 150, y: height - 170, width: 200, height: 25 })

  page.drawText('Email:', { x: 50, y: height - 160, size: 14 })

  // Create checkbox
  const agreeCheckBox = form.createCheckBox('agree')
  agreeCheckBox.check()
  agreeCheckBox.addToPage(page, { x: 50, y: height - 220, width: 20, height: 20 })

  page.drawText('I agree to terms and conditions', { x: 80, y: height - 215, size: 12 })

  page.drawText('(Form auto-filled)', {
    x: 50,
    y: height - 270,
    size: 10,
    color: rgb(0.5, 0.5, 0.5),
  })

  const filledPdfBytes = await pdfDoc.save()
  download(filledPdfBytes, 'filled-form.pdf')
}

const createComplexDoc = async () => {
  const pdfDoc = await PDFDocument.create()
  const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman)
  const helveticaBoldFont = await pdfDoc.embedFont(StandardFonts.HelveticaBold)

  // å°é¢é¡µ
  const coverPage = pdfDoc.addPage([600, 800])
  const { width: coverWidth, height: coverHeight } = coverPage.getSize()

  coverPage.drawText('Technical Research Report', {
    x: coverWidth / 2 - 120,
    y: coverHeight / 2 + 100,
    size: 50,
    font: helveticaBoldFont,
    color: rgb(0, 0.25, 0.5),
  })

  coverPage.drawText('Modern Frontend Printing', {
    x: coverWidth / 2 - 90,
    y: coverHeight / 2 + 40,
    size: 24,
    font: timesRomanFont,
    color: rgb(0.2, 0.2, 0.2),
  })

  coverPage.drawText(`Date: ${new Date().toLocaleDateString('en-US')}`, {
    x: coverWidth / 2 - 60,
    y: 100,
    size: 14,
    font: timesRomanFont,
    color: rgb(0.5, 0.5, 0.5),
  })

  // Content page
  const contentPage = pdfDoc.addPage([600, 800])
  const { width: contentWidth, height: contentHeight } = contentPage.getSize()

  contentPage.drawText('Chapter 1: Overview', {
    x: 50,
    y: contentHeight - 50,
    size: 24,
    font: helveticaBoldFont,
    color: rgb(0, 0, 0),
  })

  const paragraphs = [
    'This report provides comprehensive research on modern',
    'frontend printing framework solutions, including native',
    'browser APIs and third-party libraries.',
    '',
    'PDF-LIB is a powerful modern PDF manipulation library',
    'supporting creation, editing, merging, and form filling.',
  ]

  let yPosition = contentHeight - 100
  paragraphs.forEach((text) => {
    contentPage.drawText(text, {
      x: 50,
      y: yPosition,
      size: 14,
      font: timesRomanFont,
      color: rgb(0.2, 0.2, 0.2),
    })
    yPosition -= 25
  })

  // Chapter 2
  contentPage.drawText('Chapter 2: Technology Selection', {
    x: 50,
    y: yPosition - 30,
    size: 24,
    font: helveticaBoldFont,
    color: rgb(0, 0, 0),
  })

  const pdfBytes = await pdfDoc.save()
  download(pdfBytes, 'complex-document.pdf')
}
</script>

<style scoped>
/* å¤ç”¨ä¹‹å‰çš„æ ·å¼ */
.demo-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
}

.page-header {
  background: white;
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.page-header h1 {
  margin: 0;
  color: #2c3e50;
  font-size: 28px;
}

.back-link {
  padding: 10px 20px;
  background: #667eea;
  color: white;
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.3s;
}

.back-link:hover {
  background: #764ba2;
  transform: translateY(-2px);
}

.content-grid {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 30px;
}

.info-panel {
  background: white;
  border-radius: 12px;
  padding: 25px;
  height: fit-content;
  position: sticky;
  top: 20px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.info-panel h2 {
  margin-top: 0;
  color: #667eea;
  border-bottom: 2px solid #667eea;
  padding-bottom: 10px;
}

.info-section {
  margin-bottom: 20px;
}

.info-section h3 {
  color: #2c3e50;
  font-size: 14px;
  margin-bottom: 8px;
}

.info-section p {
  margin: 5px 0;
  font-size: 14px;
  color: #666;
}

.info-section ul {
  margin: 8px 0;
  padding-left: 20px;
}

.info-section li {
  margin: 5px 0;
  font-size: 13px;
  color: #666;
}

.browser-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
}

.badge-success {
  background: #d4edda;
  color: #155724;
}

.badge-error {
  background: #f8d7da;
  color: #721c24;
}

.demo-content {
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.section {
  margin-bottom: 40px;
  padding-bottom: 30px;
  border-bottom: 1px solid #e0e0e0;
}

.section:last-child {
  border-bottom: none;
}

.section h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 22px;
}

.btn {
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s;
  margin-right: 10px;
  margin-bottom: 15px;
}

.btn-primary {
  background: #667eea;
  color: white;
}
.btn-primary:hover {
  background: #5568d3;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.4);
}

.btn-success {
  background: #48bb78;
  color: white;
}
.btn-success:hover {
  background: #38a169;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(72, 187, 120, 0.4);
}

.btn-info {
  background: #4299e1;
  color: white;
}
.btn-info:hover {
  background: #3182ce;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(66, 153, 225, 0.4);
}

.btn-warning {
  background: #ed8936;
  color: white;
}
.btn-warning:hover {
  background: #dd6b20;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(237, 137, 54, 0.4);
}

.btn-secondary {
  background: #718096;
  color: white;
}
.btn-secondary:hover {
  background: #4a5568;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(113, 128, 150, 0.4);
}

.btn-danger {
  background: #f56565;
  color: white;
}
.btn-danger:hover {
  background: #e53e3e;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(245, 101, 101, 0.4);
}

.code-block {
  background: #f8f9fa;
  border-left: 4px solid #667eea;
  padding: 15px;
  margin: 15px 0;
  border-radius: 4px;
}

.code-block h4 {
  margin-top: 0;
  color: #667eea;
  font-size: 14px;
}

.code-block pre {
  margin: 10px 0 0 0;
  overflow-x: auto;
}

.code-block code {
  font-family: 'Courier New', Courier, monospace;
  font-size: 13px;
  line-height: 1.6;
  color: #2c3e50;
}

.comparison-section {
  margin: 40px 0;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

.comparison-table th,
.comparison-table td {
  padding: 12px;
  text-align: left;
  border: 1px solid #e0e0e0;
}

.comparison-table th {
  background: #f8f9fa;
  font-weight: 600;
  color: #2c3e50;
}

.comparison-table .success {
  color: #48bb78;
  font-weight: 500;
}

.comparison-table .warning {
  color: #ed8936;
  font-weight: 500;
}

.comparison-table .error {
  color: #f56565;
  font-weight: 500;
}

.best-practices {
  margin: 40px 0;
}

.best-practices h2 {
  color: #2c3e50;
  margin-bottom: 20px;
}

.practice-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.practice-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.practice-card h3 {
  margin-top: 0;
  font-size: 16px;
}

.practice-card p {
  margin: 10px 0 0 0;
  font-size: 14px;
  opacity: 0.95;
}

.features-highlight {
  margin: 40px 0;
}

.features-highlight h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  text-align: center;
}

.feature-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.feature-card {
  background: white;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  padding: 25px;
  text-align: center;
  transition: all 0.3s;
}

.feature-card:hover {
  border-color: #667eea;
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2);
}

.feature-icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.feature-card h3 {
  color: #2c3e50;
  font-size: 18px;
  margin: 10px 0;
}

.feature-card p {
  color: #666;
  font-size: 14px;
  line-height: 1.6;
  margin: 0;
}

@media (max-width: 1024px) {
  .content-grid {
    grid-template-columns: 1fr;
  }

  .info-panel {
    position: relative;
    top: 0;
  }
}
</style>
