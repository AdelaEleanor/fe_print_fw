<template>
  <div class="demo-page">
    <header class="page-header">
      <h1>ğŸ¯ print-html-element - è½»é‡çº§DOMæ‰“å°</h1>
      <router-link to="/" class="back-link">â† è¿”å›é¦–é¡µ</router-link>
    </header>

    <div class="content-grid">
      <aside class="info-panel">
        <h2>æŠ€æœ¯è¯¦æƒ…</h2>
        <div class="info-section">
          <h3>ğŸ“¦ ä¾èµ–</h3>
          <p><strong>print-html-element</strong></p>
          <p>npm install print-html-element</p>
        </div>

        <div class="info-section">
          <h3>ğŸ’¾ æ–‡ä»¶å¤§å°</h3>
          <p><strong>~5KB</strong> (å‹ç¼©å)</p>
          <p>è¶…è½»é‡çº§æ–¹æ¡ˆ</p>
        </div>

        <div class="info-section">
          <h3>ğŸŒ æµè§ˆå™¨æ”¯æŒ</h3>
          <div class="browser-badges">
            <span class="badge badge-success">Chrome âœ“</span>
            <span class="badge badge-success">Firefox âœ“</span>
            <span class="badge badge-success">Safari âœ“</span>
            <span class="badge badge-success">Edge âœ“</span>
            <span class="badge badge-success">IE11 âœ“</span>
          </div>
        </div>

        <div class="info-section">
          <h3>âš¡ æ€§èƒ½è¡¨ç°</h3>
          <p>åˆå§‹åŒ–: <strong>~5ms</strong></p>
          <p>æ‰“å°å‡†å¤‡: <strong>~20ms</strong></p>
        </div>

        <div class="info-section">
          <h3>âœ… ä¼˜ç‚¹</h3>
          <ul>
            <li>æå…¶è½»é‡ï¼ˆ5KBï¼‰</li>
            <li>APIè¶…çº§ç®€å•</li>
            <li>ä¿ç•™DOMæ ·å¼</li>
            <li>æ”¯æŒIE11</li>
            <li>é›¶é…ç½®ä½¿ç”¨</li>
            <li>æ€§èƒ½ä¼˜ç§€</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>âŒ ç¼ºç‚¹</h3>
          <ul>
            <li>åŠŸèƒ½ç›¸å¯¹ç®€å•</li>
            <li>ä»…æ”¯æŒæ‰“å°</li>
            <li>ä¸ç”ŸæˆPDFæ–‡ä»¶</li>
            <li>ä¾èµ–æµè§ˆå™¨æ‰“å°</li>
          </ul>
        </div>

        <div class="info-section">
          <h3>ğŸ¯ é€‚ç”¨åœºæ™¯</h3>
          <ul>
            <li>ç®€å•ç½‘é¡µæ‰“å°</li>
            <li>DOMå…ƒç´ æ‰“å°</li>
            <li>å‘ç¥¨è®¢å•æ‰“å°</li>
            <li>æŠ¥è¡¨å¿«é€Ÿæ‰“å°</li>
            <li>å¯¹åŒ…ä½“ç§¯æ•æ„Ÿ</li>
          </ul>
        </div>
      </aside>

      <main class="demo-content">
        <div class="section">
          <h2>1. åŸºç¡€DOMæ‰“å°</h2>
          <div id="print-content-1" class="print-sample">
            <h3>å‘ç¥¨</h3>
            <p><strong>è®¢å•å·ï¼š</strong> INV-2025-001</p>
            <p><strong>æ—¥æœŸï¼š</strong> {{ new Date().toLocaleDateString('zh-CN') }}</p>
            <p><strong>å®¢æˆ·ï¼š</strong> å¼ ä¸‰</p>
            <hr />
            <table class="invoice-table">
              <thead>
                <tr>
                  <th>å•†å“</th>
                  <th>æ•°é‡</th>
                  <th>å•ä»·</th>
                  <th>é‡‘é¢</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>MacBook Pro</td>
                  <td>1</td>
                  <td>Â¥14,999</td>
                  <td>Â¥14,999</td>
                </tr>
                <tr>
                  <td>AirPods Pro</td>
                  <td>2</td>
                  <td>Â¥1,899</td>
                  <td>Â¥3,798</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3"><strong>æ€»è®¡</strong></td>
                  <td><strong>Â¥18,797</strong></td>
                </tr>
              </tfoot>
            </table>
          </div>
          <button @click="printElement1" class="btn btn-primary">ğŸ–¨ï¸ æ‰“å°å‘ç¥¨</button>

          <div class="code-block">
            <h4>å®‰è£…</h4>
            <pre><code>npm install print-html-element</code></pre>
          </div>

          <div class="code-block">
            <h4>åŸºç¡€ç”¨æ³•</h4>
            <pre><code>import printElement from 'print-html-element';

const element = document.getElementById('print-content');
printElement(element);</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>2. è‡ªå®šä¹‰æ ·å¼æ‰“å°</h2>
          <div id="print-content-2" class="print-sample styled">
            <div class="header-section">
              <h2>æŠ€æœ¯æŠ¥å‘Š</h2>
              <p class="subtitle">2025å¹´åº¦å‰ç«¯æ‰“å°æ¡†æ¶è°ƒç ”</p>
            </div>
            <div class="content-section">
              <h3>æ‘˜è¦</h3>
              <p>æœ¬æŠ¥å‘Šå¯¹å½“å‰ä¸»æµçš„å‰ç«¯æ‰“å°è§£å†³æ–¹æ¡ˆè¿›è¡Œäº†å…¨é¢è°ƒç ”å’Œå¯¹æ¯”åˆ†æã€‚</p>
              <h3>å…³é”®å‘ç°</h3>
              <ul>
                <li>print-html-element æ˜¯æœ€è½»é‡çš„é€‰æ‹©ï¼ˆ5KBï¼‰</li>
                <li>PDF-LIB æä¾›æœ€å¼ºå¤§çš„PDFç¼–è¾‘èƒ½åŠ›</li>
                <li>jsPDF-AutoTable ä¸“æ³¨äºè¡¨æ ¼æ‰“å°</li>
              </ul>
            </div>
          </div>
          <button @click="printElement2" class="btn btn-success">ğŸ¨ æ‰“å°æ ·å¼åŒ–å†…å®¹</button>

          <div class="code-block">
            <h4>è‡ªå®šä¹‰æ ·å¼</h4>
            <pre><code>// CSSæ ·å¼ä¼šè‡ªåŠ¨åº”ç”¨åˆ°æ‰“å°å†…å®¹
.print-sample {
  padding: 20px;
  border: 2px solid #333;
}

@media print {
  .print-sample {
    border: none;
  }
}</code></pre>
          </div>
        </div>

        <div class="section">
          <h2>3. å¤šä¸ªå…ƒç´ æ‰“å°</h2>
          <div class="multi-print-demo">
            <div id="section-1" class="print-section">
              <h4>ç¬¬ä¸€éƒ¨åˆ†</h4>
              <p>è¿™æ˜¯ç¬¬ä¸€éƒ¨åˆ†çš„å†…å®¹...</p>
            </div>
            <div id="section-2" class="print-section">
              <h4>ç¬¬äºŒéƒ¨åˆ†</h4>
              <p>è¿™æ˜¯ç¬¬äºŒéƒ¨åˆ†çš„å†…å®¹...</p>
            </div>
            <div id="section-3" class="print-section">
              <h4>ç¬¬ä¸‰éƒ¨åˆ†</h4>
              <p>è¿™æ˜¯ç¬¬ä¸‰éƒ¨åˆ†çš„å†…å®¹...</p>
            </div>
          </div>
          <button @click="printMultiple" class="btn btn-info">ğŸ“‹ æ‰“å°å¤šä¸ªéƒ¨åˆ†</button>

          <div class="code-block">
            <h4>æ‰“å°å¤šä¸ªå…ƒç´ </h4>
            <pre><code>// åˆ›å»ºå®¹å™¨å¹¶åˆå¹¶å…ƒç´ 
const container = document.createElement('div');
const section1 = document.getElementById('section-1');
const section2 = document.getElementById('section-2');

container.appendChild(section1.cloneNode(true));
container.appendChild(section2.cloneNode(true));

printElement(container);</code></pre>
          </div>
        </div>

        <div class="comparison-section">
          <h2>ğŸ†š ä¸å…¶ä»–æ‰“å°æ–¹æ¡ˆå¯¹æ¯”</h2>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>ç‰¹æ€§</th>
                <th>print-html-element</th>
                <th>window.print()</th>
                <th>Print.js</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>æ–‡ä»¶å¤§å°</td>
                <td class="success">âœ“ 5KB</td>
                <td class="success">âœ“ 0KB</td>
                <td class="warning">â–³ 18KB</td>
              </tr>
              <tr>
                <td>å±€éƒ¨æ‰“å°</td>
                <td class="success">âœ“ æ”¯æŒ</td>
                <td class="error">âœ— ä¸æ”¯æŒ</td>
                <td class="success">âœ“ æ”¯æŒ</td>
              </tr>
              <tr>
                <td>APIå¤æ‚åº¦</td>
                <td class="success">âœ“ æç®€</td>
                <td class="success">âœ“ æç®€</td>
                <td class="warning">â–³ ä¸­ç­‰</td>
              </tr>
              <tr>
                <td>æ ·å¼ä¿ç•™</td>
                <td class="success">âœ“ å®Œæ•´</td>
                <td class="success">âœ“ å®Œæ•´</td>
                <td class="warning">â–³ éœ€é…ç½®</td>
              </tr>
              <tr>
                <td>IE11æ”¯æŒ</td>
                <td class="success">âœ“ æ”¯æŒ</td>
                <td class="success">âœ“ æ”¯æŒ</td>
                <td class="warning">â–³ éƒ¨åˆ†</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="best-practices">
          <h2>ğŸ’¡ æœ€ä½³å®è·µ</h2>
          <div class="practice-grid">
            <div class="practice-card">
              <h3>ğŸ¯ é€‚åˆç®€å•åœºæ™¯</h3>
              <p>å¯¹äºä¸éœ€è¦ç”ŸæˆPDFæ–‡ä»¶ã€åªéœ€æµè§ˆå™¨æ‰“å°çš„åœºæ™¯ï¼Œè¿™æ˜¯æœ€ä½³é€‰æ‹©</p>
            </div>
            <div class="practice-card">
              <h3>ğŸ“ ä½¿ç”¨@media print</h3>
              <p>é…åˆCSSåª’ä½“æŸ¥è¯¢ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶æ‰“å°æ ·å¼</p>
            </div>
            <div class="practice-card">
              <h3>âš¡ æ€§èƒ½ä¼˜å…ˆ</h3>
              <p>ä»…5KBçš„ä½“ç§¯ï¼Œå¯¹æ€§èƒ½å‡ ä¹æ— å½±å“ï¼Œé€‚åˆæ³¨é‡åŠ è½½é€Ÿåº¦çš„é¡¹ç›®</p>
            </div>
            <div class="practice-card">
              <h3>ğŸ”§ ç»„åˆä½¿ç”¨</h3>
              <p>å¯ä¸å…¶ä»–åº“é…åˆï¼šå…ˆç”¨html2canvasæˆªå›¾ï¼Œå†æ‰“å°å›¾ç‰‡</p>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'

// @ts-ignore
const printElement = ref<any>(null)

onMounted(async () => {
  try {
    // åŠ¨æ€å¯¼å…¥ print-html-element
    const module = await import('print-html-element')
    console.log('print-html-element module:', module)

    // å°è¯•å¤šç§å¯¼å…¥æ–¹å¼
    if (typeof module.default === 'function') {
      printElement.value = module.default
    } else if (typeof module === 'function') {
      printElement.value = module
    } else if (module.printElement && typeof module.printElement === 'function') {
      printElement.value = module.printElement
    } else {
      console.warn('print-html-element not loaded, using fallback')
    }
  } catch (error) {
    console.error('Failed to load print-html-element:', error)
  }
})

const printElement1 = () => {
  const element = document.getElementById('print-content-1')
  if (element && printElement.value && typeof printElement.value === 'function') {
    printElement.value(element)
  } else {
    // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨åŸç”Ÿæ‰“å°
    console.log('Using fallback: window.print()')
    window.print()
  }
}

const printElement2 = () => {
  const element = document.getElementById('print-content-2')
  if (element && printElement.value && typeof printElement.value === 'function') {
    printElement.value(element)
  } else {
    window.print()
  }
}

const printMultiple = () => {
  const container = document.createElement('div')
  const section1 = document.getElementById('section-1')
  const section2 = document.getElementById('section-2')
  const section3 = document.getElementById('section-3')

  if (section1 && section2 && section3) {
    container.appendChild(section1.cloneNode(true))
    container.appendChild(document.createElement('hr'))
    container.appendChild(section2.cloneNode(true))
    container.appendChild(document.createElement('hr'))
    container.appendChild(section3.cloneNode(true))

    if (printElement.value && typeof printElement.value === 'function') {
      printElement.value(container)
    } else {
      window.print()
    }
  }
}
</script>

<style scoped>
/* åŸºç¡€æ ·å¼ - å¤ç”¨ä¹‹å‰çš„æ ·å¼ */
.demo-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  padding: 20px;
}

.page-header {
  background: white;
  padding: 30px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.page-header h1 {
  margin: 0;
  color: #2c3e50;
  font-size: 28px;
}

.back-link {
  padding: 10px 20px;
  background: #f093fb;
  color: white;
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.3s;
}

.back-link:hover {
  background: #f5576c;
  transform: translateY(-2px);
}

.content-grid {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 30px;
}

.info-panel {
  background: white;
  border-radius: 12px;
  padding: 25px;
  height: fit-content;
  position: sticky;
  top: 20px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.info-panel h2 {
  margin-top: 0;
  color: #f093fb;
  border-bottom: 2px solid #f093fb;
  padding-bottom: 10px;
}

.info-section {
  margin-bottom: 20px;
}

.info-section h3 {
  color: #2c3e50;
  font-size: 14px;
  margin-bottom: 8px;
}

.info-section p,
.info-section li {
  margin: 5px 0;
  font-size: 13px;
  color: #666;
}

.info-section ul {
  margin: 8px 0;
  padding-left: 20px;
}

.browser-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
}

.badge-success {
  background: #d4edda;
  color: #155724;
}

.demo-content {
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.section {
  margin-bottom: 40px;
  padding-bottom: 30px;
  border-bottom: 1px solid #e0e0e0;
}

.section h2 {
  color: #2c3e50;
  margin-bottom: 20px;
}

.print-sample {
  background: #f8f9fa;
  padding: 30px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  margin: 20px 0;
}

.print-sample h3 {
  color: #2c3e50;
  margin-top: 0;
}

.invoice-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.invoice-table th,
.invoice-table td {
  padding: 10px;
  border: 1px solid #dee2e6;
  text-align: left;
}

.invoice-table th {
  background: #f8f9fa;
  font-weight: 600;
}

.invoice-table tfoot td {
  background: #f8f9fa;
  font-weight: 600;
}

.styled .header-section {
  text-align: center;
  border-bottom: 3px solid #f093fb;
  padding-bottom: 15px;
  margin-bottom: 20px;
}

.styled .subtitle {
  color: #666;
  font-size: 14px;
}

.multi-print-demo {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.print-section {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  border: 1px solid #dee2e6;
}

.btn {
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s;
  margin-right: 10px;
  margin-bottom: 15px;
}

.btn-primary {
  background: #f093fb;
  color: white;
}
.btn-primary:hover {
  background: #e67ee9;
  transform: translateY(-2px);
}

.btn-success {
  background: #48bb78;
  color: white;
}
.btn-success:hover {
  background: #38a169;
  transform: translateY(-2px);
}

.btn-info {
  background: #4299e1;
  color: white;
}
.btn-info:hover {
  background: #3182ce;
  transform: translateY(-2px);
}

.code-block {
  background: #f8f9fa;
  border-left: 4px solid #f093fb;
  padding: 15px;
  margin: 15px 0;
  border-radius: 4px;
}

.code-block h4 {
  margin-top: 0;
  color: #f093fb;
  font-size: 14px;
}

.code-block pre {
  margin: 10px 0 0 0;
  overflow-x: auto;
}

.code-block code {
  font-family: 'Courier New', Courier, monospace;
  font-size: 13px;
  line-height: 1.6;
  color: #2c3e50;
}

.comparison-section {
  margin: 40px 0;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

.comparison-table th,
.comparison-table td {
  padding: 12px;
  text-align: left;
  border: 1px solid #e0e0e0;
}

.comparison-table th {
  background: #f8f9fa;
  font-weight: 600;
  color: #2c3e50;
}

.comparison-table .success {
  color: #48bb78;
  font-weight: 500;
}

.comparison-table .warning {
  color: #ed8936;
  font-weight: 500;
}

.comparison-table .error {
  color: #f56565;
  font-weight: 500;
}

.best-practices h2 {
  color: #2c3e50;
  margin-bottom: 20px;
}

.practice-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.practice-card {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.practice-card h3 {
  margin-top: 0;
  font-size: 16px;
}

.practice-card p {
  margin: 10px 0 0 0;
  font-size: 14px;
  opacity: 0.95;
}

@media (max-width: 1024px) {
  .content-grid {
    grid-template-columns: 1fr;
  }

  .info-panel {
    position: relative;
    top: 0;
  }
}

@media print {
  .print-sample {
    border: none;
    box-shadow: none;
  }
}
</style>
